{"create_date": "2018/03/24", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "url": "http://blog.jobbole.com/113782/", "url_object_id": "ab0322e9007276c76fe370fbf4a95a33", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://kerneltalks.com/services/what-is-huge-pages-in-linux/\">Shrikant Lavhate</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9450-1.html\">Linux中国/DarkSun</a>   </div><blockquote><p>学习 Linux 中的大内存页hugepage。理解什么是“大内存页”，如何进行配置，如何查看当前状态以及如何禁用它。</p></blockquote>\n<p>本文中我们会详细介绍大内存页huge page，让你能够回答：Linux 中的“大内存页”是什么？在 RHEL6、RHEL7、Ubuntu 等 Linux 中，如何启用/禁用“大内存页”？如何查看“大内存页”的当前值？</p>\n<p>首先让我们从“大内存页”的基础知识开始讲起。</p>\n<h3 id=\"toc_1\">Linux 中的“大内存页”是个什么玩意？</h3>\n<p>“大内存页”有助于 Linux 系统进行虚拟内存管理。顾名思义，除了标准的 4KB 大小的页面外，它们还能帮助管理内存中的巨大的页面。使用“大内存页”，你最大可以定义 1GB 的页面大小。</p>\n<p>在系统启动期间，你能用“大内存页”为应用程序预留一部分内存。这部分内存，即被“大内存页”占用的这些存储器永远不会被交换出内存。它会一直保留其中，除非你修改了配置。这会极大地提高像 Oracle 数据库这样的需要海量内存的应用程序的性能。</p>\n<h3 id=\"toc_2\">为什么使用“大内存页”？</h3>\n<p>在虚拟内存管理中，内核维护一个将虚拟内存地址映射到物理地址的表，对于每个页面操作，内核都需要加载相关的映射。如果你的内存页很小，那么你需要加载的页就会很多，导致内核会加载更多的映射表。而这会降低性能。</p>\n<p>使用“大内存页”，意味着所需要的页变少了。从而大大减少由内核加载的映射表的数量。这提高了内核级别的性能最终有利于应用程序的性能。</p>\n<p>简而言之，通过启用“大内存页”，系统具只需要处理较少的页面映射表，从而减少访问/维护它们的开销！</p>\n<h3 id=\"toc_3\">如何配置“大内存页”？</h3>\n<p>运行下面命令来查看当前“大内存页”的详细内容。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8328873aa6537782518\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # grep Huge /proc/meminfo\r\nAnonHugePages:         0 kB\r\nHugePages_Total:       0\r\nHugePages_Free:        0\r\nHugePages_Rsvd:        0\r\nHugePages_Surp:        0\r\nHugepagesize:       2048 kB\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aa6537782518-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aa6537782518-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aa6537782518-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aa6537782518-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aa6537782518-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aa6537782518-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aa6537782518-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aa6537782518-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8328873aa6537782518-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># grep Huge /proc/meminfo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aa6537782518-2\"><span class=\"crayon-v\">AnonHugePages</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kB</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aa6537782518-3\"><span class=\"crayon-v\">HugePages_Total</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aa6537782518-4\"><span class=\"crayon-v\">HugePages_Free</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aa6537782518-5\"><span class=\"crayon-v\">HugePages_Rsvd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aa6537782518-6\"><span class=\"crayon-v\">HugePages_Surp</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aa6537782518-7\"><span class=\"crayon-v\">Hugepagesize</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">2048</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aa6537782518-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>从上面输出可以看到，每个页的大小为 2MB（<code>Hugepagesize</code>），并且系统中目前有 <code>0</code> 个“大内存页”（<code>HugePages_Total</code>）。这里“大内存页”的大小可以从 <code>2MB</code> 增加到 <code>1GB</code>。</p>\n<p>运行下面的脚本可以知道系统当前需要多少个巨大页。该脚本取之于 Oracle。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8328873aaf765008689\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/bash\r\n#\r\n# hugepages_settings.sh\r\n#\r\n# Linux bash script to compute values for the\r\n# recommended HugePages/HugeTLB configuration\r\n#\r\n# Note: This script does calculation for all shared memory\r\n# segments available when the script is run, no matter it\r\n# is an Oracle RDBMS shared memory segment or not.\r\n# Check for the kernel version\r\nKERN=`uname -r | awk -F. '{ printf(\"%d.%d\\n\",$1,$2); }'`\r\n# Find out the HugePage size\r\nHPG_SZ=`grep Hugepagesize /proc/meminfo | awk {'print $2'}`\r\n# Start from 1 pages to be on the safe side and guarantee 1 free HugePage\r\nNUM_PG=1\r\n# Cumulative number of pages required to handle the running shared memory segments\r\nfor SEG_BYTES in `ipcs -m | awk {'print $5'} | grep \"[0-9][0-9]*\"`\r\ndo\r\n   MIN_PG=`echo \"$SEG_BYTES/($HPG_SZ*1024)\" | bc -q`\r\n   if [ $MIN_PG -gt 0 ]; then\r\n      NUM_PG=`echo \"$NUM_PG+$MIN_PG+1\" | bc -q`\r\n   fi\r\ndone\r\n# Finish with results\r\ncase $KERN in\r\n   '2.4') HUGETLB_POOL=`echo \"$NUM_PG*$HPG_SZ/1024\" | bc -q`;\r\n          echo \"Recommended setting: vm.hugetlb_pool = $HUGETLB_POOL\" ;;\r\n   '2.6' | '3.8' | '3.10' | '4.1' ) echo \"Recommended setting: vm.nr_hugepages = $NUM_PG\" ;;\r\n    *) echo \"Unrecognized kernel version $KERN. Exiting.\" ;;\r\nesac\r\n# End\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873aaf765008689-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873aaf765008689-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-1\"><span class=\"crayon-p\">#!/bin/bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-2\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-3\"><span class=\"crayon-p\"># hugepages_settings.sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-4\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-5\"><span class=\"crayon-p\"># Linux bash script to compute values for the</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-6\"><span class=\"crayon-p\"># recommended HugePages/HugeTLB configuration</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-7\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-8\"><span class=\"crayon-p\"># Note: This script does calculation for all shared memory</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-9\"><span class=\"crayon-p\"># segments available when the script is run, no matter it</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-10\"><span class=\"crayon-p\"># is an Oracle RDBMS shared memory segment or not.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-11\"><span class=\"crayon-p\"># Check for the kernel version</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-12\"><span class=\"crayon-v\">KERN</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">F</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{ printf(\"%d.%d\\n\",$1,$2); }'</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-13\"><span class=\"crayon-p\"># Find out the HugePage size</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-14\"><span class=\"crayon-v\">HPG_SZ</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">grep </span><span class=\"crayon-v\">Hugepagesize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">meminfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'print $2'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-15\"><span class=\"crayon-p\"># Start from 1 pages to be on the safe side and guarantee 1 free HugePage</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-16\"><span class=\"crayon-v\">NUM_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-17\"><span class=\"crayon-p\"># Cumulative number of pages required to handle the running shared memory segments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-18\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SEG_BYTES </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ipcs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'print $5'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"[0-9][0-9]*\"</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-19\"><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">MIN_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$SEG_BYTES/($HPG_SZ*1024)\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-21\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">MIN_PG</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">gt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-22\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">NUM_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$NUM_PG+$MIN_PG+1\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-23\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">fi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-24\"><span class=\"crayon-v\">done</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-25\"><span class=\"crayon-p\"># Finish with results</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-26\"><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">KERN </span><span class=\"crayon-st\">in</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-27\"><span class=\"crayon-h\">   </span><span class=\"crayon-s\">'2.4'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HUGETLB_POOL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$NUM_PG*$HPG_SZ/1024\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-28\"><span class=\"crayon-h\">          </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Recommended setting: vm.hugetlb_pool = $HUGETLB_POOL\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-29\"><span class=\"crayon-h\">   </span><span class=\"crayon-s\">'2.6'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'3.8'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'3.10'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'4.1'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Recommended setting: vm.nr_hugepages = $NUM_PG\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Unrecognized kernel version $KERN. Exiting.\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-31\"><span class=\"crayon-v\">esac</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873aaf765008689-32\"><span class=\"crayon-p\"># End</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873aaf765008689-33\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p>将它以 <code>hugepages_settings.sh</code> 为名保存到 <code>/tmp</code> 中，然后运行之：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8328873ab4850253242\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # sh /tmp/hugepages_settings.sh\r\nRecommended setting: vm.nr_hugepages = 124\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8328873ab4850253242-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873ab4850253242-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873ab4850253242-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8328873ab4850253242-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># sh /tmp/hugepages_settings.sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873ab4850253242-2\"><span class=\"crayon-e\">Recommended </span><span class=\"crayon-v\">setting</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nr_hugepages</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">124</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873ab4850253242-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>你的输出类似如上结果，只是数字会有一些出入。</p>\n<p>这意味着，你系统需要 124 个每个 2MB 的“大内存页”！若你设置页面大小为 4MB，则结果就变成了 62。你明白了吧？</p>\n<h3 id=\"toc_4\">配置内核中的“大内存页”</h3>\n<p>本文最后一部分内容是配置上面提到的 <a href=\"https://kerneltalks.com/linux/how-to-tune-kernel-parameters-in-linux/\">内核参数 </a> ，然后重新加载。将下面内容添加到 <code>/etc/sysctl.conf</code> 中，然后输入 <code>sysctl -p</code> 命令重新加载配置。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8328873ace462356389\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvm.nr_hugepages=126\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8328873ace462356389-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873ace462356389-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8328873ace462356389-1\"><span class=\"crayon-v\">vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nr_hugepages</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">126</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873ace462356389-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>注意我们这里多加了两个额外的页，因为我们希望在实际需要的页面数量之外多一些额外的空闲页。</p>\n<p>现在，内核已经配置好了，但是要让应用能够使用这些“大内存页”还需要提高内存的使用阀值。新的内存阀值应该为 126 个页 x 每个页 2 MB = 252 MB，也就是 258048 KB。</p>\n<p>你需要编辑 <code>/etc/security/limits.conf</code> 中的如下配置：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8328873ad2960402580\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsoft memlock 258048\r\nhard memlock 258048\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8328873ad2960402580-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8328873ad2960402580-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8328873ad2960402580-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8328873ad2960402580-1\"><span class=\"crayon-e\">soft </span><span class=\"crayon-i\">memlock</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">258048</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8328873ad2960402580-2\"><span class=\"crayon-e\">hard </span><span class=\"crayon-i\">memlock</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">258048</span></div><div class=\"crayon-line\" id=\"crayon-5ab8328873ad2960402580-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>某些情况下，这些设置是在指定应用的文件中配置的，比如 Oracle DB 就是在 <code>/etc/security/limits.d/99-grid-oracle-limits.conf</code> 中配置的。</p>\n<p>这就完成了！你可能还需要重启应用来让应用来使用这些新的巨大页。</p>\n<p>（LCTT 译注：此外原文有误，“透明大内存页”和“大内存页”不同，而且，在 Redhat 系统中，“大内存页” 不是默认启用的，而“透明大内存页”是启用的。因此这个段落删除了。）</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113782\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113782votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113782\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg", "fav_nums": 0, "title": "Linux 中的“大内存页”（hugepage）是个什么？", "comment_nums": 0, "tags": "IT技术,Linux"}/n{"create_date": "2018/03/12", "praise_nums": "1", "front_image_url": ["http://wx3.sinaimg.cn/mw690/63918611gy1fpaca90vycj218g0tmtek.jpg"], "url": "http://blog.jobbole.com/113741/", "url_object_id": "346c3258b4b9bfbca9483337a14be393", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/what-i-learned-from-doing-1000-code-reviews-fe28d4d11c71\">Steven Heidel</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>我看到有些建议不断重复出现，所以我决定整理一个清单，与诸位分享。</p>\n<p id=\"ec28\" class=\"graf graf--p graf-after--p\">这是我的 3（额外 +1）个最常见的代码审查建议。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpaca90vycj218g0tmtek.jpg\" width=\"690\" height=\"460\"></p>\n<h3 id=\"1d0b\" class=\"graf graf--p graf-after--figure\"><strong>建议1：出错时抛出异常</strong></h3>\n<p id=\"9787\" class=\"graf graf--p graf-after--p\">我见过的一个常见模式是：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e6261cc5095342927\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nList&lt;String&gt; getSearchResults(...) {\r\n  try {\r\n    List&lt;String&gt; results = // make REST call to search service\r\n    return results;\r\n  } catch (RemoteInvocationException e) {\r\n    return Collections.emptyList();\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cc5095342927-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cc5095342927-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cc5095342927-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cc5095342927-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cc5095342927-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cc5095342927-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cc5095342927-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cc5095342927-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e6261cc5095342927-1\"><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getSearchResults</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cc5095342927-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cc5095342927-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">results</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// make REST call to search service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cc5095342927-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cc5095342927-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">RemoteInvocationException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cc5095342927-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Collections</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">emptyList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cc5095342927-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cc5095342927-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这种模式实际上导致了我做的移动应用程序崩溃，我们当时使用的搜索后端开始抛出异常。而应用程序的 API 服务器中也有一些类似的代码。从应用程序的角度来看，它成功获取了 200 个响应，只是每个搜索请求返回的是空列表。</p>\n<p id=\"addb\" class=\"graf graf--p graf-after--p\">如果当时 API 直接抛出异常，那么我们的监控系统就会立即检测到并修复它。</p>\n<p id=\"de7a\" class=\"graf graf--p graf-after--p\">很多时候，当你捕获一个异常时，你会希望它返回一个空对象。Java 中的空对象包括 Optional.empty()、null 和空列表，而它们在 URL 解析中经常出现。如果 URL 不能从一个字符串中正确解析时，先不要返回 null，而是停下来问问自己：“为什么 URL 格式不正确？这不是我们应该在上游解决的数据问题吗？”</p>\n<p id=\"3b2d\" class=\"graf graf--p graf-after--p\">空对象不是解决此类问题的合适工具。<strong>如果有异常，你应该（及时）抛出它。</strong></p>\n<h3 id=\"9dac\" class=\"graf graf--p graf-after--p\"><strong>建议2：使用尽可能具体的类型</strong></h3>\n<p id=\"42d5\" class=\"graf graf--p graf-after--p\">这个建议基本上与<a class=\"markup--anchor markup--p-anchor\" href=\"http://wiki.c2.com/?StringlyTyped\" target=\"_blank\" rel=\"noopener\">字符串类型编程</a>相反。</p>\n<p id=\"11ce\" class=\"graf graf--p graf-after--p\">我经常看到类似这样的代码：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e6261ccf844097812\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvoid doOperation(String opType, Data data); \r\n// where opType is \"insert\", \"append\", or \"delete\", this should have clearly been an enum\r\n\r\nString fetchWebsite(String url);\r\n// where url is \"https://google.com\", this should have been an URN\r\n\r\nString parseId(Input input);\r\n// the return type is String but ids are actually Longs like \"6345789\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261ccf844097812-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261ccf844097812-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261ccf844097812-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261ccf844097812-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261ccf844097812-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261ccf844097812-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261ccf844097812-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261ccf844097812-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e6261ccf844097812-1\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">doOperation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opType</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Data </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261ccf844097812-2\"><span class=\"crayon-c\">// where opType is \"insert\", \"append\", or \"delete\", this should have clearly been an enum</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261ccf844097812-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261ccf844097812-4\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fetchWebsite</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261ccf844097812-5\"><span class=\"crayon-c\">// where url is \"https://google.com\", this should have been an URN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261ccf844097812-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ab81e6261ccf844097812-7\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseId</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Input </span><span class=\"crayon-v\">input</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261ccf844097812-8\"><span class=\"crayon-c\">// the return type is String but ids are actually Longs like \"6345789\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>尽可能具体的类型可以让你避免整个类的错误，这基本上是大家选择强类型语言（如 Java）的原因。</p>\n<p id=\"ebee\" class=\"graf graf--p graf-after--p\">所以现在的问题是：那些想要写强类型语言的程序员，最终是怎么写出糟糕的字符串类型的代码哪？答案是：因为外部世界不是强类型的。字符串通常来自许多不同的地方，比如：</p>\n<ul class=\"postList\">\n<li class=\"graf graf--li graf-after--li\">url 中的请求和路径参数</li>\n<li class=\"graf graf--li graf-after--li\">JSON</li>\n<li class=\"graf graf--li graf-after--li\">不支持枚举的数据库</li>\n<li class=\"graf graf--li graf-after--li\">写得很差的库</li>\n</ul>\n<p id=\"bce9\" class=\"graf graf--p graf-after--li\">这些情况下，你应该使用以下策略来避免这个问题：<strong>将字符串解析和序列化保持到程序边缘</strong>。这是一个例子：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e6261cd4498549938\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// Step 1: Take a query param representing a company name / member id pair and parse it\r\n// example: context=Pair(linkedin,456)\r\nPair&lt;String, Long&gt; companyMember = parseQueryParam(\"context\");\r\n// this should throw an exception if malformed\r\n\r\n// Step 2: Do all the stuff in your application\r\n// MOST if not all of your code should live in this area\r\n\r\n// Step 3: Convert the parameter back into a String at the very end if necessary\r\nString redirectLink = serializeQueryParam(\"context\");</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cd4498549938-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cd4498549938-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cd4498549938-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cd4498549938-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cd4498549938-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cd4498549938-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cd4498549938-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cd4498549938-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cd4498549938-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cd4498549938-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e6261cd4498549938-1\"><span class=\"crayon-c\">// Step 1: Take a query param representing a company name / member id pair and parse it</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cd4498549938-2\"><span class=\"crayon-c\">// example: context=Pair(linkedin,456)</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cd4498549938-3\"><span class=\"crayon-v\">Pair</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Long</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">companyMember</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseQueryParam</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"context\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cd4498549938-4\"><span class=\"crayon-c\">// this should throw an exception if malformed</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cd4498549938-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cd4498549938-6\"><span class=\"crayon-c\">// Step 2: Do all the stuff in your application</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cd4498549938-7\"><span class=\"crayon-c\">// MOST if not all of your code should live in this area</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cd4498549938-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cd4498549938-9\"><span class=\"crayon-c\">// Step 3: Convert the parameter back into a String at the very end if necessary</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cd4498549938-10\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redirectLink</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">serializeQueryParam</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"context\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>它带给我们许多好处：1、能够立刻发现格式不正确的数据；如果有任何问题，应用程序会提前显示并终止。2、一旦数据通过验证，你不必在整个应用程序中捕获解析异常。3、强类型使得签名具有更多信息，这样你就无需在每个方法上写 javadoc。</p>\n<h3 id=\"3981\" class=\"graf graf--p graf-after--p\"><strong>建议3：使用 Optionals 而不是 null</strong></h3>\n<p id=\"8e2f\" class=\"graf graf--p graf-after--p\"><code class=\"markup--code markup--p-code\">Optional</code>（可选）类是 Java 8 中最好的特性之一，它表示一个可以合理存在或不存在的实体。</p>\n<p id=\"d2f2\" class=\"graf graf--p graf-after--p\">问题时间：唯一用缩写来指代的异常是什么？答：NPE （Null Pointer Exception，空指针异常）。这是迄今为止 Java 中最常见的异常，被称为<a class=\"markup--anchor markup--p-anchor\" href=\"https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare\" target=\"_blank\" rel=\"noopener\">十亿美元的错误</a>。</p>\n<p id=\"2a55\" class=\"graf graf--p graf-after--p\"><code class=\"markup--code markup--p-code\">Optional</code> 允许你从程序中完全删除 NPE。但是，你必须正确地使用它。这里有一些关于如何使用 <code class=\"markup--code markup--p-code\">Optional</code> 的建议：</p>\n<ul class=\"postList\">\n<li id=\"aa71\" class=\"graf graf--li graf-after--p\">你不应该在任何时候随意调用 <code class=\"markup--code markup--li-code\">.get()</code>，而应仔细考虑 <code class=\"markup--code markup--li-code\">Optional</code> 不存在的情况，并给出合理的默认值。</li>\n<li id=\"b536\" class=\"graf graf--li graf-after--li\">如果你还没有一个合理的默认值，那么像 <code class=\"markup--code markup--li-code\">.map()</code> 和 <code class=\"markup--code markup--li-code\">.flatMap()</code> 这样的方法，可以让你晚点做这个决定。</li>\n<li id=\"c520\" class=\"graf graf--li graf-after--li\">如果外部库返回 <code class=\"markup--code markup--li-code\">null</code> 来表示空值，则立即使用 <code class=\"markup--code markup--li-code\">Optional.ofNullable()</code> 以封装它。相信我，以后你会感谢自己的。在程序内部，null 有往上“冒泡”的倾向，所以还是最好从源头上阻止它们。</li>\n<li id=\"4a95\" class=\"graf graf--li graf-after--li\">在返回类型的方法中使用 <code class=\"markup--code markup--li-code\">Optional</code>。这样做可以让你不用阅读 javadoc 就可以获知，值是否可能不存在。</li>\n</ul>\n<h3 id=\"573f\" class=\"graf graf--p graf-after--li\"><strong>额外建议：尽可能使用“Unlift”方法</strong></h3>\n<p id=\"1873\" class=\"graf graf--p graf-after--p\">你应该尽量避免类似的方法：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e6261cda714323626\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// AVOID:\r\nCompletableFuture&lt;T&gt; method(CompletableFuture&lt;S&gt; param);\r\n// PREFER: \r\nT method(S param);\r\n\r\n// AVOID:\r\nList&lt;T&gt; method(List&lt;S&gt; param);\r\n// PREFER:\r\nT method(S param);\r\n\r\n// AVOID: \r\nT method(A param1, B param2, Optional&lt;C&gt; param3);\r\n// PREFER:\r\nT method(A param1, B param2, C param3);\r\nT method(A param1, B param2);\r\n// This method is clearly doing two things, it should be two methods\r\n// The same is true for boolean parameters</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cda714323626-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cda714323626-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cda714323626-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cda714323626-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cda714323626-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cda714323626-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cda714323626-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e6261cda714323626-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e6261cda714323626-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-1\"><span class=\"crayon-c\">// AVOID:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cda714323626-2\"><span class=\"crayon-v\">CompletableFuture</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">CompletableFuture</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">S</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-3\"><span class=\"crayon-c\">// PREFER: </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cda714323626-4\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cda714323626-6\"><span class=\"crayon-c\">// AVOID:</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-7\"><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">S</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cda714323626-8\"><span class=\"crayon-c\">// PREFER:</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-9\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cda714323626-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-11\"><span class=\"crayon-c\">// AVOID: </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cda714323626-12\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Optional</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">C</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-13\"><span class=\"crayon-c\">// PREFER:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cda714323626-14\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-15\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e6261cda714323626-16\"><span class=\"crayon-c\">// This method is clearly doing two things, it should be two methods</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e6261cda714323626-17\"><span class=\"crayon-c\">// The same is true for boolean parameters</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>所有要避免的方法有什么共同点？他们都使用容器对象，比如 Optional，List 或 Task 作为方法的参数。当返回类型是同一类型的容器（即，一个参数的方法采用 Optional 并返回一个 Optional），情况会变得更糟糕。</p>\n<p id=\"3eb8\" class=\"graf graf--p graf-after--p\">为什么？</p>\n<p>相比 ① <code class=\"markup--code markup--p-code\">Promise&lt;A&gt; method(Promise&lt;B&gt; param)</code>，② <code class=\"markup--code markup--p-code\">A method(B param) </code>更具有灵活性。</p>\n<p>如果你有 <code class=\"markup--code markup--p-code\">Promise&lt;B&gt;</code>，那么你可以使用 ①，也可以通过  <code class=\"markup--code markup--p-code\">.map</code> 函数“提升（lifting）” （比如 <code class=\"markup--code markup--p-code\">promise.map(method)</code>）来使用 ②.</p>\n<p>但是，如果你只有 B，那么你可以很容易地使用 ②，却不能使用 ①，很明显，② 是一个更灵活的选择。</p>\n<p>我喜欢称之为“Unlift”，因为它与普通函数的实用方法“Lift”恰好相反。应用这些重写能使方法更灵活，调用更轻松。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113741\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113741votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113741\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            I'm OUT, never IN.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 50</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/72fd692cdd9ccd44d3da74f6eda1119635b48c27.jpg", "fav_nums": 0, "title": "我从 1000 份代码审查中学到了什么", "comment_nums": 0, "tags": "IT技术,Code Review,代码审查"}/n{"create_date": "2018/03/13", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4f255bd43f956c3db484a99d448b198e.jpg"], "url": "http://blog.jobbole.com/112048/", "url_object_id": "c8f7206fc12fb03862d494d19208fd22", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/huangyong/blog/1633257\">黄勇</a>   </div><p>社区中并不缺少有关软件工程师职业发展的文章，甚至可以说是泛滥。很多人都能在这个话题上说两句，三五年工作经验的编程老鸟也好，架构师也好，技术 VP 也好，CTO 也好，都有各自的看法与实践经验。没有哪一套方法是适用于所有人的，这一套软件工程师职业发展纲要，也不过是在你踽踽前行的路上，迷茫时可用来参考借鉴。你的核心竞争力，永远是你的自身实力。切记！</p>\n<h1 id=\"h1_0\">一、专业技能学习捷径</h1>\n<h2 id=\"h2_1\">1、爱上你的编码神器</h2>\n<p>众所周知，软件工程师要做的工作就是写代码，准确地说，你的目标应该是写出满足业务需求并且无法找出 Bug 的代码，而不是写一大堆没用的文字。既然你的任务是写出高质量的代码，那么你首先应该训练的就是打字速度，你需要掌握键盘盲打技能，甚至还要爱上你的“编码神器”，并做到将此工具的用法烂熟于心，闭上眼睛都能正确敲中你想要的快捷键。</p>\n<h2 id=\"h2_2\">2、熟悉底层技术原理</h2>\n<p>当你完全驾驭了计算机的输入设备以后，你需要进一步了解计算机的内部工作原理，不是让你把机器大卸八块，而是你需要全面了解计算机的组成结构与工作原理。如果你不是计算机科班出生也没关系，在网上买一本关于计算机组成原理的书自学即可。你无需做到精通，能全面了解即可，因为接下来你需要在编程的世界中，慢慢去体会计算机的工作感受，你就是计算机的管理者。</p>\n<h2 id=\"h2_3\">3、深入一门编程语言</h2>\n<p>好了，现在是时候学习一门编程语言了，最好的选择是 Java，为什么呢？原因很简单，因为市场需求量最大，我敢保证，你学 Java 肯定比学 PHP 更容易找到工作（希望 PHP 程序员们淡定一些，其实我始终认为 PHP 是世界上最好的编程语言）。当你在学习 Java 时，首先需要掌握它啰里吧嗦的编程语法，此时没有什么比写一个“Hello World”来得更爽快一些。随后你需要深刻理解的是 Java 的面向对象概念（每次我说到面向对象，总会被一些单身汉吐槽，其实我想说，对象是可以 new 出来的），这些概念看上去比较虚，但是它们却能撑起一个强大的软件架构。所以，在面向对象技术上面花再多功夫都不为过，因为它能训练我们对业务的抽象能力，就像当初我们学习数学一样，它能训练我们的逻辑思维能力。</p>\n<h2 id=\"h2_4\">4、选择一位对的老师</h2>\n<p>看书、看视频、看源码、看技术文档，其实这些都是较为低效的学习方法，掌握编程技能的捷径就是拜一位资深的程序员为师，你可以尊称他为“码神”，记得一定要把他伺候好，让他愿意传授一些编程技能给你，其实也就是一个微笑外加一顿小龙虾的事情，他就能被你征服。一定要看他写的代码，思考为什么他会这样写，一定要将你不理解的地方记录下来，并且在下班之前紧紧地抓住他，让他一次给你讲个够，此时你一定会有一种打通任督二脉的畅快之感。所谓“师傅领进门，修行在个人”，你需要比你师傅更加努力，甚至十倍于他人的付出，才能在编程之路上尝到甜头。此时你需要学习更加高深的武功，研究更加优秀的源码，实践更有挑战的项目，还需要花整块时间，系统地看技术文档以及技术参考书。假如你想成为架构师，不妨看看我所著的《架构探险》这本书，也许它会对你的专业技能有所帮助。</p>\n<h2 id=\"h2_5\">5、乐于分享你的技能</h2>\n<p>你最好要让自己变成一位豁达开朗之人，千万不要吝啬，一定要懂得分享你所学的专业技能。可以尝试做点自己的开源项目，并让这个开源项目变得更加开放，不妨结合开源，写点技术博客，并厚着脸皮给你身边的朋友阅读。这件事情一定要持之以恒，不要担心有人吐槽你，你肯定会被吐槽，那是因为大家在关注你，此时你需要更加努力，让自己变得足够专业。当你成为真正的“大神”时，就不会有人再吐槽你了，他们只会吐槽自己的技术不如你，此时你将得到的是无限的膜拜和称赞。相信我，这绝不是奇迹。在学习专业技能之路上，多一点自信，多一点勤奋，多一点思考，再争取一点机会，你就会成功。</p>\n<h1 id=\"h1_6\">二、不可或缺的软技能</h1>\n<h2 id=\"h2_7\">1、软技能 ≠ 务虚</h2>\n<p>如果将专业技能比喻为“硬技能”，那么在我们的职场中，与专业性无关的技能就可以归纳为“软技能”了。但每当我提到软技能时，难免会让人误解为这是“务虚”的一种功夫，我们虽然是“吃软饭的”（做软件开发的），但我们却十分讨厌虚伪。没错！我也很厌恶虚伪之人，尤其是在职场中遇到这样的人物，我从心底鄙视他们，但我从来不会和他们发生任何冲突，反而还能和他们愉快地共事，这种本领靠的就是软技能。</p>\n<p>软件工程师每天都在和机器打交道，机器是没有感情的，你告诉它是0，它一定不会认为是1。但我们与人打交道却不一样，你告诉他是真，他却可能认为是假。与人打交道，正是软件工程师们最为欠缺的方面，有些软件工程师甚至害怕与人交流，害怕在公开场合讲话，害怕抛头露面，害怕做一些组织性的工作。如果你也有以上这些心里负担，那么恭喜你！因为你即将从本文中找到克服这些困难的灵丹妙药，至少我希望是这样。</p>\n<p>需要强调的是，软技能是一种职场必备的核心技能，我敢直言，如果缺乏这方面的技能，你的职业生涯将会变得非常糟糕。软技能包括的方面非常广泛，沟通、协调、组织、气场这些都是最基本的软技能，甚至情商也是一种软技能，会不会讲话，听不听得明白，这些都是软技能。那么我们不妨先从沟通这项软技能开始吧，因为我认为他是软件工程师最重要的软技能之一。</p>\n<h2 id=\"h2_8\">2、口语流利 ≠ 会沟通</h2>\n<p>很多人都容易将沟通理解为讲话，说一个人语言很流利，很会讲话，口若悬河，夸夸其谈，其实并非他的沟通能力很强。我认为，沟通可以理解为两方面，即“沟”和“通”。“沟”指的是你将心中所想很清晰地表达出来给对方听，考验的是你的表达能力；“通”指的是让你确信对方是否真明白你所表达的意思，考验的是你的倾听能力。所以，我们很多时候都是在“沟”，往往忽略了“通”，从而形成了“沟而不通”的情况，因此，现在全世界人民都在提倡如何“有效沟通”。还是用一个示例来说话吧。</p>\n<p>当领导交给你一项棘手的工作，但你不知道如何开始进行这项工作，此时你应该如何应对当前的挑战呢？绝大多数人会硬着头皮去做，他们希望通过自己的努力，可以顺利完成任务，但结果往往却无法让领导满意。少数人会主动向领导咨询，以寻求领导对自己的帮助。此时应该如何与领导对话呢？似乎并非很多人都清楚。下面这段话是我的套路，仅供参考。</p>\n<blockquote><p>我：勇哥（他是我的领导），最近我遇到了一点麻烦的事情，想听听您的看法（勾起领导的兴趣，让他认真听我说下去，记得一定要说“您”，而不是“你”）。</p>\n<p>领导：哦？说来听听（证明领导此时不忙，他有时间让我占用，如果他此时很忙，你应该能感受出来的）。</p>\n<p>我：感谢您对我的信任，昨天您交给我一项任务，回到家我一直都在想这项任务，我在想……（一定要对领导表示感激，是他给了我这次锻炼自己的机会，并强调我是“回到家”都在思考，而不是只在在公司里思考，道理你懂的）</p>\n<p>领导：可能是我没说清楚，你把这项任务想复杂了，其实……（可见这是一位 nice 的领导，跟着他，你能学到很多东西）</p>\n<p>我：我还想再清楚一下，您期待这项工作的结果是怎样的？（一定要明确领导想要的结果，他只会为结果买单）</p>\n<p>领导：我希望……（领导娓娓道来，此处省略1万字，你千万不要打断领导的讲话，他讲累了自然就会停，你只需要认真听他怎么讲）</p>\n<p>我：好的，我明白了，您希望我……（一定要学会复述领导讲过的话，而且要用自己的理解来表达，不要当复读机）</p>\n<p>领导：没错，就是这样。（领导表示认可了，此时你应该表示给领导一个微笑，让他感到欣慰）</p>\n<p>我：感谢勇哥！如果我在执行过程中遇到问题，可以再向您请教吗？（一定要感谢，而且要表现出虚心向领导请教，为下一次求救做好准备）</p>\n<p>领导：当然，随时交流。（你真心拿他当领导，他才会无条件帮助你，你不懂得用好这位领导，那是你自己的损失）</p></blockquote>\n<p>沟通是不是很有趣？其实沟通是一门学问，我们花一辈子时间都在学习，都在改进自己的沟通方式，目的仅为愉快地和身边的人一起“玩耍”，让此生感到愉悦。</p>\n<p>当你已经掌握了必备的专业技能，也具备了让你脱颖而出的软技能，那么接下来你将思考的是自己该走那条路了，继续做软件工程师，还是做软件工程师的 leader？下面这段话将告诉你答案。</p>\n<h1 id=\"h1_9\">三、正确制定职业路线</h1>\n<h2 id=\"h2_10\">1、给自己提几个问题</h2>\n<p>首先要澄清的是：我并非职业导师，更不是人生教父，所有的路都由你自己选择，我的责任是告诉你，我认为行之有效的方法。</p>\n<p>当你正走在职场的十字路口徘徊，思考走技术，还是走管理？我的答案只有一个：根据你自己的优势来决定。合理利用好自己的优势，会让自己走的更加顺畅，让自己无怨无悔。还是举一个例子来说明吧。</p>\n<p>前段时间有位朋友在微信上私聊我，他也遇到了这个问题，继续做技术，还是转管理？我当时是这样问他的，但我希望你可以用这样的方式来问自己。</p>\n<blockquote><p>我：你工作多久了？</p>\n<p>朋友：时间不长，写了10年的代码。</p>\n<p>我：那相当资深啊，现在还对写代码有激情吗？</p>\n<p>朋友：喜欢写，周末有时都会宅在家里写。</p>\n<p>我：那你还在纠结什么呢？</p>\n<p>朋友：我都工作10年了，身边的人要么当 CTO，要么做总监，自己却还在撸代码，我现在到底该不该转管理？</p>\n<p>我：你为什么会考虑转管理？说说你在管理上的优势吧。</p>\n<p>朋友：我觉得自己对技术有一定深度，可以帮助团队解决一些技术难题。</p>\n<p>我：如果你团队中有位小伙伴遇到一个很棘手的技术问题，没辙了，你会做些什么？</p>\n<p>朋友：撸起袖子，就地帮他解决掉。</p>\n<p>我：建议你走技术专家路线，这条路也许更加适合你。</p>\n<p>朋友：……</p></blockquote>\n<h2 id=\"h2_11\">2、转管理之前，先理解管理</h2>\n<p>当我们在纠结是否应该转管理时，不妨首先理解一下什么是管理？以及什么是管理者？只有当我们正确理解了这些概念以后，再来思考自己是否具备这样的特征，才能顺利帮助自己转型。</p>\n<p>管理（management）是协调和监督他人的工作，从而使他人的工作可以有效率且有成效地完成。效率（efficiency）指的是以尽可能少的投入，以获得尽可能多的产出，效率常常被说成“正确地做事”，即不浪费资源。成效（effectiveness）常常被称为“做正确的事”，即做那些可以实现目标的工作活动。管理者（manager）就是完成所有管理工作，并使组织目标能够实现的人。管理者的工作包括计划（planning）、组织（organizing）、领导（leading）和控制（controlling）四种职能。</p>\n<p>以上都是管理学告诉我们的知识，如果你想成为一名管理者，那么你必须首先正确理解这些概念的真实含义，才能完全驾驭管理者的岗位，否则你会从管理岗位上摔下来，自己一定伤得不轻。</p>\n<p>如果你想成为一名优秀的管理者，那么你需要做些什么呢？</p>\n<ul>\n<li>亲自且专业地给团队激励。</li>\n<li>激励团队完成你无法独立完成的任务。</li>\n<li>对问题提供指导和指引。</li>\n<li>对团队的表现给予反馈。</li>\n<li>帮助团队改善绩效。</li>\n<li>使团队对组织的改变知情。</li>\n<li>改善团队小伙伴们的生活。</li>\n</ul>\n<p>如果团队和你共事过，那么团队应该觉得他们是幸运的，因为你能够让他们更加愉快和高效地工作。</p>\n<h1 id=\"h1_12\">写在最后</h1>\n<p>不论选择技术还是管理，在任何时候都不要放弃你的硬技能，因为它是你的“生存之本”，同时你也需要具备强大的软技能，因为它是你的“发展之源”。</p>\n<p>学习硬技能其实是有捷径的，你无需一味地学习这些知识点，更多的其实是与人交流以及加以应用。软技能其实是可以训练的，你只需抓住一切可以抓住的机会，有意识地加以训练和反思，你就能悟出很多宝贵的经验。软件开发是一门艺术，你需要能够静得下心，不断地优化和雕琢你的作品，因此你需要具备工匠精神。如果你想成为一名工匠领袖，那么你就应该比他人思考得更多、更高、更深、更全面，你需要更多的软技能。你只有认识到自己的优势，才能正确地选择自己的职业路线。</p>\n<p>祝你成功！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112048\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112048votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112048\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d102994dcc342e0686843d89a7518432502d5ff3.jpg", "fav_nums": 3, "title": "程序员如何规划职业路线？", "comment_nums": 1, "tags": "职场, 1 评论 ,程序员,职场"}/n{"create_date": "2018/03/19", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/07/15cdc9eaec6ba9ac858b0eaebfb6b949.jpg"], "url": "http://blog.jobbole.com/112125/", "url_object_id": "c04253a00ce7d51d704df4838a462dc1", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://kimix.name/%E5%B7%A5%E7%A8%8B%E5%B8%AB%E6%80%9D%E7%B6%AD%EF%BC%8C%E5%81%9A%E4%B8%8D%E5%87%BA%E5%A5%BD%E7%94%A2%E5%93%81%EF%BC%9F/\">kimix</a>   </div><p>这不是一个鸡汤文，也不是警世文，这文章没什么结论和重点，你不会从这篇文章中获得什么领悟。</p>\n<p>恭喜你，你选择继续往下看，代表你对这标题也有一定程度的好奇，或许你也有同样的疑惑？</p>\n<p>「你的想法太工程师了，不适用在「一般」用户上，怎么可能用一般用户的角度去思考产品呢？」会这样说可能是你就是从事市场或和技术半毛关系都没有的岗位上。</p>\n<p>我觉得这个指控实在很莫名其妙，农夫讲出关于种树的话，渔夫讲出关于捞鱼的话，本该是天经地义的事，然后现在我们要进森林开垦，凭什么渔夫说的就是道理，农夫说的就是歪理呢。</p>\n<p>况且重点还是，最后要操刀的是农夫啊！</p>\n<p>世间上的事，都不是完全都是两极化的对与错，一件事通常面向都会超过一个，就取决于那是站在那一面观看，我要说的正是，软件工程师如何设计好产品。</p>\n<p>马云说过一句差不多这样的话，他说：他就是 QA，他不会用的产品，大概就不是什么好产品，因为大部分人都和他一样，是一个不懂技术的人。</p>\n<p>就单凭这句话，很多人就会抛开技术思维，抛开一切，就只想自己要做的「大方向」就好，那是当然的，做为一个领导，作为一艘船的导航，确实需要一个明确的方向，大家就尽力前进。但前进的动力来自哪里呢？你可以知道人家背后有多少水手不断研究划船的方法，才可以说出这句那么铿锵有力的话。</p>\n<p>「我考第一名，我从来不念书！」</p>\n<p>马云那番话字面上理解，那个思维是成立的，但事实上，越是简单的产品，RD 就必须花更多的时间和精力去思考，如果做出「简单」而产品的「直觉和简单」仅仅只是技术演进的结果罢了，千万不要忽略过程。</p>\n<p>我只想要飞，就往断崖跳，就肯定会死的。想要飞的心情我理解，但我们能不能坐下来谈谈如何办到「飞」这回事呢？</p>\n<p>而越简单的东西，越难做出来。</p>\n<p>有一个箱子，里面很冷，食物不会坏；一个箱子，里面有画面，哎！箱子好占空间，做到跟墙一样薄行不行？我想要一个放在口袋的电脑，看到的脸就开锁，啊，要确保一定会开喔，不要让我 demo 的时候开不了。</p>\n<p>概念谁都会说，根本不需要花很多时间在这个地方上。</p>\n<p>一个好产品，重点是要解决问题，是不是废话？是。</p>\n<p>那么要解决问题，要靠技术？还是靠想法？…</p>\n<p>你开始质疑自己了吧，你没有马上选技术，或者你选了想法？</p>\n<p>因为一般人是不会有这个认知的。你不用怀疑，好产品解决问题的重点，就是技术。不是想法。这两者有什么区别？会讲不会做，就叫做想法；会讲也会做，那是技术。但产品人员最爱放在嘴巴的一句话就是「技术不难，可以做得出来」、「技术可以办到」大部分的概念都是来自于别家产品，至于如何实现，还是一种跟网恋一样的概念，还没见过本人，但是照片看起来还不错。</p>\n<p>时至今日要找出，只要好点子，就有好活路的故事太少了，技术突破不了，就是一个「和别人差不多」的东西。既然是差不多，就没有必要多一个，面对消费者，你要怎么说服人家用你家的产品呢？</p>\n<p>我写了一大堆都是在靠北，没什么重点，那我先讲一个重点。</p>\n<p>「讲 HOW 不要讲 WHAT 和 WHY」</p>\n<p>一个组织要做什么事，应该不难决定，那就是一个决定。</p>\n<p>试想想，最近我有个朋友在想开餐厅的事，我就默默的观察，他会如何思考开餐厅的流程。</p>\n<p>他从菜单一路讲到店面，从行销和定位，说到 SWOT 和五力分析。都还没说到，如何做饭这个点上。虽然只是比喻，但是你可以想像餐厅本身最关键的除了价格，就是味道，好吃！最直接的竞争力，就是要</p>\n<p>「HOW 做到很好吃」一个点就好。</p>\n<p>而 HOW 的精髓，就是技术（技巧），做菜需要技巧；写程序也需要技巧，如何用什么工具解决什么问题（这是重点，我只是没有特别强调）是很重要的一个概念。</p>\n<p>就跟为什么这个控肉饭那么好吃，它是怎么办到的？！靠，那就是靠技术啊，每天做研究啊，研究又试做啊，然后失败又再来啊，不然你以为咧。</p>\n<p>至于说，技术本身是没有意义的，除非它用来解决问题。</p>\n<p>那就是一个重点了，要讲出问题在哪里（WHAT），和为什么会发生（WHY），即便这些很有可能都是在猜的，要讲出几个点那也不是一件难的差事，只差你愿不愿意面对而已，因为就算你说错了，也没有什么证据证明你是错的，你顶多只能怀疑，这个家伙在胡说。</p>\n<p>技术本身是没有意义的，就让我想起一个名人说的话，钱本身是没有意义的，除非你利用它！说到我帐户有几万千还没开始「利用」一样。那个重点不是这句话，重点是我没有钱啊！</p>\n<p>技术本身有没有价值，我不好说，但重点是，我们要先研究出技术啊！</p>\n<p>而很多时候，我们只需要一个菜单，就那么简单。但是可怕的事还不是没有菜单，而是有菜单还有一叠厚厚的明细，随着不懂做菜的人进厨房，然后还帮你为每个做菜步骤列名时间和顺序，然后当你仔细一看，那个根本不是做菜步骤，是上菜和吃饭的步骤，里面写的跟做菜一点屁关系都没有。</p>\n<p>这群人根本不在乎怎么做菜啊。</p>\n<p>但不要误会，半点也没有怪他们「为何不关心」做菜这事上。</p>\n<p>因为很多时候，甚至极大部分时候，工程师也是不关心如何「上菜」的，也不关心味道如何，只要时间内上菜，老板没有埋怨，客户没有中毒死，更也别说口碑好不好，有的厨师本来就是抱着能吃就好的心情做菜，竟然吃不死，就是好料理啦。</p>\n<p>但这主题是说「好产品」就不是能吃就好的东西了，要对味道和整个用餐过程都很有要求。</p>\n<p>就算不是五星，也要老板亲切啊，服务态度 UX 要好，UX 不是一个人的工作，UX 是一个团队的工作，一个集体带来的效益。大部分团队就是设计出图，PM 画 flow，RD 写 code；就跟打传说有人坦克，有人输出，有人牵制，但如果要胜出，就可能互相帮打，坦克输出会补刀，输出火力也要帮忙牵制，但是如果规定了坦克就只能挨打，牵制就只能在那边躲起来发功，那就死定了。</p>\n<p>分工的结果就如参加一个比赛，的确是顺利的把比赛结束了，但也别想说有什么惊喜的表现。</p>\n<p>写程序的人就会用工具了，尤其是前端，现在光是设一个开发环境，就用了一堆东西，有些太久没有用它还更新改版了，有天有个朋友请我帮忙做个事，我就拿着笔电狂 Key，滴滴答答的，一个多小时之后，我就「yeah」喊了一声，他就问「你弄好咯，感谢啦」</p>\n<p>我说「还没，但可以开始弄了！yeah」</p>\n<p>但我以一个消费者的立场，做出产品，至于好不好，是消费者自己的看法。千万不要一直和我说你东西有多好吃，我自己有嘴巴好嘛！如果不好吃，你和我说一百遍也不会好吃啊。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112125\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112125votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112125\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d6573fc92df4aa98014ce9dc55320411b7b5bf1d.jpg", "fav_nums": 0, "title": "工程师思维，做不出好产品？", "comment_nums": 0, "tags": "职场,工程师"}/n{"create_date": "2018/03/14", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "url": "http://blog.jobbole.com/113771/", "url_object_id": "1c7d5802b140adefb9805592b6a7e332", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/12/ipv6-auto-configuration-linux\">Carla Schroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9434-1.html\">Linux中国/qhwdw</a>   </div><p>在 <a href=\"https://www.linux.com/learn/intro-to-linux/2017/11/testing-ipv6-networking-kvm-part-1\">KVM 中测试 IPv6 网络：第 1 部分</a> 一文中，我们学习了关于唯一本地地址unique local addresses（ULA）的相关内容。在本文中，我们将学习如何为 ULA 自动配置 IP 地址。</p>\n<h3 id=\"toc_1\">何时使用唯一本地地址</h3>\n<p>唯一本地地址unique local addresses（ULA）使用 <code>fd00::/8</code> 地址块，它类似于我们常用的 IPv4 的私有地址：<code>10.0.0.0/8</code>、<code>172.16.0.0/12</code>、以及 <code>192.168.0.0/16</code>。但它们并不能直接替换。IPv4 的私有地址分类和网络地址转换（NAT）功能是为了缓解 IPv4 地址短缺的问题，这是个明智的解决方案，它延缓了本该被替换的 IPv4 的生命周期。IPv6 也支持 NAT，但是我想不出使用它的理由。IPv6 的地址数量远远大于 IPv4；它是不一样的，因此需要做不一样的事情。</p>\n<p>那么，ULA 存在的意义是什么呢？尤其是在我们已经有了本地链路地址link-local addresses（<code>fe80::/10</code>）时，到底需不需要我们去配置它们呢？它们之间（LCTT 译注：指的是唯一本地地址和本地链路地址）有两个重要的区别。一是，本地链路地址是不可路由的，因此，你不能跨子网使用它。二是，ULA 是你自己管理的；你可以自己选择它用于子网的地址范围，并且它们是可路由的。</p>\n<p>使用 ULA 的另一个好处是，如果你只是在局域网中“混日子”的话，你不需要为它们分配全局单播 IPv6 地址。当然了，如果你的 ISP 已经为你分配了 IPv6 的全局单播地址global unicast addresses，就不需要使用 ULA 了。你也可以在同一个网络中混合使用全局单播地址和 ULA，但是，我想不出这样使用的一个好理由，并且要一定确保你不使用网络地址转换（NAT）以使 ULA 可公共访问。在我看来，这是很愚蠢的行为。</p>\n<p>ULA 是仅为私有网络使用的，并且应该阻止其流出你的网络，不允许进入因特网。这很简单，在你的边界设备上只要阻止整个 <code>fd00::/8</code> 范围的 IPv6 地址即可实现。</p>\n<h3 id=\"toc_2\">地址自动配置</h3>\n<p>ULA 不像本地链路地址那样自动配置的，但是使用 radvd 设置自动配置是非常容易的，radva 是路由器公告守护程序。在你开始之前，运行 <code>ifconfig</code> 或者 <code>ip addr show</code> 去查看你现有的 IP 地址。</p>\n<p>在生产系统上使用时，你应该将 radvd 安装在一台单独的路由器上，如果只是测试使用，你可以将它安装在你的网络中的任意 Linux PC 上。在我的小型 KVM 测试实验室中，我使用 <code>apt-get install radvd</code> 命令把它安装在 Ubuntu 上。安装完成之后，我先不启动它，因为它还没有配置文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e628c757387290632\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo systemctl status radvd\r\n● radvd.service - LSB: Router Advertising Daemon\r\n   Loaded: loaded (/etc/init.d/radvd; bad; vendor preset: enabled)\r\n   Active: active (exited) since Mon 2017-12-11 20:08:25 PST; 4min 59s ago\r\n     Docs: man:systemd-sysv-generator(8)\r\n\r\nDec 11 20:08:25 ubunut1 systemd[1]: Starting LSB: Router Advertising Daemon...\r\nDec 11 20:08:25 ubunut1 radvd[3541]: Starting radvd:\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * /etc/radvd.conf does not exist or is empty.\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * See /usr/share/doc/radvd/README.Debian\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * radvd will *not* be started.\r\nDec 11 20:08:25 ubunut1 systemd[1]: Started LSB: Router Advertising Daemon.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c757387290632-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c757387290632-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c757387290632-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c757387290632-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c757387290632-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c757387290632-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c757387290632-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c757387290632-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c757387290632-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c757387290632-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c757387290632-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c757387290632-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c757387290632-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e628c757387290632-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">status </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c757387290632-2\">●<span class=\"crayon-h\"> </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">service</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-e\">Daemon</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c757387290632-3\"><span class=\"crayon-e\">   </span><span class=\"crayon-v\">Loaded</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loaded</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bad</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vendor </span><span class=\"crayon-v\">preset</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">enabled</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c757387290632-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Active</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">active</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">exited</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">since </span><span class=\"crayon-i\">Mon</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PST</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4min</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">59s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ago</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c757387290632-5\"><span class=\"crayon-e\">     </span><span class=\"crayon-v\">Docs</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">man</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sysv</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">generator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c757387290632-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ab81e628c757387290632-7\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-v\">Daemon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c757387290632-8\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c757387290632-9\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span><span class=\"crayon-e\">does </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exist </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">empty</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c757387290632-10\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">See</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">doc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Debian</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c757387290632-11\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">radvd </span><span class=\"crayon-e \">will *</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">be </span><span class=\"crayon-v\">started</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c757387290632-12\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-v\">Daemon</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c757387290632-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0053 seconds] -->\r\n<p>这些所有的消息有点让人困惑，实际上 radvd 并没有运行，你可以使用经典命令 <code>ps | grep radvd</code> 来验证这一点。因此，我们现在需要去创建 <code>/etc/radvd.conf</code> 文件。拷贝这个示例，将第一行的网络接口名替换成你自己的接口名字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e628c761754695630\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface ens7 {\r\n  AdvSendAdvert on;\r\n  MinRtrAdvInterval 3;\r\n  MaxRtrAdvInterval 10;\r\n  prefix fd7d:844d:3e17:f3ae::/64\r\n        {\r\n                AdvOnLink on;\r\n                AdvAutonomous on;\r\n        };\r\n\r\n};\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c761754695630-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c761754695630-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c761754695630-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c761754695630-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c761754695630-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c761754695630-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c761754695630-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c761754695630-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c761754695630-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c761754695630-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c761754695630-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c761754695630-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e628c761754695630-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ens7</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c761754695630-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">AdvSendAdvert </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c761754695630-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">MinRtrAdvInterval</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c761754695630-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">MaxRtrAdvInterval</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c761754695630-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">prefix </span><span class=\"crayon-v\">fd7d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">844d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3e17</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f3ae</span><span class=\"crayon-o\">::</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c761754695630-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c761754695630-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">AdvOnLink </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c761754695630-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">AdvAutonomous </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c761754695630-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c761754695630-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ab81e628c761754695630-11\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c761754695630-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>前缀（<code>prefix</code>）定义了你的网络地址，它是地址的前 64 位。前两个字符必须是 <code>fd</code>，前缀接下来的剩余部分你自己定义它，最后的 64 位留空，因为 radvd 将去分配最后的 64 位。前缀后面的 16 位用来定义子网，剩余的地址定义为主机地址。你的子网必须总是 <code>/64</code>。RFC 4193 要求地址必须随机生成；查看 <a href=\"https://www.linux.com/learn/intro-to-linux/2017/11/testing-ipv6-networking-kvm-part-1\">在 KVM 中测试 IPv6 Networking：第 1 部分</a> 学习创建和管理 ULAs 的更多知识。</p>\n<h3 id=\"toc_3\">IPv6 转发</h3>\n<p>IPv6 转发必须要启用。下面的命令去启用它，重启后生效：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e628c765158194500\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo sysctl -w net.ipv6.conf.all.forwarding=1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c765158194500-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c765158194500-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e628c765158194500-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">sysctl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ipv6</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">all</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">forwarding</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c765158194500-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>取消注释或者添加如下的行到 <code>/etc/sysctl.conf</code> 文件中，以使它永久生效：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e628c769934431479\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnet.ipv6.conf.all.forwarding = 1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c769934431479-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c769934431479-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e628c769934431479-1\"><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ipv6</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">all</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">forwarding</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c769934431479-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>启动 radvd 守护程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e628c76c798322091\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo systemctl stop radvd\r\n$ sudo systemctl start radvd\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c76c798322091-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c76c798322091-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c76c798322091-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e628c76c798322091-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">stop </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c76c798322091-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">start </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c76c798322091-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这个示例在我的 Ubuntu 测试系统中遇到了一个怪事；radvd 总是停止，我查看它的状态却没有任何问题，做任何改变之后都需要重新启动 radvd。</p>\n<p>启动成功后没有任何输出，并且失败也是如此，因此，需要运行 <code>sudo systemctl status radvd</code> 去查看它的运行状态。如果有错误，<code>systemctl</code> 会告诉你。一般常见的错误都是 <code>/etc/radvd.conf</code> 中的语法错误。</p>\n<p>在 Twitter 上抱怨了上述问题之后，我学到了一件很酷的技巧：当你运行 <code>journalctl -xe --no-pager</code> 去调试 <code>systemctl</code> 错误时，你的输出会被换行，然后，你就可以看到错误信息。</p>\n<p>现在检查你的主机，查看它们自动分配的新地址：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e628c770090251381\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ifconfig\r\nens7      Link encap:Ethernet  HWaddr 52:54:00:57:71:50  \r\n          [...]\r\n          inet6 addr: fd7d:844d:3e17:f3ae:9808:98d5:bea9:14d9/64 Scope:Global\r\n          [...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c770090251381-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c770090251381-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c770090251381-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c770090251381-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e628c770090251381-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e628c770090251381-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e628c770090251381-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ifconfig</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c770090251381-2\"><span class=\"crayon-e\">ens7      </span><span class=\"crayon-e\">Link </span><span class=\"crayon-v\">encap</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">Ethernet  </span><span class=\"crayon-i\">HWaddr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">54</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">57</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">71</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c770090251381-3\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c770090251381-4\"><span class=\"crayon-h\">          </span><span class=\"crayon-e\">inet6 </span><span class=\"crayon-v\">addr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd7d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">844d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3e17</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f3ae</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9808</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">98d5</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">bea9</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">14d9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Scope</span><span class=\"crayon-o\">:</span><span class=\"crayon-m\">Global</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e628c770090251381-5\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e628c770090251381-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>本文到此为止，下周继续学习如何为 ULA 管理 DNS，这样你就可以使用一个合适的主机名来代替这些长长的 IPv6 地址。</p>\n<p>通过来自 Linux 基金会和 edX 的 <a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">“Linux 入门”</a> 免费课程学习更多 Linux 的知识。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113771\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113771votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113771\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg", "fav_nums": 2, "title": "在 Linux 中自动配置 IPv6 地址", "comment_nums": 1, "tags": "IT技术, 1 评论 ,IPv6,Linux"}/n{"create_date": "2018/03/13", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "url": "http://blog.jobbole.com/113768/", "url_object_id": "20d0b326ed26dff7f3c5708bdf46c1a5", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/1/analyzing-linux-boot-process\">Alison Chaiken</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9437-1.html\">Linux中国/jessie-pang</a>   </div><blockquote><p>理解运转良好的系统对于处理不可避免的故障是最好的准备。</p></blockquote>\n<p>关于开源软件最古老的笑话是：“代码是自具文档化的self-documenting”。经验表明，阅读源代码就像听天气预报一样：明智的人依然出门会看看室外的天气。本文讲述了如何运用调试工具来观察和分析 Linux 系统的启动。分析一个功能正常的系统启动过程，有助于用户和开发人员应对不可避免的故障。</p>\n<p>从某些方面看，启动过程非常简单。内核在单核上以单线程和同步状态启动，似乎可以理解。但内核本身是如何启动的呢？<a href=\"https://en.wikipedia.org/wiki/Initial_ramdisk\">initrd（initial ramdisk）</a> 和引导程序bootloader具有哪些功能？还有，为什么以太网端口上的 LED 灯是常亮的呢？</p>\n<p>请继续阅读寻找答案。在 GitHub 上也提供了 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code\">介绍演示和练习的代码</a>。</p>\n<h3 id=\"toc_1\">启动的开始：OFF 状态</h3>\n<h4 id=\"toc_2\">局域网唤醒Wake-on-LAN</h4>\n<p>OFF 状态表示系统没有上电，没错吧？表面简单，其实不然。例如，如果系统启用了局域网唤醒机制（WOL），以太网指示灯将亮起。通过以下命令来检查是否是这种情况：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ee42dfd1095563513\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sudo ethtool &lt;interface name&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfd1095563513-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfd1095563513-1\"><span class=\"crayon-p\"># sudo ethtool &lt;interface name&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>其中 &lt;interface name&gt;<code></code> 是网络接口的名字，比如 <code>eth0</code>。（<code>ethtool</code> 可以在同名的 Linux 软件包中找到。）如果输出中的 <code>Wake-on</code> 显示 <code>g</code>，则远程主机可以通过发送 <a href=\"https://en.wikipedia.org/wiki/Wake-on-LAN\">魔法数据包MagicPacket</a> 来启动系统。如果您无意远程唤醒系统，也不希望其他人这样做，请在系统 BIOS 菜单中将 WOL 关闭，或者用以下方式：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ee42dfda363088188\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sudo ethtool -s &lt;interface name&gt; wol d\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfda363088188-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfda363088188-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfda363088188-1\"><span class=\"crayon-p\"># sudo ethtool -s &lt;interface name&gt; wol d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfda363088188-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0002 seconds] -->\r\n<p>响应魔法数据包的处理器可能是网络接口的一部分，也可能是 <a href=\"https://lwn.net/Articles/630778/\">底板管理控制器Baseboard Management Controller</a>（BMC）。</p>\n<h4 id=\"toc_3\">英特尔管理引擎、平台控制器单元和 Minix</h4>\n<p>BMC 不是唯一的在系统关闭时仍在监听的微控制器（MCU）。x86_64 系统还包含了用于远程管理系统的英特尔管理引擎（IME）软件套件。从服务器到笔记本电脑，各种各样的设备都包含了这项技术，它开启了如 KVM 远程控制和英特尔功能许可服务等 <a href=\"https://www.youtube.com/watch?v=iffTJ1vPCSo&amp;amp;amp;amp;amp;amp;index=65&amp;amp;amp;amp;amp;amp;list=PLbzoR-pLrL6pISWAq-1cXP4_UZAyRtesk\">功能</a>。根据 <a href=\"https://www.intel.com/content/www/us/en/support/articles/000025619/software.html\">Intel 自己的检测工具</a>，<a href=\"https://security-center.intel.com/advisory.aspx?intelid=INTEL-SA-00086&amp;amp;amp;amp;amp;amp;languageid=en-fr\">IME 存在尚未修补的漏洞</a>。坏消息是，要禁用 IME 很难。Trammell Hudson 发起了一个 <a href=\"https://github.com/corna/me_cleaner\">me_cleaner 项目</a>，它可以清除一些相对恶劣的 IME 组件，比如嵌入式 Web 服务器，但也可能会影响运行它的系统。</p>\n<p>IME 固件和系统管理模式System Management Mode（SMM）软件是 <a href=\"https://lwn.net/Articles/738649/\">基于 Minix 操作系统</a> 的，并运行在单独的平台控制器单元Platform Controller Hub上（LCTT 译注：即南桥芯片），而不是主 CPU 上。然后，SMM 启动位于主处理器上的通用可扩展固件接口Universal Extensible Firmware Interface（UEFI）软件，相关内容 <a href=\"https://lwn.net/Articles/699551/\">已被提及多次</a>。Google 的 Coreboot 小组已经启动了一个雄心勃勃的 <a href=\"https://trmm.net/NERF\">非扩展性缩减版固件Non-Extensible Reduced Firmware</a>（NERF）项目，其目的不仅是要取代 UEFI，还要取代早期的 Linux 用户空间组件，如 systemd。在我们等待这些新成果的同时，Linux 用户现在就可以从 Purism、System76 或 Dell 等处购买 <a href=\"https://www.extremetech.com/computing/259879-dell-now-shipping-laptops-intels-management-engine-disabled\">禁用了 IME</a> 的笔记本电脑，另外 <a href=\"https://lwn.net/Articles/733837/\">带有 ARM 64 位处理器笔记本电脑</a> 还是值得期待的。</p>\n<h4 id=\"toc_4\">引导程序</h4>\n<p>除了启动那些问题不断的间谍软件外，早期引导固件还有什么功能呢？引导程序的作用是为新上电的处理器提供通用操作系统（如 Linux）所需的资源。在开机时，不但没有虚拟内存，在控制器启动之前连 DRAM 也没有。然后，引导程序打开电源，并扫描总线和接口，以定位内核镜像和根文件系统的位置。U-Boot 和 GRUB 等常见的引导程序支持 USB、PCI 和 NFS 等接口，以及更多的嵌入式专用设备，如 NOR 闪存和 NAND 闪存。引导程序还与 <a href=\"https://linuxplumbersconf.org/2017/ocw/events/LPC2017/tracks/639\">可信平台模块Trusted Platform Module</a>（TPM）等硬件安全设备进行交互，在启动最开始建立信任链。</p>\n<p><img class=\"aligncenter\" title=\"Running the U-boot bootloader\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a1db74d1a0f049a3aabdb89e5079bbce.png\" alt=\"Running the U-boot bootloader\"></p>\n<p style=\"text-align: center\"><em>在构建主机上的沙盒中运行 U-boot 引导程序。</em></p>\n<p>包括树莓派、任天堂设备、汽车主板和 Chromebook 在内的系统都支持广泛使用的开源引导程序 <a href=\"http://www.denx.de/wiki/DULG/Manual\">U-Boot</a>。它没有系统日志，当发生问题时，甚至没有任何控制台输出。为了便于调试，U-Boot 团队提供了一个沙盒，可以在构建主机甚至是夜间的持续集成（CI）系统上测试补丁程序。如果系统上安装了 Git 和 GNU Compiler Collection（GCC）等通用的开发工具，使用 U-Boot 沙盒会相对简单：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ee42dfe1528795449\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# git clone git://git.denx.de/u-boot; cd u-boot\r\n# make ARCH=sandbox defconfig\r\n# make; ./u-boot\r\n=&gt; printenv\r\n=&gt; help\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfe1528795449-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfe1528795449-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfe1528795449-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfe1528795449-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfe1528795449-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfe1528795449-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfe1528795449-1\"><span class=\"crayon-p\"># git clone git://git.denx.de/u-boot; cd u-boot</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfe1528795449-2\"><span class=\"crayon-p\"># make ARCH=sandbox defconfig</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfe1528795449-3\"><span class=\"crayon-p\"># make; ./u-boot</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfe1528795449-4\"><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">printenv</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfe1528795449-5\"><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfe1528795449-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在 x86_64 上运行 U-Boot，可以测试一些棘手的功能，如 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code\">模拟存储设备</a> 的重新分区、基于 TPM 的密钥操作以及 USB 设备热插拔等。U-Boot 沙盒甚至可以在 GDB 调试器下单步执行。使用沙盒进行开发的速度比将引导程序刷新到电路板上的测试快 10 倍，并且可以使用 <code>Ctrl + C</code> 恢复一个“变砖”的沙盒。</p>\n<h3 id=\"toc_5\">启动内核</h3>\n<h4 id=\"toc_6\">配置引导内核</h4>\n<p>引导程序完成任务后将跳转到已加载到主内存中的内核代码，并开始执行，传递用户指定的任何命令行选项。内核是什么样的程序呢？用命令 <code>file /boot/vmlinuz</code> 可以看到它是一个 “bzImage”，意思是一个大的压缩的镜像。Linux 源代码树包含了一个可以解压缩这个文件的工具—— <a href=\"https://github.com/torvalds/linux/blob/master/scripts/extract-vmlinux\">extract-vmlinux</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ee42dfe5706930197\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# scripts/extract-vmlinux /boot/vmlinuz-$(uname -r) &gt; vmlinux\r\n# file vmlinux\r\nvmlinux: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically\r\nlinked, stripped\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfe5706930197-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfe5706930197-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfe5706930197-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfe5706930197-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfe5706930197-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfe5706930197-1\"><span class=\"crayon-p\"># scripts/extract-vmlinux /boot/vmlinuz-$(uname -r) &gt; vmlinux</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfe5706930197-2\"><span class=\"crayon-p\"># file vmlinux</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfe5706930197-3\"><span class=\"crayon-v\">vmlinux</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ELF</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">bit </span><span class=\"crayon-e\">LSB </span><span class=\"crayon-v\">executable</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYSV</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">statically</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfe5706930197-4\"><span class=\"crayon-v\">linked</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stripped</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfe5706930197-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>内核是一个 <a href=\"http://man7.org/linux/man-pages/man5/elf.5.html\">可执行与可链接格式 Executable and Linking Format</a>（ELF）的二进制文件，就像 Linux 的用户空间程序一样。这意味着我们可以使用 <code>binutils</code> 包中的命令，如 <code>readelf</code> 来检查它。比较一下输出，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ee42dfe9197622081\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# readelf -S /bin/date\r\n# readelf -S vmlinux\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfe9197622081-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfe9197622081-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfe9197622081-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfe9197622081-1\"><span class=\"crayon-p\"># readelf -S /bin/date</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfe9197622081-2\"><span class=\"crayon-p\"># readelf -S vmlinux</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfe9197622081-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>这两个二进制文件中的段内容大致相同。</p>\n<p>所以内核必须像其他的 Linux ELF 文件一样启动，但用户空间程序是如何启动的呢？在 <code>main()</code> 函数中？并不确切。</p>\n<p>在 <code>main()</code> 函数运行之前，程序需要一个执行上下文，包括堆栈内存以及 <code>stdio</code>、<code>stdout</code> 和 <code>stderr</code> 的文件描述符。用户空间程序从标准库（多数 Linux 系统在用 “glibc”）中获取这些资源。参照以下输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ee42dfec905802186\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# file /bin/date\r\n/bin/date: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically\r\nlinked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32,\r\nBuildID[sha1]=14e8563676febeb06d701dbee35d225c5a8e565a,\r\nstripped\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfec905802186-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfec905802186-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfec905802186-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfec905802186-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dfec905802186-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dfec905802186-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfec905802186-1\"><span class=\"crayon-p\"># file /bin/date</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfec905802186-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">date</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ELF</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">bit </span><span class=\"crayon-e\">LSB </span><span class=\"crayon-e\">shared </span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYSV</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dynamically</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfec905802186-3\"><span class=\"crayon-v\">linked</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpreter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ld</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64.so.2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">GNU</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.6.32</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfec905802186-4\"><span class=\"crayon-v\">BuildID</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">14e8563676febeb06d701dbee35d225c5a8e565a</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dfec905802186-5\"><span class=\"crayon-i\">stripped</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dfec905802186-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>ELF 二进制文件有一个解释器，就像 Bash 和 Python 脚本一样，但是解释器不需要像脚本那样用 <code>#!</code> 指定，因为 ELF 是 Linux 的原生格式。ELF 解释器通过调用 <code>_start()</code> 函数来用所需资源 <a href=\"https://0xax.gitbooks.io/linux-insides/content/Misc/program_startup.html\">配置一个二进制文件</a>，这个函数可以从 glibc 源代码包中找到，可以 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code/commit/e543d9812058f2dd65f6aed45b09dda886c5fd4e\">用 GDB 查看</a>。内核显然没有解释器，必须自我配置，这是怎么做到的呢？</p>\n<p>用 GDB 检查内核的启动给出了答案。首先安装内核的调试软件包，内核中包含一个未剥离的unstripped vmlinux，例如 <code>apt-get install linux-image-amd64-dbg</code>，或者从源代码编译和安装你自己的内核，可以参照 <a href=\"http://kernel-handbook.alioth.debian.org/\">Debian Kernel Handbook</a> 中的指令。<code>gdb vmlinux</code> 后加 <code>info files</code> 可显示 ELF 段 <code>init.text</code>。在 <code>init.text</code> 中用 <code>l *(address)</code> 列出程序执行的开头，其中 <code>address</code> 是 <code>init.text</code> 的十六进制开头。用 GDB 可以看到 x86_64 内核从内核文件 <a href=\"https://github.com/torvalds/linux/blob/master/arch/x86/boot/compressed/head_64.S\">arch/x86/kernel/head_64.S</a> 开始启动，在这个文件中我们找到了汇编函数 <code>start_cpu0()</code>，以及一段明确的代码显示在调用 <code>x86_64 start_kernel()</code> 函数之前创建了堆栈并解压了 zImage。ARM 32 位内核也有类似的文件 <a href=\"https://github.com/torvalds/linux/blob/master/arch/arm/boot/compressed/head.S\">arch/arm/kernel/head.S</a>。<code>start_kernel()</code> 不针对特定的体系结构，所以这个函数驻留在内核的 <a href=\"https://github.com/torvalds/linux/blob/master/init/main.c\">init/main.c</a> 中。<code>start_kernel()</code> 可以说是 Linux 真正的 <code>main()</code> 函数。</p>\n<h3 id=\"toc_7\">从 start_kernel() 到 PID 1</h3>\n<h4 id=\"toc_8\">内核的硬件清单：设备树和 ACPI 表</h4>\n<p>在引导时，内核需要硬件信息，不仅仅是已编译过的处理器类型。代码中的指令通过单独存储的配置数据进行扩充。有两种主要的数据存储方法：<a href=\"https://www.youtube.com/watch?v=m_NyYEBxfn8\">设备树device-tree</a> 和 <a href=\"http://events.linuxfoundation.org/sites/events/files/slides/x86-platform.pdf\">高级配置和电源接口（ACPI）表</a>。内核通过读取这些文件了解每次启动时需要运行的硬件。</p>\n<p>对于嵌入式设备，设备树是已安装硬件的清单。设备树只是一个与内核源代码同时编译的文件，通常与 <code>vmlinux</code> 一样位于 <code>/boot</code> 目录中。要查看 ARM 设备上的设备树的内容，只需对名称与 <code>/boot/*.dtb</code> 匹配的文件执行 <code>binutils</code> 包中的 <code>strings</code> 命令即可，这里 <code>dtb</code> 是指设备树二进制文件device-tree binary。显然，只需编辑构成它的类 JSON 的文件并重新运行随内核源代码提供的特殊 <code>dtc</code> 编译器即可修改设备树。虽然设备树是一个静态文件，其文件路径通常由命令行引导程序传递给内核，但近年来增加了一个 <a href=\"http://lwn.net/Articles/616859/\">设备树覆盖</a> 的功能，内核在启动后可以动态加载热插拔的附加设备。</p>\n<p>x86 系列和许多企业级的 ARM64 设备使用 <a href=\"http://events.linuxfoundation.org/sites/events/files/slides/x86-platform.pdf\">ACPI</a> 机制。与设备树不同的是，ACPI 信息存储在内核在启动时通过访问板载 ROM 而创建的 <code>/sys/firmware/acpi/tables</code> 虚拟文件系统中。读取 ACPI 表的简单方法是使用 <code>acpica-tools</code> 包中的 <code>acpidump</code> 命令。例如：</p>\n<p><img class=\"aligncenter\" title=\"ACPI tables on Lenovo laptops\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e1c561f573bf3f14de98b441ff6443d5.png\" alt=\"ACPI tables on Lenovo laptops\"></p>\n<p style=\"text-align: center\"><em>联想笔记本电脑的 ACPI 表都是为 Windows 2001 设置的。</em></p>\n<p>是的，你的 Linux 系统已经准备好用于 Windows 2001 了，你要考虑安装吗？与设备树不同，ACPI 具有方法和数据，而设备树更多地是一种硬件描述语言。ACPI 方法在启动后仍处于活动状态。例如，运行 <code>acpi_listen</code> 命令（在 <code>apcid</code> 包中），然后打开和关闭笔记本机盖会发现 ACPI 功能一直在运行。暂时地和动态地 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/method-customizing.txt\">覆盖 ACPI 表</a> 是可能的，而永久地改变它需要在引导时与 BIOS 菜单交互或刷新 ROM。如果你遇到那么多麻烦，也许你应该 <a href=\"https://www.coreboot.org/Supported_Motherboards\">安装 coreboot</a>，这是开源固件的替代品。</p>\n<h4 id=\"toc_9\">从 start_kernel() 到用户空间</h4>\n<p><a href=\"https://github.com/torvalds/linux/blob/master/init/main.c\">init/main.c</a> 中的代码竟然是可读的，而且有趣的是，它仍然在使用 1991 – 1992 年的 Linus Torvalds 的原始版权。在一个刚启动的系统上运行 <code>dmesg | head</code>，其输出主要来源于此文件。第一个 CPU 注册到系统中，全局数据结构被初始化，并且调度程序、中断处理程序（IRQ）、定时器和控制台按照严格的顺序逐一启动。在 <code>timekeeping_init()</code> 函数运行之前，所有的时间戳都是零。内核初始化的这部分是同步的，也就是说执行只发生在一个线程中，在最后一个完成并返回之前，没有任何函数会被执行。因此，即使在两个系统之间，<code>dmesg</code> 的输出也是完全可重复的，只要它们具有相同的设备树或 ACPI 表。Linux 的行为就像在 MCU 上运行的 RTOS（实时操作系统）一样，如 QNX 或 VxWorks。这种情况持续存在于函数 <code>rest_init()</code> 中，该函数在终止时由 <code>start_kernel()</code> 调用。</p>\n<p><img class=\"aligncenter\" title=\"Summary of early kernel boot process.\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/731faee0c0adb28504bce94e646b22a2.png\" alt=\"Summary of early kernel boot process.\"></p>\n<p style=\"text-align: center\"><em>早期的内核启动流程。</em></p>\n<p>函数 <code>rest_init()</code> 产生了一个新进程以运行 <code>kernel_init()</code>，并调用了 <code>do_initcalls()</code>。用户可以通过将 <code>initcall_debug</code> 附加到内核命令行来监控 <code>initcalls</code>，这样每运行一次 <code>initcall</code> 函数就会产生 一个 <code>dmesg</code> 条目。<code>initcalls</code> 会历经七个连续的级别：early、core、postcore、arch、subsys、fs、device 和 late。<code>initcalls</code> 最为用户可见的部分是所有处理器外围设备的探测和设置：总线、网络、存储和显示器等等，同时加载其内核模块。<code>rest_init()</code> 也会在引导处理器上产生第二个线程，它首先运行 <code>cpu_idle()</code>，然后等待调度器分配工作。</p>\n<p><code>kernel_init()</code> 也可以 <a href=\"http://free-electrons.com/pub/conferences/2014/elc/clement-smp-bring-up-on-arm-soc\">设置对称多处理（SMP）结构</a>。在较新的内核中，如果 <code>dmesg</code> 的输出中出现 “Bringing up secondary CPUs…” 等字样，系统便使用了 SMP。SMP 通过“热插拔” CPU 来进行，这意味着它用状态机来管理其生命周期，这种状态机在概念上类似于热插拔的 U 盘一样。内核的电源管理系统经常会使某个核core离线，然后根据需要将其唤醒，以便在不忙的机器上反复调用同一段的 CPU 热插拔代码。观察电源管理系统调用 CPU 热插拔代码的 <a href=\"http://www.brendangregg.com/ebpf.html\">BCC 工具</a> 称为 <code>offcputime.py</code>。</p>\n<p>请注意，<code>init/main.c</code> 中的代码在 <code>smp_init()</code> 运行时几乎已执行完毕：引导处理器已经完成了大部分一次性初始化操作，其它核无需重复。尽管如此，跨 CPU 的线程仍然要在每个核上生成，以管理每个核的中断（IRQ）、工作队列、定时器和电源事件。例如，通过 <code>ps -o psr</code> 命令可以查看服务每个 CPU 上的线程的 softirqs 和 workqueues。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ee42dff4812689228\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -o pid,psr,comm $(pgrep ksoftirqd)  \r\n PID PSR COMMAND \r\n   7   0 ksoftirqd/0 \r\n  16   1 ksoftirqd/1 \r\n  22   2 ksoftirqd/2 \r\n  28   3 ksoftirqd/3 \r\n\r\n# ps -o pid,psr,comm $(pgrep kworker)\r\nPID  PSR COMMAND \r\n   4   0 kworker/0:0H \r\n  18   1 kworker/1:0H \r\n  24   2 kworker/2:0H \r\n  30   3 kworker/3:0H\r\n[ . . . ]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dff4812689228-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dff4812689228-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dff4812689228-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dff4812689228-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dff4812689228-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dff4812689228-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dff4812689228-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dff4812689228-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dff4812689228-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dff4812689228-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dff4812689228-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dff4812689228-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dff4812689228-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ee42dff4812689228-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ee42dff4812689228-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ee42dff4812689228-1\"><span class=\"crayon-p\"># ps -o pid,psr,comm $(pgrep ksoftirqd)  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dff4812689228-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">PSR </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dff4812689228-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dff4812689228-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dff4812689228-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dff4812689228-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dff4812689228-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dff4812689228-8\"><span class=\"crayon-p\"># ps -o pid,psr,comm $(pgrep kworker)</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dff4812689228-9\"><span class=\"crayon-e\">PID  </span><span class=\"crayon-e\">PSR </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dff4812689228-10\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dff4812689228-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dff4812689228-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dff4812689228-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ee42dff4812689228-14\"><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ee42dff4812689228-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>其中，PSR 字段代表“处理器processor”。每个核还必须拥有自己的定时器和 <code>cpuhp</code> 热插拔处理程序。</p>\n<p>那么用户空间是如何启动的呢？在最后，<code>kernel_init()</code> 寻找可以代表它执行 <code>init</code> 进程的 <code>initrd</code>。如果没有找到，内核直接执行 <code>init</code> 本身。那么为什么需要 <code>initrd</code> 呢？</p>\n<h4 id=\"toc_10\">早期的用户空间：谁规定要用 initrd？</h4>\n<p>除了设备树之外，在启动时可以提供给内核的另一个文件路径是 <code>initrd</code> 的路径。<code>initrd</code> 通常位于 <code>/boot</code> 目录中，与 x86 系统中的 bzImage 文件 vmlinuz 一样，或是与 ARM 系统中的 uImage 和设备树相同。用 <code>initramfs-tools-core</code> 软件包中的 <code>lsinitramfs</code> 工具可以列出 <code>initrd</code> 的内容。发行版的 <code>initrd</code> 方案包含了最小化的 <code>/bin</code>、<code>/sbin</code> 和 <code>/etc</code> 目录以及内核模块，还有 <code>/scripts</code> 中的一些文件。所有这些看起来都很熟悉，因为 <code>initrd</code> 大致上是一个简单的最小化 Linux 根文件系统。看似相似，其实不然，因为位于虚拟内存盘中的 <code>/bin</code> 和 <code>/sbin</code> 目录下的所有可执行文件几乎都是指向 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/initrd_table_override.txt\">BusyBox 二进制文件</a> 的符号链接，由此导致 <code>/bin</code> 和 <code>/sbin</code> 目录比 glibc 的小 10 倍。</p>\n<p>如果要做的只是加载一些模块，然后在普通的根文件系统上启动 <code>init</code>，为什么还要创建一个 <code>initrd</code> 呢？想想一个加密的根文件系统，解密可能依赖于加载一个位于根文件系统 <code>/lib/modules</code> 的内核模块，当然还有 <code>initrd</code> 中的。加密模块可能被静态地编译到内核中，而不是从文件加载，但有多种原因不希望这样做。例如，用模块静态编译内核可能会使其太大而不能适应存储空间，或者静态编译可能会违反软件许可条款。不出所料，存储、网络和人类输入设备（HID）驱动程序也可能存在于 <code>initrd</code> 中。<code>initrd</code> 基本上包含了任何挂载根文件系统所必需的非内核代码。<code>initrd</code> 也是用户存放 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/initrd_table_override.txt\">自定义ACPI</a> 表代码的地方。</p>\n<p><img class=\"aligncenter\" title=\"Rescue shell and a custom &lt;code&gt;initrd&lt;/code&gt;.\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/610e633892133afdd175eab9e33620d8.png\" alt=\"Rescue shell and a custom &lt;code&gt;initrd&lt;/code&gt;.\"></p>\n<p style=\"text-align: center\"><em>救援模式的 shell 和自定义的 <code>initrd</code> 还是很有意思的。</em></p>\n<p><code>initrd</code> 对测试文件系统和数据存储设备也很有用。将这些测试工具存放在 <code>initrd</code> 中，并从内存中运行测试，而不是从被测对象中运行。</p>\n<p>最后，当 <code>init</code> 开始运行时，系统就启动啦！由于第二个处理器现在在运行，机器已经成为我们所熟知和喜爱的异步、可抢占、不可预测和高性能的生物。的确，<code>ps -o pid,psr,comm -p 1</code> 很容易显示用户空间的 <code>init</code> 进程已不在引导处理器上运行了。</p>\n<h3 id=\"toc_11\">总结</h3>\n<p>Linux 引导过程听起来或许令人生畏，即使是简单嵌入式设备上的软件数量也是如此。但换个角度来看，启动过程相当简单，因为启动中没有抢占、RCU 和竞争条件等扑朔迷离的复杂功能。只关注内核和 PID 1 会忽略了引导程序和辅助处理器为运行内核执行的大量准备工作。虽然内核在 Linux 程序中是独一无二的，但通过一些检查 ELF 文件的工具也可以了解其结构。学习一个正常的启动过程，可以帮助运维人员处理启动的故障。</p>\n<p>要了解更多信息，请参阅 Alison Chaiken 的演讲——<a href=\"https://rego.linux.conf.au/schedule/presentation/16/\">Linux: The first second</a>，已于 1 月 22 日至 26 日在悉尼举行。参见 <a href=\"https://linux.conf.au/index.html\">linux.conf.au</a>。</p>\n<p>感谢 <a href=\"http://shallowsky.com/\">Akkana Peck</a> 的提议和指正。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113768\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113768votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113768\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg", "fav_nums": 4, "title": "Linux 启动过程分析", "comment_nums": 0, "tags": "IT技术,Linux"}/n{"create_date": "2018/03/21", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "url": "http://blog.jobbole.com/113775/", "url_object_id": "1401d80b943d81d3493c295bfe34a3ab", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.maketecheasier.com/essential-linux-apps/\">Ada Ivanova</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9458-1.html\">Linux中国/ChenYi</a>   </div><p>即便您不是计算机的新手，刚接触 Linux 时，通常都会面临选择使用应用软件的问题。在数百万 Linux 应用程序中，做起选择来并不轻松。本文中，您将能发现八个重要的 Linux 应用，帮助您快速选择应用程序。</p>\n<p>下面这些应用程序大多不是 Linux 独有的。如果有过使用 Windows/Mac 的经验，您很可能会熟悉其中一些软件。根据兴趣和需求，下面的程序可能不全符合您的要求，但是在我看来，清单里大多数甚至全部的软件，对于新用户开启 Linux 之旅都是有帮助的。</p>\n<p><strong>相关链接</strong> : <a title=\"11 Portable Apps Every Linux User Should Use\" href=\"https://www.maketecheasier.com/portable-apps-for-linux/\">每一个 Linux 用户都应该使用的 11 个可移植软件</a></p>\n<h3 id=\"toc_1\">1. Chromium 网页浏览器</h3>\n<p><img title=\"linux-apps-01-chromium\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/1a4a3161971e417d60d75361bfdf7083.jpg\" alt=\"linux-apps-01-chromium\"></p>\n<p>几乎不会不需要使用网页浏览器的用户。您可以看到陈旧的 Linux 发行版几乎都会附带 Firefox（火狐浏览器）或者其他 <a href=\"https://www.maketecheasier.com/linux-browsers-you-probably-havent-heard-of/\">Linux 浏览器</a>，关于浏览器，强烈建议您尝试 <a href=\"http://www.chromium.org/\">Chromium</a>。它是谷歌浏览器的开源版。Chromium 的主要优点是速度和安全性。它同样拥有大量的附加组件。</p>\n<h3 id=\"toc_2\">2. LibreOffice</h3>\n<p><img title=\"linux-apps-02-libreoffice\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4b02246613b823b1d7568cd8c7af6c79.jpg\" alt=\"linux-apps-02-libreoffice\"></p>\n<p><a href=\"https://www.libreoffice.org/\">LibreOffice</a> 是一个开源办公套件，其包括文字处理（Writer）、电子表格（Calc）、演示（Impress）、数据库（Base）、公式编辑器（Math）、矢量图和流程图（Draw）应用程序。它与 Microsoft Office 文档兼容，如果其基本功能不能满足需求，您可以使用 <a href=\"https://www.maketecheasier.com/best-libreoffice-extensions/\">LibreOffice 拓展</a>。</p>\n<p>LibreOffice 显然是 Linux 应用中至关重要的一员，如果您使用 Linux 的计算机，安装它是有必要的。</p>\n<h3 id=\"toc_3\">3. GIMP（GUN 图像处理程序GNU Image Manipulation Program）</h3>\n<p><img title=\"linux-apps-03-gimp\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/7c72e5b5a6595e7250a09f90ccd12e95.jpg\" alt=\"linux-apps-03-gimp\"></p>\n<p><a href=\"https://www.gimp.org/\">GIMP</a> 是一款非常强大的开源图片处理程序，它类似于 Photoshop。通过 GIMP，您可以编辑或是创建用于 Web 或是打印的光栅图（位图）。如果您对专业的图片处理没有概念，Linux 自然提供有更简单的图像编辑器，GIMP 看上去可能会复杂一点。GIMP 并不单纯提供图片裁剪和大小调整，它更覆盖了图层、滤镜、遮罩、路径和其他一些高级功能。</p>\n<h3 id=\"toc_4\">4. VLC 媒体播放器</h3>\n<p><img title=\"linux-apps-04-vlc\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ec5bc4abf3e1daf3ee5371e3bfbc8a4a.jpg\" alt=\"linux-apps-04-vlc\"></p>\n<p><a href=\"http://www.videolan.org/\">VLC</a> 也许就是最好的影音播放器了。它是跨平台的，所以您可能在 Windows 上也听说过它。VLC 最特殊的地方是其拥有大量解码器（并不是所有的解码器都开放源代码），所以它几乎可以播放所有的影音文件。</p>\n<h3 id=\"toc_5\">5. Jitsy</h3>\n<p><img title=\"linux-apps-05-jitsi\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/106a94517baf8cca5c0302d20afdcb58.jpg\" alt=\"linux-apps-05-jitsi\"></p>\n<p><a href=\"https://jitsi.org/\">Jitsy</a> 完全是关于通讯的。您可以借助它使用 Google talk、Facebook chat、Yahoo、ICQ 和 XMPP。它是用于音视频通话（包括电话会议），桌面流desktop streaming和群组聊天的多用户工具。会话会被加密。Jistsy 同样能帮助您传输文件或记录电话。</p>\n<h3 id=\"toc_6\">6. Synaptic</h3>\n<p><img title=\"linux-apps-06-synaptic\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a939e9ecbb8c51fa5908c7a234317cef.jpg\" alt=\"linux-apps-06-synaptic\"></p>\n<p><a href=\"http://www.nongnu.org/synaptic/\">Synaptic</a> 是一款基于 Debian 系统发行版的另一款应用程序安装程序。并不是所有基于 Debian 的 Linux 都安装有它，如果您使用基于 Debian 的 Linux 操作系统没有预装，也许您可以试一试。Synaptic 是一款用于添加或移除系统应用的 GUI 工具，甚至相对于许多发行版默认安装的 <a href=\"https://www.maketecheasier.com/are-linux-gui-software-centers-any-good/\">软件中心包管理器</a> ，经验丰富的 Linux 用户更亲睐于 Sunaptic。</p>\n<p><strong>相关链接</strong> : <a title=\"10 Free Linux Productivity Apps You Haven’t Heard Of\" href=\"https://www.maketecheasier.com/free-linux-productivity-apps-you-havent-heard-of/\">10 款您没听说过的 Linux 生产力应用程序</a></p>\n<h3 id=\"toc_7\">7. VirtualBox</h3>\n<p><img title=\"linux-apps-07-virtualbox\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/653bd651a823462de3513ae285eb14d4.jpg\" alt=\"linux-apps-07-virtualbox\"></p>\n<p><a href=\"https://www.virtualbox.org/\">VirtualBox</a> 能支持您在计算机上运行虚拟机。当您想在当前 Linux 发行版上安装其他发行版或操作系统时，使用虚拟机会方便许多。您同样可以通过它运行 Windows 应用程序，性能可能会稍弱，但是如果您有一台强大的计算机，就不会那么糟。</p>\n<h3 id=\"toc_8\">8. AisleRiot Solitaire（纸牌游戏）</h3>\n<p><img title=\"linux-apps-08-aisleriot\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/433400c4755063f31346d9ddcdf76188.jpg\" alt=\"linux-apps-08-aisleriot\"></p>\n<p>对于 Linux 的新用户来说，一款纸牌游戏并不是刚需，但是它真的太有趣了。当您进入这款纸牌游戏，您会发现，这是一款极好的纸牌游戏包。<a href=\"https://wiki.gnome.org/Aisleriot\">AisleRiot</a> 是 Linux 标志性的应用程序，原因是 – 它涵盖超过八十种纸牌游戏，包括流行的 Klondike、Bakers Dozen、Camelot 等等，作为预警 – 它是会上瘾的，您可能会花很长时间沉迷于此！</p>\n<p>根据您所使用的发行版，这些软件会有不同的安装方法。但是大多数都可以通过您使用的发行版中的包管理器安装使用，甚至它们可能会预装在您的发行版上。安装并且尝试它们想必是最好的，如果不合您的胃口，您可以轻松地删除它们。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113775\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113775votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113775\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg", "fav_nums": 0, "title": "Linux 新用户？来试试这 8 款重要的软件", "comment_nums": 0, "tags": "IT技术,Linux"}/n{"create_date": "2018/03/13", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "url": "http://blog.jobbole.com/113760/", "url_object_id": "a47361c034c83e65bad8c6c27ce61a3b", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/gaoenwei/blog/1623214\">码上青天</a>   </div><h2><strong>本文目标</strong></h2>\n<blockquote><p>要在单台机器上搭建Redis集群，方式是通过不同的TCP端口启动多个实例，然后组成集群，同时记录在搭建过程中踩过的坑。</p></blockquote>\n<h2>安装准备</h2>\n<blockquote><p>centos版本：6.7</p>\n<p>redis版本：3.2.3</p>\n<p>安装方式：源码安装</p>\n<p>服务器：1台</p></blockquote>\n<h2>操作步骤</h2>\n<p>此处默认已安装好单台redis，如果不会可以参照《<a href=\"https://my.oschina.net/gaoenwei/blog/1622588\" rel=\"nofollow\">centos上安装redis</a>》</p>\n<p> </p>\n<h3>1、启动Redis多个实例</h3>\n<p>我们在Redis安装目录下创建目录cluster，并编写7000.conf~7005.conf 6个配置文件，这6个配置文件用来启动6个实例，后面将使用这6个实例组成集群。</p>\n<p>以7000.conf为例，配置文件需要填写如下几项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d2b762227923\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nport  7000                                        //端口7000,7001,7002,7003,7004,7005        \r\nbind 192.168.186.91                                     //默认ip为127.0.0.1 需要改为其他节点机器可访问的ip 否则创建集群时无法访问对应的端口，无法创建集群\r\ndaemonize    yes                               //redis后台运行\r\npidfile  ./redis_7000.pid          //pidfile文件对应7000,7001,7002,7003,7004,7005 \r\ncluster-enabled  yes                           //开启集群  把注释#去掉\r\ncluster-config-file  nodes_7000.conf   //集群的配置  配置文件首次启动自动生成 7000,7001,7002,7003,7004,7005 \r\ncluster-node-timeout  15000                //请求超时  默认15秒，可自行设置\r\nappendonly  yes                           //aof日志开启  有需要就开启，它会每次写操作都记录一条日志　</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d2b762227923-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d2b762227923-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d2b762227923-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d2b762227923-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d2b762227923-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d2b762227923-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d2b762227923-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d2b762227923-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d2b762227923-1\"><span class=\"crayon-i\">port</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-c\">//端口7000,7001,7002,7003,7004,7005        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d2b762227923-2\"><span class=\"crayon-i\">bind</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-h\">                                     </span><span class=\"crayon-c\">//默认ip为127.0.0.1 需要改为其他节点机器可访问的ip 否则创建集群时无法访问对应的端口，无法创建集群</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d2b762227923-3\"><span class=\"crayon-e\">daemonize    </span><span class=\"crayon-v\">yes</span><span class=\"crayon-h\">                               </span><span class=\"crayon-c\">//redis后台运行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d2b762227923-4\"><span class=\"crayon-i\">pidfile</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis_7000</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pid</span><span class=\"crayon-h\">          </span><span class=\"crayon-c\">//pidfile文件对应7000,7001,7002,7003,7004,7005 </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d2b762227923-5\"><span class=\"crayon-v\">cluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">enabled  </span><span class=\"crayon-v\">yes</span><span class=\"crayon-h\">                           </span><span class=\"crayon-c\">//开启集群  把注释#去掉</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d2b762227923-6\"><span class=\"crayon-v\">cluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">file  </span><span class=\"crayon-v\">nodes_7000</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">//集群的配置  配置文件首次启动自动生成 7000,7001,7002,7003,7004,7005 </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d2b762227923-7\"><span class=\"crayon-v\">cluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">timeout</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15000</span><span class=\"crayon-h\">                </span><span class=\"crayon-c\">//请求超时  默认15秒，可自行设置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d2b762227923-8\"><span class=\"crayon-e\">appendonly  </span><span class=\"crayon-v\">yes</span><span class=\"crayon-h\">                           </span><span class=\"crayon-c\">//aof日志开启  有需要就开启，它会每次写操作都记录一条日志　</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>分别启动6个实例</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d35630064826\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nredis-server redis_cluster/7000/redis.conf\r\nredis-server redis_cluster/7001/redis.conf \r\nredis-server redis_cluster/7002/redis.conf \r\nredis-server redis_cluster/7003/redis.conf \r\nredis-server redis_cluster/7004/redis.conf \r\nredis-server redis_cluster/7005/redis.conf </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d35630064826-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d35630064826-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d35630064826-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d35630064826-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d35630064826-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d35630064826-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d35630064826-1\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d35630064826-2\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d35630064826-3\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d35630064826-4\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d35630064826-5\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d35630064826-6\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">conf</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>启动成功后，看一下进程</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d39751389484\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -ef | grep redis | grep cluster\r\nidata    15711 22329  0 18:40 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7000 [cluster]\r\nidata    15740 22329  0 18:40 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7001 [cluster]\r\nidata    15810 22329  0 18:40 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7002 [cluster]\r\nidata    17023 22329  0 18:42 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7003 [cluster]\r\nidata    17030 22329  0 18:42 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7004 [cluster]\r\nidata    17035 22329  0 18:42 pts/10   00:00:00 ./bin/redis-server 192.168.186.91:7005 [cluster]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d39751389484-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d39751389484-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d39751389484-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d39751389484-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d39751389484-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d39751389484-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d39751389484-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d39751389484-1\"><span class=\"crayon-p\"># ps -ef | grep redis | grep cluster</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d39751389484-2\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">15711</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d39751389484-3\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">15740</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d39751389484-4\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">15810</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d39751389484-5\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">17023</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d39751389484-6\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">17030</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d39751389484-7\"><span class=\"crayon-i\">idata</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">17035</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22329</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">server</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p>至此，ip=192.168.186.91机器上创建了6个实例，端口号为port=7000~7005。</p>\n<p> </p>\n<h3><strong>2、安装ruby</strong></h3>\n<p><strong>1）yum安装ruby和依赖的包。</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d3d358081713\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst redis_cluster]# yum -y install ruby ruby-devel rubygems rpm-build\r\n已加载插件：fastestmirror\r\n设置安装进程\r\nLoading mirror speeds from cached hostfile\r\n * base: mirrors.cn99.com\r\n * extras: mirrors.cn99.com\r\n * updates: mirrors.cn99.com\r\nbase                                                                                                                                                                                                                                                   | 3.7 kB     00:00     \r\nextras                                                                                                                                                                                                                                                 | 3.4 kB     00:00     \r\nmysql-connectors-community                                                                                                                                                                                                                             | 2.5 kB     00:00     \r\nmysql-tools-community                                                                                                                                                                                                                                  | 2.5 kB     00:00     \r\nmysql56-community                                                                                                                                                                                                                                      | 2.5 kB     00:00     \r\nupdates                                                                                                                                                                                                                                                | 3.4 kB     00:00     \r\n解决依赖关系\r\n--&gt; 执行事务检查\r\n---&gt; Package rpm-build.x86_64 0:4.8.0-55.el6 will be 安装\r\n--&gt; 处理依赖关系 patch &gt;= 2.5，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 elfutils &gt;= 0.128，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 xz，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 system-rpm-config，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 lzma，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n--&gt; 处理依赖关系 /usr/bin/gdb-add-index，它被软件包 rpm-build-4.8.0-55.el6.x86_64 需要\r\n---&gt; Package ruby.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n--&gt; 处理依赖关系 ruby-libs = 1.8.7.374-5.el6，它被软件包 ruby-1.8.7.374-5.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libruby.so.1.8()(64bit)，它被软件包 ruby-1.8.7.374-5.el6.x86_64 需要\r\n---&gt; Package ruby-devel.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n---&gt; Package rubygems.noarch 0:1.3.7-5.el6 will be 安装\r\n--&gt; 处理依赖关系 ruby-rdoc，它被软件包 rubygems-1.3.7-5.el6.noarch 需要\r\n--&gt; 执行事务检查\r\n---&gt; Package elfutils.x86_64 0:0.164-2.el6 will be 安装\r\n--&gt; 处理依赖关系 elfutils-libs(x86-64) = 0.164-2.el6，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.158)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.149)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.148)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.138)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.130)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.127)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.126)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1(ELFUTILS_0.122)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libasm.so.1(ELFUTILS_1.0)(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libdw.so.1()(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n--&gt; 处理依赖关系 libasm.so.1()(64bit)，它被软件包 elfutils-0.164-2.el6.x86_64 需要\r\n---&gt; Package gdb.x86_64 0:7.2-92.el6 will be 安装\r\n---&gt; Package patch.x86_64 0:2.6-6.el6 will be 安装\r\n---&gt; Package redhat-rpm-config.noarch 0:9.0.3-51.el6.centos will be 安装\r\n---&gt; Package ruby-libs.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n--&gt; 处理依赖关系 libreadline.so.5()(64bit)，它被软件包 ruby-libs-1.8.7.374-5.el6.x86_64 需要\r\n---&gt; Package ruby-rdoc.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n--&gt; 处理依赖关系 ruby-irb = 1.8.7.374-5.el6，它被软件包 ruby-rdoc-1.8.7.374-5.el6.x86_64 需要\r\n---&gt; Package xz.x86_64 0:4.999.9-0.5.beta.20091007git.el6 will be 安装\r\n---&gt; Package xz-lzma-compat.x86_64 0:4.999.9-0.5.beta.20091007git.el6 will be 安装\r\n--&gt; 执行事务检查\r\n---&gt; Package compat-readline5.x86_64 0:5.2-17.1.el6 will be 安装\r\n---&gt; Package elfutils-libs.x86_64 0:0.164-2.el6 will be 安装\r\n---&gt; Package ruby-irb.x86_64 0:1.8.7.374-5.el6 will be 安装\r\n--&gt; 完成依赖关系计算\r\n\r\n依赖关系解决\r\n\r\n==============================================================================================================================================================================================================================================================================\r\n 软件包                                                              架构                                                     版本                                                                               仓库                                                    大小\r\n==============================================================================================================================================================================================================================================================================\r\n正在安装:\r\n rpm-build                                                           x86_64                                                   4.8.0-55.el6                                                                       base                                                   131 k\r\n ruby                                                                x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   538 k\r\n ruby-devel                                                          x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   318 k\r\n rubygems                                                            noarch                                                   1.3.7-5.el6                                                                        base                                                   207 k\r\n为依赖而安装:\r\n compat-readline5                                                    x86_64                                                   5.2-17.1.el6                                                                       base                                                   130 k\r\n elfutils                                                            x86_64                                                   0.164-2.el6                                                                        base                                                   240 k\r\n elfutils-libs                                                       x86_64                                                   0.164-2.el6                                                                        base                                                   230 k\r\n gdb                                                                 x86_64                                                   7.2-92.el6                                                                         base                                                   2.3 M\r\n patch                                                               x86_64                                                   2.6-6.el6                                                                          base                                                    90 k\r\n redhat-rpm-config                                                   noarch                                                   9.0.3-51.el6.centos                                                                base                                                    60 k\r\n ruby-irb                                                            x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   318 k\r\n ruby-libs                                                           x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   1.7 M\r\n ruby-rdoc                                                           x86_64                                                   1.8.7.374-5.el6                                                                    base                                                   381 k\r\n xz                                                                  x86_64                                                   4.999.9-0.5.beta.20091007git.el6                                                   base                                                   137 k\r\n xz-lzma-compat                                                      x86_64                                                   4.999.9-0.5.beta.20091007git.el6                                                   base                                                    16 k\r\n\r\n事务概要\r\n==============================================================================================================================================================================================================================================================================\r\nInstall      15 Package(s)\r\n\r\n总下载量：6.7 M\r\nInstalled size: 20 M\r\n下载软件包：\r\n(1/15): compat-readline5-5.2-17.1.el6.x86_64.rpm                                                                                                                                                                                                       | 130 kB     00:00     \r\n(2/15): elfutils-0.164-2.el6.x86_64.rpm                                                                                                                                                                                                                | 240 kB     00:00     \r\n(3/15): elfutils-libs-0.164-2.el6.x86_64.rpm                                                                                                                                                                                                           | 230 kB     00:00     \r\n(4/15): gdb-7.2-92.el6.x86_64.rpm                                                                                                                                                                                                                      | 2.3 MB     00:00     \r\n(5/15): patch-2.6-6.el6.x86_64.rpm                                                                                                                                                                                                                     |  90 kB     00:00     \r\n(6/15): redhat-rpm-config-9.0.3-51.el6.centos.noarch.rpm                                                                                                                                                                                               |  60 kB     00:00     \r\n(7/15): rpm-build-4.8.0-55.el6.x86_64.rpm                                                                                                                                                                                                              | 131 kB     00:00     \r\n(8/15): ruby-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                                | 538 kB     00:00     \r\n(9/15): ruby-devel-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                          | 318 kB     00:00     \r\n(10/15): ruby-irb-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                           | 318 kB     00:00     \r\n(11/15): ruby-libs-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                          | 1.7 MB     00:00     \r\n(12/15): ruby-rdoc-1.8.7.374-5.el6.x86_64.rpm                                                                                                                                                                                                          | 381 kB     00:00     \r\n(13/15): rubygems-1.3.7-5.el6.noarch.rpm                                                                                                                                                                                                               | 207 kB     00:00     \r\n(14/15): xz-4.999.9-0.5.beta.20091007git.el6.x86_64.rpm                                                                                                                                                                                                | 137 kB     00:00     \r\n(15/15): xz-lzma-compat-4.999.9-0.5.beta.20091007git.el6.x86_64.rpm                                                                                                                                                                                    |  16 kB     00:00     \r\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n总计                                                                                                                                                                                                                                          4.6 MB/s | 6.7 MB     00:01     \r\n运行 rpm_check_debug \r\n执行事务测试\r\n事务测试成功\r\n执行事务\r\n  正在安装   : xz-4.999.9-0.5.beta.20091007git.el6.x86_64                                                                                                                                                                                                                1/15 \r\n  正在安装   : xz-lzma-compat-4.999.9-0.5.beta.20091007git.el6.x86_64                                                                                                                                                                                                    2/15 \r\n  正在安装   : elfutils-libs-0.164-2.el6.x86_64                                                                                                                                                                                                                          3/15 \r\n  正在安装   : elfutils-0.164-2.el6.x86_64                                                                                                                                                                                                                               4/15 \r\n  正在安装   : redhat-rpm-config-9.0.3-51.el6.centos.noarch                                                                                                                                                                                                              5/15 \r\n  正在安装   : patch-2.6-6.el6.x86_64                                                                                                                                                                                                                                    6/15 \r\n  正在安装   : compat-readline5-5.2-17.1.el6.x86_64                                                                                                                                                                                                                      7/15 \r\n  正在安装   : ruby-libs-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                          8/15 \r\n  正在安装   : ruby-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                               9/15 \r\n  正在安装   : ruby-irb-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                          10/15 \r\n  正在安装   : ruby-rdoc-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                         11/15 \r\n  正在安装   : gdb-7.2-92.el6.x86_64                                                                                                                                                                                                                                    12/15 \r\n  正在安装   : rpm-build-4.8.0-55.el6.x86_64                                                                                                                                                                                                                            13/15 \r\n  正在安装   : rubygems-1.3.7-5.el6.noarch                                                                                                                                                                                                                              14/15 \r\n  正在安装   : ruby-devel-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                        15/15 \r\n  Verifying  : gdb-7.2-92.el6.x86_64                                                                                                                                                                                                                                     1/15 \r\n  Verifying  : compat-readline5-5.2-17.1.el6.x86_64                                                                                                                                                                                                                      2/15 \r\n  Verifying  : ruby-rdoc-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                          3/15 \r\n  Verifying  : xz-lzma-compat-4.999.9-0.5.beta.20091007git.el6.x86_64                                                                                                                                                                                                    4/15 \r\n  Verifying  : patch-2.6-6.el6.x86_64                                                                                                                                                                                                                                    5/15 \r\n  Verifying  : redhat-rpm-config-9.0.3-51.el6.centos.noarch                                                                                                                                                                                                              6/15 \r\n  Verifying  : ruby-irb-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                           7/15 \r\n  Verifying  : ruby-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                               8/15 \r\n  Verifying  : rpm-build-4.8.0-55.el6.x86_64                                                                                                                                                                                                                             9/15 \r\n  Verifying  : elfutils-libs-0.164-2.el6.x86_64                                                                                                                                                                                                                         10/15 \r\n  Verifying  : rubygems-1.3.7-5.el6.noarch                                                                                                                                                                                                                              11/15 \r\n  Verifying  : xz-4.999.9-0.5.beta.20091007git.el6.x86_64                                                                                                                                                                                                               12/15 \r\n  Verifying  : elfutils-0.164-2.el6.x86_64                                                                                                                                                                                                                              13/15 \r\n  Verifying  : ruby-devel-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                        14/15 \r\n  Verifying  : ruby-libs-1.8.7.374-5.el6.x86_64                                                                                                                                                                                                                         15/15 \r\n\r\n已安装:\r\n  rpm-build.x86_64 0:4.8.0-55.el6                                    ruby.x86_64 0:1.8.7.374-5.el6                                    ruby-devel.x86_64 0:1.8.7.374-5.el6                                    rubygems.noarch 0:1.3.7-5.el6                                   \r\n\r\n作为依赖被安装:\r\n  compat-readline5.x86_64 0:5.2-17.1.el6  elfutils.x86_64 0:0.164-2.el6       elfutils-libs.x86_64 0:0.164-2.el6  gdb.x86_64 0:7.2-92.el6                       patch.x86_64 0:2.6-6.el6                                  redhat-rpm-config.noarch 0:9.0.3-51.el6.centos \r\n  ruby-irb.x86_64 0:1.8.7.374-5.el6       ruby-libs.x86_64 0:1.8.7.374-5.el6  ruby-rdoc.x86_64 0:1.8.7.374-5.el6  xz.x86_64 0:4.999.9-0.5.beta.20091007git.el6  xz-lzma-compat.x86_64 0:4.999.9-0.5.beta.20091007git.el6 \r\n\r\n完毕！\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-139\">139</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-140\">140</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-141\">141</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-142\">142</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-143\">143</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-144\">144</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-145\">145</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-146\">146</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d3d358081713-147\">147</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d3d358081713-148\">148</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># yum -y install ruby ruby-devel rubygems rpm-build</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-2\">已加载插件：<span class=\"crayon-i\">fastestmirror</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-3\">设置安装进程</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-4\"><span class=\"crayon-e\">Loading </span><span class=\"crayon-e\">mirror </span><span class=\"crayon-e\">speeds </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">cached </span><span class=\"crayon-e \">hostfile</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-5\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">base</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirrors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cn99</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-6\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extras</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirrors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cn99</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">com</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-7\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">updates</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mirrors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cn99</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-8\"><span class=\"crayon-v\">base</span><span class=\"crayon-h\">                                                                                                                                                                                                                                                   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-9\"><span class=\"crayon-v\">extras</span><span class=\"crayon-h\">                                                                                                                                                                                                                                                 </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-10\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">connectors</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">community</span><span class=\"crayon-h\">                                                                                                                                                                                                                             </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-11\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tools</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">community</span><span class=\"crayon-h\">                                                                                                                                                                                                                                  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-12\"><span class=\"crayon-v\">mysql56</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">community</span><span class=\"crayon-h\">                                                                                                                                                                                                                                      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-13\"><span class=\"crayon-v\">updates</span><span class=\"crayon-h\">                                                                                                                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-14\">解决依赖关系</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-15\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>执行事务检查</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-16\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-17\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.5</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-18\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.128</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-19\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-i\">xz</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-20\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">system</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">config</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-21\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-i\">lzma</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-22\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">add</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">index</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-23\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-24\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-25\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libruby</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1.8</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-26\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-27\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-28\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">rdoc</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-29\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>执行事务检查</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-30\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-31\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">libs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-32\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">158</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-33\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">149</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-34\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">148</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-35\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">138</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-36\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">130</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-37\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">127</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-38\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">126</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-39\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">122</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-40\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libasm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ELFUTILS_1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-41\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libdw</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-42\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libasm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-43\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-44\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-45\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-46\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-47\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">libreadline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-sy\">)</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-48\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-49\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>处理依赖关系<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span>，它被软件包<span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\"> </span>需要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-50\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-51\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-52\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>执行事务检查</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-53\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-54\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-55\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span>安装</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-56\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span>完成依赖关系计算</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-57\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-58\">依赖关系解决</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-59\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-60\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-61\"><span class=\"crayon-h\"> </span>软件包<span class=\"crayon-h\">                                                              </span>架构<span class=\"crayon-h\">                                                     </span>版本<span class=\"crayon-h\">                                                                               </span>仓库<span class=\"crayon-h\">                                                    </span>大小</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-62\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-63\">正在安装<span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-64\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">build                                                           </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6</span><span class=\"crayon-h\">                                                                       </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">131</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-65\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ruby                                                                </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">538</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-66\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">devel                                                          </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">318</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-67\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rubygems                                                            </span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                        </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">207</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-68\">为依赖而安装<span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-69\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">readline5                                                    </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6</span><span class=\"crayon-h\">                                                                       </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">130</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-70\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">elfutils                                                            </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\">                                                                        </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">240</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-71\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">libs                                                       </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\">                                                                        </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">230</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-72\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gdb                                                                 </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6</span><span class=\"crayon-h\">                                                                         </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">2.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">M</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-73\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">patch                                                               </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6</span><span class=\"crayon-h\">                                                                          </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                    </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-74\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">config                                                   </span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos</span><span class=\"crayon-h\">                                                                </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                    </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-75\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">irb                                                            </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">318</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-76\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">libs                                                           </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">M</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-77\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">rdoc                                                           </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                                                    </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">381</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-78\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xz                                                                  </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">137</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-79\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">compat                                                      </span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\">                                                   </span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\">                                                   </span><span class=\"crayon-i\">base</span><span class=\"crayon-h\">                                                    </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-80\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-81\">事务概要</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-82\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-83\"><span class=\"crayon-i\">Install</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Package</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-84\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-85\">总下载量：<span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">M</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-86\"><span class=\"crayon-e\">Installed </span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">M</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-87\">下载软件包：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-88\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                       </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">130</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-89\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">240</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-90\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                           </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">230</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-91\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                                      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-92\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                                     </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-93\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos.noarch.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                               </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-94\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                              </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">131</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-95\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">538</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-96\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                          </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">318</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-97\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                           </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">318</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-98\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                          </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-99\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                          </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">381</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-100\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                               </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">207</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-101\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">137</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-102\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64.rpm</span><span class=\"crayon-h\">                                                                                                                                                                                    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-103\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-104\">总计<span class=\"crayon-h\">                                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">4.6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MB</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-105\">运行<span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm_check</span><span class=\"crayon-sy\">_</span>debug<span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-106\">执行事务测试</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-107\">事务测试成功</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-108\">执行事务</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-109\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-110\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-111\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-112\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                               </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-113\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos.noarch</span><span class=\"crayon-h\">                                                                                                                                                                                                              </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-114\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                                    </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-115\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                      </span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-116\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">8</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-117\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                               </span><span class=\"crayon-cn\">9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-118\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-119\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                         </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-120\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                                    </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-121\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                            </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-122\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch</span><span class=\"crayon-h\">                                                                                                                                                                                                                              </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-123\"><span class=\"crayon-h\">  </span>正在安装<span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                        </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-124\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                                     </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-125\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                      </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-126\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                          </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-127\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                    </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-128\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                                    </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-129\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos.noarch</span><span class=\"crayon-h\">                                                                                                                                                                                                              </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-130\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                           </span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-131\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                               </span><span class=\"crayon-cn\">8</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-132\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                             </span><span class=\"crayon-cn\">9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-133\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                         </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-134\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch</span><span class=\"crayon-h\">                                                                                                                                                                                                                              </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-135\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                               </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-136\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                              </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-137\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                        </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-138\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Verifying</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.x86_64</span><span class=\"crayon-h\">                                                                                                                                                                                                                         </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-139\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-140\">已安装<span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-141\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">build</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.8.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">55.el6</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">                                   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-142\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-143\">作为依赖被安装<span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-144\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">compat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">readline5</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17.1.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">elfutils</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">92.el6</span><span class=\"crayon-h\">                       </span><span class=\"crayon-v\">patch</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6.el6</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-v\">redhat</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rpm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9.0.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">51.el6.centos</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-145\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">irb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">libs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdoc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.8.7.374</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">xz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lzma</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">compat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86</span><span class=\"crayon-sy\">_</span>64<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4.999.9</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5.beta.20091007git.el6</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-146\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d3d358081713-147\">完毕！</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d3d358081713-148\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0605 seconds] -->\r\n<p><strong>2）使用gem这个命令来安装redis接口</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d54382652740\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst redis_cluster]# gem install redis\r\nERROR:  Error installing redis:\r\n\tredis requires Ruby version &gt;= 2.2.2.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d54382652740-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d54382652740-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d54382652740-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d54382652740-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d54382652740-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># gem install redis</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d54382652740-2\"><span class=\"crayon-v\">ERROR</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Error </span><span class=\"crayon-e\">installing </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d54382652740-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">redis </span><span class=\"crayon-e\">requires </span><span class=\"crayon-e\">Ruby </span><span class=\"crayon-v\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.2.2.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d54382652740-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>这一步骤中出现了bug,度娘告诉我是Ruby版本太低，需要升级版本。</p>\n<p><strong>3）升级Ruby的版本</strong></p>\n<p>安装rvm，我不知道这是个什么东西，但是感觉像是Ruby的一个包管理器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d5c688669894\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst redis_cluster]# curl -L get.rvm.io | bash -s stable\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100 24090  100 24090    0     0  10919      0  0:00:02  0:00:02 --:--:-- 91242\r\nDownloading https://github.com/rvm/rvm/archive/1.29.3.tar.gz\r\nDownloading https://github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc\r\ngpg: 于 2017年09月11日 星期一 04时59分21秒 CST 创建的签名，使用 RSA，钥匙号 BF04FF17\r\ngpg: 无法检查签名：No public key\r\nWarning, RVM 1.26.0 introduces signed releases and automated check of signatures when GPG software found. Assuming you trust Michal Papis import the mpapis public key (downloading the signatures).\r\n\r\nGPG signature verification failed for '/usr/local/rvm/archives/rvm-1.29.3.tgz' - 'https://github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc'! Try to install GPG v2 and then fetch the public key:\r\n\r\n    gpg2 --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\r\n\r\nor if it fails:\r\n\r\n    command curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -\r\n\r\nthe key can be compared with:\r\n\r\n    https://rvm.io/mpapis.asc\r\n    https://keybase.io/mpapis\r\n\r\nNOTE: GPG version 2.1.17 have a bug which cause failures during fetching keys from remote server. Please downgrade or upgrade to newer version (if available) or use the second method described above.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d5c688669894-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d5c688669894-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># curl -L get.rvm.io | bash -s stable</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Total</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Received</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Xferd  </span><span class=\"crayon-e\">Average </span><span class=\"crayon-e\">Speed   </span><span class=\"crayon-e\">Time    </span><span class=\"crayon-e\">Time     </span><span class=\"crayon-e\">Time  </span><span class=\"crayon-e\">Current</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-3\"><span class=\"crayon-e\">                                 </span><span class=\"crayon-e\">Dload  </span><span class=\"crayon-e\">Upload   </span><span class=\"crayon-e\">Total   </span><span class=\"crayon-e\">Spent    </span><span class=\"crayon-e\">Left  </span><span class=\"crayon-i\">Speed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-4\"><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24090</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24090</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">10919</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">91242</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-5\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/rvm/rvm/archive/1.29.3.tar.gz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-6\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-7\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>于<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span>年<span class=\"crayon-cn\">09</span>月<span class=\"crayon-cn\">11</span>日<span class=\"crayon-h\"> </span>星期一<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">04</span>时<span class=\"crayon-cn\">59</span>分<span class=\"crayon-cn\">21</span>秒<span class=\"crayon-h\"> </span><span class=\"crayon-i\">CST</span><span class=\"crayon-h\"> </span>创建的签名，使用<span class=\"crayon-h\"> </span><span class=\"crayon-i\">RSA</span>，钥匙号<span class=\"crayon-h\"> </span><span class=\"crayon-e\">BF04FF17</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-8\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>无法检查签名：<span class=\"crayon-e\">No </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-9\"><span class=\"crayon-v\">Warning</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">RVM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.26.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">introduces </span><span class=\"crayon-t\">signed</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">releases </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">automated </span><span class=\"crayon-e\">check </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">signatures </span><span class=\"crayon-e\">when </span><span class=\"crayon-e\">GPG </span><span class=\"crayon-e\">software </span><span class=\"crayon-v\">found</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Assuming </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">trust </span><span class=\"crayon-e\">Michal </span><span class=\"crayon-e\">Papis </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">mpapis </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">downloading </span><span class=\"crayon-e\">the </span><span class=\"crayon-v\">signatures</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-11\"><span class=\"crayon-e\">GPG </span><span class=\"crayon-e\">signature </span><span class=\"crayon-e\">verification </span><span class=\"crayon-e\">failed </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/usr/local/rvm/archives/rvm-1.29.3.tgz'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc'</span><span class=\"crayon-o\">!</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">Try</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">GPG </span><span class=\"crayon-e\">v2 </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fetch </span><span class=\"crayon-e\">the </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-12\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">gpg2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">recv</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">keys</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">409B6B1796C275462A1703113804BB82D39DC0E3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-14\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-15\"><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">it </span><span class=\"crayon-v\">fails</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-16\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">command </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sSL </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rvm.io/mpapis.asc | gpg2 --import -</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-18\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-19\"><span class=\"crayon-e\">the </span><span class=\"crayon-e\">key </span><span class=\"crayon-e\">can </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">compared </span><span class=\"crayon-v\">with</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-20\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rvm.io/mpapis.asc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//keybase.io/mpapis</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d5c688669894-24\"><span class=\"crayon-v\">NOTE</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GPG </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.1.17</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">have</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bug </span><span class=\"crayon-e\">which </span><span class=\"crayon-e\">cause </span><span class=\"crayon-e\">failures </span><span class=\"crayon-e\">during </span><span class=\"crayon-e\">fetching </span><span class=\"crayon-e\">keys </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">remote </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Please </span><span class=\"crayon-e\">downgrade </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">upgrade </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">newer </span><span class=\"crayon-e\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">available</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">second </span><span class=\"crayon-e\">method </span><span class=\"crayon-e\">described </span><span class=\"crayon-v\">above</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d5c688669894-25\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0054 seconds] -->\r\n<p>这一操作得到了：</p>\n<p>gpg2 –recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</p>\n<p>然后利用该密钥下载Ruby并升级。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d60103164415\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst redis_cluster]# gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\r\ngpg: 下载密钥‘D39DC0E3’，从 hkp 服务器 keys.gnupg.net\r\ngpg: /root/.gnupg/trustdb.gpg：建立了信任度数据库\r\ngpg: 密钥 D39DC0E3：公钥“Michal Papis (RVM signing) &lt;mpapis@gmail.com&gt;”已导入\r\ngpg: 没有找到任何绝对信任的密钥\r\ngpg: 合计被处理的数量：1\r\ngpg:           已导入：1  (RSA: 1)\r\n[root@itfirst redis_cluster]# curl -sSL https://get.rvm.io | bash -s stable\r\nDownloading https://github.com/rvm/rvm/archive/1.29.3.tar.gz\r\nDownloading https://github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc\r\ngpg: 于 2017年09月11日 星期一 04时59分21秒 CST 创建的签名，使用 RSA，钥匙号 BF04FF17\r\ngpg: 完好的签名，来自于“Michal Papis (RVM signing) &lt;mpapis@gmail.com&gt;”\r\ngpg:               亦即“Michal Papis &lt;mpapis@gmail.com&gt;”\r\ngpg:               亦即“[jpeg image of size 5015]”\r\ngpg: 警告：这把密钥未经受信任的签名认证！\r\ngpg:       没有证据表明这个签名属于它所声称的持有者。\r\n主钥指纹： 409B 6B17 96C2 7546 2A17  0311 3804 BB82 D39D C0E3\r\n子钥指纹： 62C9 E5F4 DA30 0D94 AC36  166B E206 C29F BF04 FF17\r\nGPG verified '/usr/local/rvm/archives/rvm-1.29.3.tgz'\r\nCreating group 'rvm'\r\n\r\nInstalling RVM to /usr/local/rvm/\r\nInstallation of RVM in /usr/local/rvm/ is almost complete:\r\n\r\n  * First you need to add all users that will be using rvm to 'rvm' group,\r\n    and logout - login again, anyone using rvm will be operating with `umask u=rwx,g=rwx,o=rx`.\r\n\r\n  * To start using RVM you need to run `source /etc/profile.d/rvm.sh`\r\n    in all your open shell windows, in rare cases you need to reopen all shell windows.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d60103164415-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d60103164415-30\">30</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-2\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>下载密钥‘<span class=\"crayon-i\">D39DC0E3</span>’，从<span class=\"crayon-h\"> </span><span class=\"crayon-i\">hkp</span><span class=\"crayon-h\"> </span>服务器<span class=\"crayon-h\"> </span><span class=\"crayon-v\">keys</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gnupg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">net</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-3\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gnupg</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">trustdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">gpg</span>：建立了信任度数据库</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-4\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>密钥<span class=\"crayon-h\"> </span><span class=\"crayon-i\">D39DC0E3</span>：公钥“<span class=\"crayon-e\">Michal </span><span class=\"crayon-e\">Papis</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">RVM </span><span class=\"crayon-v\">signing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">mpapis</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">gmail</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">&gt;</span>”已导入</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-5\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>没有找到任何绝对信任的密钥</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-6\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>合计被处理的数量：<span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-7\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">           </span>已导入：<span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">RSA</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-8\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">redis_cluster</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># curl -sSL https://get.rvm.io | bash -s stable</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-9\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/rvm/rvm/archive/1.29.3.tar.gz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-10\"><span class=\"crayon-e\">Downloading </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/rvm/rvm/releases/download/1.29.3/1.29.3.tar.gz.asc</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-11\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>于<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span>年<span class=\"crayon-cn\">09</span>月<span class=\"crayon-cn\">11</span>日<span class=\"crayon-h\"> </span>星期一<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">04</span>时<span class=\"crayon-cn\">59</span>分<span class=\"crayon-cn\">21</span>秒<span class=\"crayon-h\"> </span><span class=\"crayon-i\">CST</span><span class=\"crayon-h\"> </span>创建的签名，使用<span class=\"crayon-h\"> </span><span class=\"crayon-i\">RSA</span>，钥匙号<span class=\"crayon-h\"> </span><span class=\"crayon-e\">BF04FF17</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-12\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>完好的签名，来自于“<span class=\"crayon-e\">Michal </span><span class=\"crayon-e\">Papis</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">RVM </span><span class=\"crayon-v\">signing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">mpapis</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">gmail</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">&gt;</span>”</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-13\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">               </span>亦即“<span class=\"crayon-e\">Michal </span><span class=\"crayon-v\">Papis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">mpapis</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">gmail</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">&gt;</span>”</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-14\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">               </span>亦即“<span class=\"crayon-sy\">[</span><span class=\"crayon-e\">jpeg </span><span class=\"crayon-e\">image </span><span class=\"crayon-e\">of </span><span class=\"crayon-i\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5015</span><span class=\"crayon-sy\">]</span>”</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-15\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>警告：这把密钥未经受信任的签名认证！</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-16\"><span class=\"crayon-v\">gpg</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span>没有证据表明这个签名属于它所声称的持有者。</div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-17\">主钥指纹：<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">409B</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6B17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96C2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7546</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2A17</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0311</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3804</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BB82 </span><span class=\"crayon-e\">D39D </span><span class=\"crayon-i\">C0E3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-18\">子钥指纹：<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">62C9</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E5F4 </span><span class=\"crayon-i\">DA30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0D94</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">AC36</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">166B</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E206 </span><span class=\"crayon-e\">C29F </span><span class=\"crayon-e\">BF04 </span><span class=\"crayon-e\">FF17</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-19\"><span class=\"crayon-e\">GPG </span><span class=\"crayon-i\">verified</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/usr/local/rvm/archives/rvm-1.29.3.tgz'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-20\"><span class=\"crayon-e\">Creating </span><span class=\"crayon-i\">group</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'rvm'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-22\"><span class=\"crayon-e\">Installing </span><span class=\"crayon-e\">RVM </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-23\"><span class=\"crayon-e\">Installation </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">RVM </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">almost </span><span class=\"crayon-v\">complete</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-24\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-25\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">First </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">users </span><span class=\"crayon-e\">that </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">using </span><span class=\"crayon-e\">rvm </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'rvm'</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">group</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">logout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">login </span><span class=\"crayon-v\">again</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">anyone </span><span class=\"crayon-e\">using </span><span class=\"crayon-e\">rvm </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">operating </span><span class=\"crayon-i\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">umask</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rx</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-28\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">To</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">start </span><span class=\"crayon-e\">using </span><span class=\"crayon-e\">RVM </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">run</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">profile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d60103164415-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">open </span><span class=\"crayon-e\">shell </span><span class=\"crayon-v\">windows</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rare </span><span class=\"crayon-e\">cases </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reopen </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">shell </span><span class=\"crayon-v\">windows</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d60103164415-30\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0075 seconds] -->\r\n<p>接着，source环境，让rvm可用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d65739085762\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst ~]# source /usr/local/rvm/scripts/rvm</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d65739085762-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d65739085762-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># source /usr/local/rvm/scripts/rvm</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>查看Ruby可用版本</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d68143110940\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst ~]# rvm list known\r\n# MRI Rubies\r\n[ruby-]1.8.6[-p420]\r\n[ruby-]1.8.7[-head] # security released on head\r\n[ruby-]1.9.1[-p431]\r\n[ruby-]1.9.2[-p330]\r\n[ruby-]1.9.3[-p551]\r\n[ruby-]2.0.0[-p648]\r\n[ruby-]2.1[.10]\r\n[ruby-]2.2[.7]\r\n[ruby-]2.3[.4]\r\n[ruby-]2.4[.1]\r\nruby-head\r\n\r\n# for forks use: rvm install ruby-head-&lt;name&gt; --url https://github.com/github/ruby.git --branch 2.2\r\n\r\n# JRuby\r\njruby-1.6[.8]\r\njruby-1.7[.27]\r\njruby[-9.1.13.0]\r\njruby-head\r\n\r\n# Rubinius\r\nrbx-1[.4.3]\r\nrbx-2.3[.0]\r\nrbx-2.4[.1]\r\nrbx-2[.5.8]\r\nrbx-3[.84]\r\nrbx-head\r\n\r\n# Opal\r\nopal\r\n\r\n# Minimalistic ruby implementation - ISO 30170:2012\r\nmruby-1.0.0\r\nmruby-1.1.0\r\nmruby-1.2.0\r\nmruby-1[.3.0]\r\nmruby[-head]\r\n\r\n# Ruby Enterprise Edition\r\nree-1.8.6\r\nree[-1.8.7][-2012.02]\r\n\r\n# Topaz\r\ntopaz\r\n\r\n# MagLev\r\nmaglev[-head]\r\nmaglev-1.0.0\r\n\r\n# Mac OS X Snow Leopard Or Newer\r\nmacruby-0.10\r\nmacruby-0.11\r\nmacruby[-0.12]\r\nmacruby-nightly\r\nmacruby-head\r\n\r\n# IronRuby\r\nironruby[-1.1.3]\r\nironruby-head\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d68143110940-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d68143110940-62\">62</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rvm list known</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-2\"><span class=\"crayon-p\"># MRI Rubies</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.8.6</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p420</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.8.7</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># security released on head</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.9.1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p431</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.9.2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p330</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-7\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">1.9.3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p551</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-8\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.0.0</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p648</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-9\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-10\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-11\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-12\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">]</span><span class=\"crayon-cn\">2.4</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-13\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-14\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-15\"><span class=\"crayon-p\"># for forks use: rvm install ruby-head-&lt;name&gt; --url https://github.com/github/ruby.git --branch 2.2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-16\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-17\"><span class=\"crayon-p\"># JRuby</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-18\"><span class=\"crayon-v\">jruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.6</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-19\"><span class=\"crayon-v\">jruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.7</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">27</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-20\"><span class=\"crayon-v\">jruby</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.1.13.0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-21\"><span class=\"crayon-v\">jruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-22\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-23\"><span class=\"crayon-p\"># Rubinius</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-24\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">4.3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-25\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-26\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.4</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-27\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">5.8</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-28\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">84</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-29\"><span class=\"crayon-v\">rbx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-30\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-31\"><span class=\"crayon-p\"># Opal</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-32\"><span class=\"crayon-v\">opal</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-34\"><span class=\"crayon-p\"># Minimalistic ruby implementation - ISO 30170:2012</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-35\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.0.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-36\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.1.0</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-37\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.2.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-38\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-39\"><span class=\"crayon-v\">mruby</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-40\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-41\"><span class=\"crayon-p\"># Ruby Enterprise Edition</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-42\"><span class=\"crayon-v\">ree</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.6</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-43\"><span class=\"crayon-v\">ree</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2012.02</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-44\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-45\"><span class=\"crayon-p\"># Topaz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-46\"><span class=\"crayon-v\">topaz</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-48\"><span class=\"crayon-p\"># MagLev</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-49\"><span class=\"crayon-v\">maglev</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-50\"><span class=\"crayon-v\">maglev</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.0.0</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-52\"><span class=\"crayon-p\"># Mac OS X Snow Leopard Or Newer</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-53\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-54\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.11</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-55\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.12</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-56\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">nightly</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-57\"><span class=\"crayon-v\">macruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-58\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-59\"><span class=\"crayon-p\"># IronRuby</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-60\"><span class=\"crayon-v\">ironruby</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.1.3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d68143110940-61\"><span class=\"crayon-v\">ironruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">head</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d68143110940-62\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p>可以看到最新的版本是2.4.1，本文安装2.3.0</p>\n<p>至此，我们升级了Ruby的版本。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d6f733253756\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst ~]# rvm install 2.3.0\r\nSearching for binary rubies, this might take some time.\r\nFound remote file https://rvm_io.global.ssl.fastly.net/binaries/centos/6/x86_64/ruby-2.3.0.tar.bz2\r\nChecking requirements for centos.\r\nInstalling requirements for centos.\r\nInstalling required packages: autoconf, automake, bison, libffi-devel, libtool, readline-devel, sqlite-devel, libyaml-devel..........\r\nRequirements installation successful.\r\nruby-2.3.0 - #configure\r\nruby-2.3.0 - #download\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100 21.9M  100 21.9M    0     0   266k      0  0:01:24  0:01:24 --:--:--  278k\r\nNo checksum for downloaded archive, recording checksum in user configuration.\r\nruby-2.3.0 - #validate archive\r\nruby-2.3.0 - #extract\r\nruby-2.3.0 - #validate binary\r\nruby-2.3.0 - #setup\r\nruby-2.3.0 - #gemset created /usr/local/rvm/gems/ruby-2.3.0@global\r\nruby-2.3.0 - #importing gemset /usr/local/rvm/gemsets/global.gems..............................\r\nruby-2.3.0 - #generating global wrappers........\r\nruby-2.3.0 - #gemset created /usr/local/rvm/gems/ruby-2.3.0\r\nruby-2.3.0 - #importing gemsetfile /usr/local/rvm/gemsets/default.gems evaluated to empty gem list\r\nruby-2.3.0 - #generating default wrappers........\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d6f733253756-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d6f733253756-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rvm install 2.3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-2\"><span class=\"crayon-e\">Searching </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">binary </span><span class=\"crayon-v\">rubies</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">might </span><span class=\"crayon-e\">take </span><span class=\"crayon-e\">some </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-3\"><span class=\"crayon-e\">Found </span><span class=\"crayon-e\">remote </span><span class=\"crayon-e\">file </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rvm_io.global.ssl.fastly.net/binaries/centos/6/x86_64/ruby-2.3.0.tar.bz2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-4\"><span class=\"crayon-e\">Checking </span><span class=\"crayon-e\">requirements </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">centos</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-5\"><span class=\"crayon-e\">Installing </span><span class=\"crayon-e\">requirements </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">centos</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-6\"><span class=\"crayon-e\">Installing </span><span class=\"crayon-e\">required </span><span class=\"crayon-v\">packages</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">autoconf</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">automake</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bison</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libffi</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libtool</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">readline</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sqlite</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libyaml</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">devel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-7\"><span class=\"crayon-e\">Requirements </span><span class=\"crayon-e\">installation </span><span class=\"crayon-v\">successful</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-8\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#configure</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-9\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#download</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Total</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Received</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Xferd  </span><span class=\"crayon-e\">Average </span><span class=\"crayon-e\">Speed   </span><span class=\"crayon-e\">Time    </span><span class=\"crayon-e\">Time     </span><span class=\"crayon-e\">Time  </span><span class=\"crayon-e\">Current</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-11\"><span class=\"crayon-e\">                                 </span><span class=\"crayon-e\">Dload  </span><span class=\"crayon-e\">Upload   </span><span class=\"crayon-e\">Total   </span><span class=\"crayon-e\">Spent    </span><span class=\"crayon-e\">Left  </span><span class=\"crayon-i\">Speed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-12\"><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.9M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.9M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">266k</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">278k</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-13\"><span class=\"crayon-e\">No </span><span class=\"crayon-e\">checksum </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">downloaded </span><span class=\"crayon-v\">archive</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">recording </span><span class=\"crayon-e\">checksum </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">user </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-14\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#validate archive</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-15\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#extract</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-16\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#validate binary</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-17\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#setup</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-18\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#gemset created /usr/local/rvm/gems/ruby-2.3.0@global</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-19\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#importing gemset /usr/local/rvm/gemsets/global.gems..............................</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-20\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#generating global wrappers........</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-21\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#gemset created /usr/local/rvm/gems/ruby-2.3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-22\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#importing gemsetfile /usr/local/rvm/gemsets/default.gems evaluated to empty gem list</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d6f733253756-23\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#generating default wrappers........</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d6f733253756-24\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p><strong>4）安装gem redis接口</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d73138078701\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst ~]# rvm use 2.3.0\r\nUsing /usr/local/rvm/gems/ruby-2.3.0\r\n[root@itfirst ~]# rvm remove 1.8.7\r\nruby-1.8.7-head - #already gone\r\nUsing /usr/local/rvm/gems/ruby-2.3.0\r\n[root@itfirst ~]#  ruby --version\r\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]\r\n[root@itfirst ~]# gem install redis\r\nFetching: redis-4.0.1.gem (100%)\r\nSuccessfully installed redis-4.0.1\r\nParsing documentation for redis-4.0.1\r\nInstalling ri documentation for redis-4.0.1\r\nDone installing documentation for redis after 0 seconds\r\n1 gem installed\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d73138078701-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d73138078701-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d73138078701-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d73138078701-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d73138078701-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d73138078701-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d73138078701-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d73138078701-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d73138078701-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d73138078701-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d73138078701-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d73138078701-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d73138078701-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d73138078701-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d73138078701-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d73138078701-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rvm use 2.3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d73138078701-2\"><span class=\"crayon-v\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d73138078701-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rvm remove 1.8.7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d73138078701-4\"><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.8.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">head</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#already gone</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d73138078701-5\"><span class=\"crayon-v\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d73138078701-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\">#  ruby --version</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d73138078701-7\"><span class=\"crayon-i\">ruby</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.3.0p0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2015</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">revision</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53290</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x86_64</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">linux</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d73138078701-8\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># gem install redis</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d73138078701-9\"><span class=\"crayon-v\">Fetching</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1.gem</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d73138078701-10\"><span class=\"crayon-e\">Successfully </span><span class=\"crayon-e\">installed </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d73138078701-11\"><span class=\"crayon-e\">Parsing </span><span class=\"crayon-e\">documentation </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d73138078701-12\"><span class=\"crayon-e\">Installing </span><span class=\"crayon-e\">ri </span><span class=\"crayon-e\">documentation </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d73138078701-13\"><span class=\"crayon-e\">Done </span><span class=\"crayon-e\">installing </span><span class=\"crayon-e\">documentation </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">redis </span><span class=\"crayon-i\">after</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">seconds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d73138078701-14\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gem </span><span class=\"crayon-i\">installed</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d73138078701-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p><strong>5）安装rubygems</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d77400733391\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# yum install -y rubygems\r\nLoaded plugins: fastestmirror, security\r\nSetting up Install Process\r\nLoading mirror speeds from cached hostfile\r\nbase                                                                                                                                                   | 3.7 kB     00:00     \r\ndidi_jenkins_enable                                                                                                                                    | 1.5 kB     00:00     \r\ndidi_op_toa_enable                                                                                                                                     | 1.5 kB     00:00     \r\ndidi_txjenkins_enable                                                                                                                                  | 1.5 kB     00:00     \r\ndidi_update                                                                                                                                            | 1.5 kB     00:00     \r\nepel                                                                                                                                                   | 4.3 kB     00:00     \r\nextras                                                                                                                                                 | 3.4 kB     00:00     \r\ntmprepo                                                                                                                                                | 1.5 kB     00:00     \r\nupdates                                                                                                                                                | 3.4 kB     00:00     \r\nPackage rubygems-1.3.7-5.el6.noarch already installed and latest version\r\nNothing to do</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d77400733391-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d77400733391-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d77400733391-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d77400733391-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d77400733391-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d77400733391-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d77400733391-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d77400733391-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d77400733391-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d77400733391-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d77400733391-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d77400733391-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d77400733391-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d77400733391-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d77400733391-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d77400733391-1\"><span class=\"crayon-p\"># yum install -y rubygems</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d77400733391-2\"><span class=\"crayon-e\">Loaded </span><span class=\"crayon-v\">plugins</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fastestmirror</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">security</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d77400733391-3\"><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">up </span><span class=\"crayon-e\">Install </span><span class=\"crayon-e\">Process</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d77400733391-4\"><span class=\"crayon-e\">Loading </span><span class=\"crayon-e\">mirror </span><span class=\"crayon-e\">speeds </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">cached </span><span class=\"crayon-e\">hostfile</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d77400733391-5\"><span class=\"crayon-v\">base</span><span class=\"crayon-h\">                                                                                                                                                   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d77400733391-6\"><span class=\"crayon-v\">didi_jenkins_enable</span><span class=\"crayon-h\">                                                                                                                                    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d77400733391-7\"><span class=\"crayon-v\">didi_op_toa_enable</span><span class=\"crayon-h\">                                                                                                                                     </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d77400733391-8\"><span class=\"crayon-v\">didi_txjenkins_enable</span><span class=\"crayon-h\">                                                                                                                                  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d77400733391-9\"><span class=\"crayon-v\">didi_update</span><span class=\"crayon-h\">                                                                                                                                            </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d77400733391-10\"><span class=\"crayon-v\">epel</span><span class=\"crayon-h\">                                                                                                                                                   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d77400733391-11\"><span class=\"crayon-v\">extras</span><span class=\"crayon-h\">                                                                                                                                                 </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d77400733391-12\"><span class=\"crayon-v\">tmprepo</span><span class=\"crayon-h\">                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d77400733391-13\"><span class=\"crayon-v\">updates</span><span class=\"crayon-h\">                                                                                                                                                </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d77400733391-14\"><span class=\"crayon-t\">Package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rubygems</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.3.7</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.el6.noarch</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">already </span><span class=\"crayon-e\">installed </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">latest </span><span class=\"crayon-e\">version</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d77400733391-15\"><span class=\"crayon-e\">Nothing </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p>到目前为止，我们的Ruby和运行redis-trib.rb需要的环境安装完成了。</p>\n<p> </p>\n<h3>3、Redis集群搭建</h3>\n<p>有了Ruby执行环境，可以开始将之前的6个实例组建成集群了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d7c237919795\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nredis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d7c237919795-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d7c237919795-1\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rb  </span><span class=\"crayon-v\">create</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">replicas</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>有三个master，有三个是slave。 后面跟上6个实例就好了，形式就是ip:port</p>\n<p>【此处有坑】</p>\n<p>第一坑</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d7f161210483\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n-bash: redis-trib.rb: command not found\r\n[root@itfirst src]# cp redis-trib.rb /usr/local/bin\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d7f161210483-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d7f161210483-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d7f161210483-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d7f161210483-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d7f161210483-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d7f161210483-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">command </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">found</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d7f161210483-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># cp redis-trib.rb /usr/local/bin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d7f161210483-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>需要将redis-trib.rb复制到/usr/local/bin目录下。</p>\n<p>第二坑</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d83635489987\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst bin]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n&gt;&gt;&gt; Creating cluster\r\n[ERR] Node 192.168.186.91:7000 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d83635489987-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d83635489987-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d83635489987-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d83635489987-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d83635489987-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">bin</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d83635489987-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Creating </span><span class=\"crayon-i\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d83635489987-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ERR</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Node</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">empty</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Either </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">node </span><span class=\"crayon-e\">already </span><span class=\"crayon-e\">knows </span><span class=\"crayon-e\">other </span><span class=\"crayon-e\">nodes</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">check </span><span class=\"crayon-e\">with </span><span class=\"crayon-e\">CLUSTER </span><span class=\"crayon-v\">NODES</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">contains </span><span class=\"crayon-e\">some </span><span class=\"crayon-e\">key </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">database</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d83635489987-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>踩完第一坑后，继续执行，发现了第二坑，还好有度娘，但是网上各种说法都有（主要参照了《<a href=\"http://blog.csdn.net/u014756827/article/details/52061987\" rel=\"nofollow\">极客on之路</a>》的博客），发现错误的原因是redis数据库没有清除。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d86665240907\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7001\r\n192.168.186.91:7001&gt; flushdb\r\nOK\r\n192.168.186.91:7001&gt; quit\r\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7002\r\n192.168.186.91:7002&gt; flushdb\r\nOK\r\n192.168.186.91:7002&gt; quit\r\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7003\r\n192.168.186.91:7003&gt; flushdb\r\nOK\r\n192.168.186.91:7003&gt; quit\r\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7004\r\n192.168.186.91:7004&gt; flushdb\r\nOK\r\n192.168.186.91:7004&gt; quit\r\n[root@itfirst src]# redis-cli -h 192.168.186.91 -p 7005\r\n192.168.186.91:7005&gt; flushdb\r\nOK\r\n192.168.186.91:7005&gt; quit\r\n[root@itfirst src]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n&gt;&gt;&gt; Creating cluster\r\n&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...\r\nUsing 3 masters:\r\n192.168.186.91:7000\r\n192.168.186.91:7001\r\n192.168.186.91:7002\r\nAdding replica 192.168.186.91:7003 to 192.168.186.91:7000\r\nAdding replica 192.168.186.91:7004 to 192.168.186.91:7001\r\nAdding replica 192.168.186.91:7005 to 192.168.186.91:7002\r\nM: 61b2b608177374fd0382c872f996a2c25f62daac 192.168.186.91:7000\r\n   slots:0-5460,9189 (5462 slots) master\r\nM: 50e678c98c31baa4ece1cba096cc34b4545456f3 192.168.186.91:7001\r\n   slots:5461-10922 (5462 slots) master\r\nM: b8dc855a92d1c9a6e358380286a757011c40601d 192.168.186.91:7002\r\n   slots:9189,10923-16383 (5462 slots) master\r\nS: 42392d8b4665500b3229b5c5b9dcebed311c9cdf 192.168.186.91:7003\r\n   replicates 61b2b608177374fd0382c872f996a2c25f62daac\r\nS: 4e8cd9bae1dc0ffa63a3b8315e3f92b0490e65f8 192.168.186.91:7004\r\n   replicates 50e678c98c31baa4ece1cba096cc34b4545456f3\r\nS: 3344981c3290c39b0d9f427842398c17de835293 192.168.186.91:7005\r\n   replicates b8dc855a92d1c9a6e358380286a757011c40601d\r\nCan I set the above configuration? (type 'yes' to accept): yes\r\n/usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis/client.rb:119:in `call': ERR Slot 9189 is already busy (Redis::CommandError)\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2764:in `block in method_missing'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:45:in `block in synchronize'\r\n\tfrom /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:45:in `synchronize'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2763:in `method_missing'\r\n\tfrom /usr/local/bin/redis-trib.rb:212:in `flush_node_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:776:in `block in flush_nodes_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:775:in `each'\r\n\tfrom /usr/local/bin/redis-trib.rb:775:in `flush_nodes_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:1296:in `create_cluster_cmd'\r\n\tfrom /usr/local/bin/redis-trib.rb:1696:in `&lt;main&gt;'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d86665240907-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d86665240907-56\">56</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-2\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-3\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-4\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-6\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-7\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-8\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-9\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-10\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-11\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-12\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-13\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7004</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-14\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-15\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-16\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-17\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -p 7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-18\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flushdb</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-19\"><span class=\"crayon-i\">OK</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-20\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-21\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-22\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Creating </span><span class=\"crayon-v\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-23\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Performing </span><span class=\"crayon-e\">hash </span><span class=\"crayon-e\">slots </span><span class=\"crayon-e\">allocation </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-24\"><span class=\"crayon-i\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">masters</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-25\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-26\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-27\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-28\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-29\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-30\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-31\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61b2b608177374fd0382c872f996a2c25f62daac</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-32\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9189</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-33\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50e678c98c31baa4ece1cba096cc34b4545456f3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-34\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-35\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b8dc855a92d1c9a6e358380286a757011c40601d</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-36\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9189</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-37\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">42392d8b4665500b3229b5c5b9dcebed311c9cdf</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-38\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61b2b608177374fd0382c872f996a2c25f62daac</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-39\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4e8cd9bae1dc0ffa63a3b8315e3f92b0490e65f8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-40\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50e678c98c31baa4ece1cba096cc34b4545456f3</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-41\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3344981c3290c39b0d9f427842398c17de835293</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-42\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">replicates </span><span class=\"crayon-e\">b8dc855a92d1c9a6e358380286a757011c40601d</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-43\"><span class=\"crayon-i\">Can</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">above </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">accept</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-44\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">119</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">call</span><span class=\"crayon-s\">': ERR Slot 9189 is already busy (Redis::CommandError)</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-45\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2764:in `block in method_missing'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-46\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">block </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">synchronize</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-47\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-48\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">synchronize</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-49\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2763:in `method_missing'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-50\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">212</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">flush_node</span><span class=\"crayon-sy\">_</span>config<span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-51\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:776:in `block in flush_nodes_config'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-52\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">775</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-st\">each</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-53\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:775:in `flush_nodes_config'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-54\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1296</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">create_cluster</span><span class=\"crayon-sy\">_</span>cmd<span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d86665240907-55\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:1696:in `&lt;main&gt;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d86665240907-56\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0102 seconds] -->\r\n<p>第三坑</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d8c404788759\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n&gt;&gt;&gt; Creating cluster\r\n&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...\r\nUsing 3 masters:\r\n192.168.186.91:7000\r\n192.168.186.91:7001\r\n192.168.186.91:7002\r\nAdding replica 192.168.186.91:7003 to 192.168.186.91:7000\r\nAdding replica 192.168.186.91:7004 to 192.168.186.91:7001\r\nAdding replica 192.168.186.91:7005 to 192.168.186.91:7002\r\nM: 61b2b608177374fd0382c872f996a2c25f62daac 192.168.186.91:7000\r\n   slots:0-5460,9189 (5462 slots) master\r\nM: 50e678c98c31baa4ece1cba096cc34b4545456f3 192.168.186.91:7001\r\n   slots:5461-10922 (5462 slots) master\r\nM: b8dc855a92d1c9a6e358380286a757011c40601d 192.168.186.91:7002\r\n   slots:9189,10923-16383 (5462 slots) master\r\nS: 42392d8b4665500b3229b5c5b9dcebed311c9cdf 192.168.186.91:7003\r\n   replicates 61b2b608177374fd0382c872f996a2c25f62daac\r\nS: 4e8cd9bae1dc0ffa63a3b8315e3f92b0490e65f8 192.168.186.91:7004\r\n   replicates 50e678c98c31baa4ece1cba096cc34b4545456f3\r\nS: 3344981c3290c39b0d9f427842398c17de835293 192.168.186.91:7005\r\n   replicates b8dc855a92d1c9a6e358380286a757011c40601d\r\nCan I set the above configuration? (type 'yes' to accept): yes\r\n/usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis/client.rb:119:in `call': ERR Slot 9189 is already busy (Redis::CommandError)\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2764:in `block in method_missing'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:45:in `block in synchronize'\r\n\tfrom /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:45:in `synchronize'\r\n\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2763:in `method_missing'\r\n\tfrom /usr/local/bin/redis-trib.rb:212:in `flush_node_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:776:in `block in flush_nodes_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:775:in `each'\r\n\tfrom /usr/local/bin/redis-trib.rb:775:in `flush_nodes_config'\r\n\tfrom /usr/local/bin/redis-trib.rb:1296:in `create_cluster_cmd'\r\n\tfrom /usr/local/bin/redis-trib.rb:1696:in `&lt;main&gt;'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d8c404788759-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d8c404788759-36\">36</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Creating </span><span class=\"crayon-v\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Performing </span><span class=\"crayon-e\">hash </span><span class=\"crayon-e\">slots </span><span class=\"crayon-e\">allocation </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-4\"><span class=\"crayon-i\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">masters</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-5\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-6\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-7\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-8\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-9\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-10\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-11\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61b2b608177374fd0382c872f996a2c25f62daac</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-12\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9189</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-13\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50e678c98c31baa4ece1cba096cc34b4545456f3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-14\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-15\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b8dc855a92d1c9a6e358380286a757011c40601d</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-16\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9189</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-17\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">42392d8b4665500b3229b5c5b9dcebed311c9cdf</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-18\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61b2b608177374fd0382c872f996a2c25f62daac</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-19\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4e8cd9bae1dc0ffa63a3b8315e3f92b0490e65f8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50e678c98c31baa4ece1cba096cc34b4545456f3</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-21\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3344981c3290c39b0d9f427842398c17de835293</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-22\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">replicates </span><span class=\"crayon-e\">b8dc855a92d1c9a6e358380286a757011c40601d</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-23\"><span class=\"crayon-i\">Can</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">above </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">accept</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-24\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">119</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">call</span><span class=\"crayon-s\">': ERR Slot 9189 is already busy (Redis::CommandError)</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-25\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2764:in `block in method_missing'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-26\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">block </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">synchronize</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-27\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-28\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rvm</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ruby</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.3.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gems</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.0.1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">synchronize</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-29\"><span class=\"crayon-s\">\tfrom /usr/local/rvm/gems/ruby-2.3.0/gems/redis-4.0.1/lib/redis.rb:2763:in `method_missing'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-30\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">212</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">flush_node</span><span class=\"crayon-sy\">_</span>config<span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-31\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:776:in `block in flush_nodes_config'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-32\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">775</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-st\">each</span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-33\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:775:in `flush_nodes_config'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-34\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rb</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1296</span><span class=\"crayon-o\">:</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">create_cluster</span><span class=\"crayon-sy\">_</span>cmd<span class=\"crayon-s\">'</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d8c404788759-35\"><span class=\"crayon-s\">\tfrom /usr/local/bin/redis-trib.rb:1696:in `&lt;main&gt;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d8c404788759-36\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0082 seconds] -->\r\n<p>还是度娘靠谱，在《<a href=\"http://blog.csdn.net/tengdazhang770960436/article/details/49962979\" rel=\"nofollow\">redis 跨机器集群启动出错</a>》博客中找到了答案。</p>\n<p>这是由于之间创建集群没有成功,需要将nodes.conf和dir里面的文件全部删除。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d91817605482\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst 7000]# find / -name \"nodes-7000.conf\"\r\n/usr/local/redis-3.2.3/src/nodes-7000.conf\r\n[root@itfirst 7000]# cd ../../\r\n[root@itfirst src]# ls\r\nadlist.c     bitops.o      dict.h         lzf_c.o          notify.c         redis-benchmark.c  rio.c           slowlog.h       t_zset.o\r\nadlist.h     blocked.c     dict.o         lzf_d.c          notify.o         redis-benchmark.o  rio.h           slowlog.o       util.c\r\nadlist.o     blocked.o     dump.rdb       lzf_d.o          object.c         redis-check-aof    rio.o           solarisfixes.h  util.h\r\nae.c         cluster.c     endianconv.c   lzf.h            object.o         redis-check-aof.c  scripting.c     sort.c          util.o\r\nae_epoll.c   cluster.h     endianconv.h   lzfP.h           pqsort.c         redis-check-aof.o  scripting.o     sort.o          valgrind.sup\r\nae_evport.c  cluster.o     endianconv.o   Makefile         pqsort.h         redis-check-rdb    sdsalloc.h      sparkline.c     version.h\r\nae.h         config.c      fmacros.h      Makefile.dep     pqsort.o         redis-check-rdb.c  sds.c           sparkline.h     ziplist.c\r\nae_kqueue.c  config.h      geo.c          memtest.c        pubsub.c         redis-check-rdb.o  sds.h           sparkline.o     ziplist.h\r\nae.o         config.o      geo.h          memtest.o        pubsub.o         redis-cli          sds.o           syncio.c        ziplist.o\r\nae_select.c  crc16.c       geo.o          mkreleasehdr.sh  quicklist.c      redis-cli.c        sentinel.c      syncio.o        zipmap.c\r\nanet.c       crc16.o       help.h         multi.c          quicklist.h      redis-cli.o        sentinel.o      testhelp.h      zipmap.h\r\nanet.h       crc64.c       hyperloglog.c  multi.o          quicklist.o      redis_cluster      server.c        t_hash.c        zipmap.o\r\nanet.o       crc64.h       hyperloglog.o  networking.c     rand.c           redis-sentinel     server.h        t_hash.o        zmalloc.c\r\naof.c        crc64.o       intset.c       networking.o     rand.h           redis-server       server.o        t_list.c        zmalloc.h\r\naof.o        db.c          intset.h       nodes-7000.conf  rand.o           redis-trib.rb      setproctitle.c  t_list.o        zmalloc.o\r\nasciilogo.h  db.o          intset.o       nodes-7001.conf  rdb.c            release.c          setproctitle.o  t_set.c\r\nbio.c        debug.c       latency.c      nodes-7002.conf  rdb.h            release.h          sha1.c          t_set.o\r\nbio.h        debugmacro.h  latency.h      nodes-7003.conf  rdb.o            release.o          sha1.h          t_string.c\r\nbio.o        debug.o       latency.o      nodes-7004.conf  redisassert.h    replication.c      sha1.o          t_string.o\r\nbitops.c     dict.c        lzf_c.c        nodes-7005.conf  redis-benchmark  replication.o      slowlog.c       t_zset.c\r\n[root@itfirst src]# rm -rf nodes-700*\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d91817605482-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d91817605482-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7000</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># find / -name \"nodes-7000.conf\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.2.3</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7000.conf</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">itfirst</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7000</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># cd ../../</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># ls</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-5\"><span class=\"crayon-v\">adlist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">bitops</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">dict</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">lzf_c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">notify</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">benchmark</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">slowlog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">t_zset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-6\"><span class=\"crayon-v\">adlist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">blocked</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">dict</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">lzf_d</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">notify</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">benchmark</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">slowlog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-7\"><span class=\"crayon-v\">adlist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">blocked</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">dump</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rdb       </span><span class=\"crayon-v\">lzf_d</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">aof    </span><span class=\"crayon-v\">rio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">solarisfixes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-8\"><span class=\"crayon-v\">ae</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">endianconv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">lzf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">            </span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aof</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">scripting</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">sort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-9\"><span class=\"crayon-v\">ae_epoll</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">endianconv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">lzfP</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">pqsort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aof</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">scripting</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">sort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">valgrind</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sup</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-10\"><span class=\"crayon-v\">ae_evport</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">cluster</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">endianconv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">Makefile         </span><span class=\"crayon-v\">pqsort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">rdb    </span><span class=\"crayon-v\">sdsalloc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">sparkline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">version</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-11\"><span class=\"crayon-v\">ae</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">fmacros</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">Makefile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dep     </span><span class=\"crayon-v\">pqsort</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">sds</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">sparkline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">ziplist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-12\"><span class=\"crayon-v\">ae_kqueue</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">geo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">memtest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">pubsub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">check</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">sds</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">sparkline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">ziplist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-13\"><span class=\"crayon-v\">ae</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">geo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">memtest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">pubsub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">cli          </span><span class=\"crayon-v\">sds</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">syncio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">ziplist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-14\"><span class=\"crayon-v\">ae_select</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">crc16</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">geo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">mkreleasehdr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sh  </span><span class=\"crayon-v\">quicklist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sentinel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">syncio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zipmap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-15\"><span class=\"crayon-v\">anet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">crc16</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">help</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">multi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">quicklist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sentinel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">testhelp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">zipmap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-16\"><span class=\"crayon-v\">anet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">crc64</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">hyperloglog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">multi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">quicklist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">redis_cluster      </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">t_hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zipmap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-17\"><span class=\"crayon-v\">anet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">crc64</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">hyperloglog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">networking</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">rand</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sentinel     </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">t_hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zmalloc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-18\"><span class=\"crayon-v\">aof</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">crc64</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">intset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">networking</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">rand</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">server       </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">t_list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zmalloc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-19\"><span class=\"crayon-v\">aof</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">intset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7000.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rand</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">           </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">trib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rb      </span><span class=\"crayon-v\">setproctitle</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">t_list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">zmalloc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-20\"><span class=\"crayon-v\">asciilogo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">intset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7001.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">release</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">setproctitle</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">t_set</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-21\"><span class=\"crayon-v\">bio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">debug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">latency</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7002.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">release</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">t_set</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-22\"><span class=\"crayon-v\">bio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">debugmacro</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">latency</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7003.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">rdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">release</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">t_string</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-23\"><span class=\"crayon-v\">bio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">debug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">latency</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7004.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">redisassert</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">replication</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">t_string</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-24\"><span class=\"crayon-v\">bitops</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">dict</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lzf_c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7005.conf</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">benchmark  </span><span class=\"crayon-v\">replication</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">slowlog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">t_zset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d91817605482-25\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># rm -rf nodes-700*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d91817605482-26\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0153 seconds] -->\r\n<p>然后重启redis服务。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d96111703024\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 \r\n&gt;&gt;&gt; Creating cluster\r\n&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...\r\nUsing 3 masters:\r\n192.168.186.91:7000\r\n192.168.186.91:7001\r\n192.168.186.91:7002\r\nAdding replica 192.168.186.91:7003 to 192.168.186.91:7000\r\nAdding replica 192.168.186.91:7004 to 192.168.186.91:7001\r\nAdding replica 192.168.186.91:7005 to 192.168.186.91:7002\r\nM: 319da27d8668a15d2d2d02afe433247694343459 192.168.186.91:7000\r\n   slots:0-5460 (5461 slots) master\r\nM: 3da756265e301ac0210760f13e990473f87a3017 192.168.186.91:7001\r\n   slots:5461-10922 (5462 slots) master\r\nM: 6f336da48c892d8e0c541a864765978ebfbca6d5 192.168.186.91:7002\r\n   slots:10923-16383 (5461 slots) master\r\nS: ff4cf9d8a141d85c478b9af0358c93bca342c236 192.168.186.91:7003\r\n   replicates 319da27d8668a15d2d2d02afe433247694343459\r\nS: 43c2e0d7799e84b449803a68d557c3431e9e047e 192.168.186.91:7004\r\n   replicates 3da756265e301ac0210760f13e990473f87a3017\r\nS: 3f174fae106cb6cf7e7f21ed844895ed7c18f793 192.168.186.91:7005\r\n   replicates 6f336da48c892d8e0c541a864765978ebfbca6d5\r\nCan I set the above configuration? (type 'yes' to accept): yes\r\n&gt;&gt;&gt; Nodes configuration updated\r\n&gt;&gt;&gt; Assign a different config epoch to each node\r\n&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster\r\nWaiting for the cluster to join....\r\n&gt;&gt;&gt; Performing Cluster Check (using node 192.168.186.91:7000)\r\nM: 319da27d8668a15d2d2d02afe433247694343459 192.168.186.91:7000\r\n   slots:0-5460 (5461 slots) master\r\nM: 3da756265e301ac0210760f13e990473f87a3017 192.168.186.91:7001\r\n   slots:5461-10922 (5462 slots) master\r\nM: 6f336da48c892d8e0c541a864765978ebfbca6d5 192.168.186.91:7002\r\n   slots:10923-16383 (5461 slots) master\r\nM: ff4cf9d8a141d85c478b9af0358c93bca342c236 192.168.186.91:7003\r\n   slots: (0 slots) master\r\n   replicates 319da27d8668a15d2d2d02afe433247694343459\r\nM: 43c2e0d7799e84b449803a68d557c3431e9e047e 192.168.186.91:7004\r\n   slots: (0 slots) master\r\n   replicates 3da756265e301ac0210760f13e990473f87a3017\r\nM: 3f174fae106cb6cf7e7f21ed844895ed7c18f793 192.168.186.91:7005\r\n   slots: (0 slots) master\r\n   replicates 6f336da48c892d8e0c541a864765978ebfbca6d5\r\n[OK] All nodes agree about slots configuration.\r\n&gt;&gt;&gt; Check for open slots...\r\n&gt;&gt;&gt; Check slots coverage...\r\n[OK] All 16384 slots covered.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d96111703024-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d96111703024-48\">48</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-trib.rb  create  --replicas  1 192.168.186.91:7000 192.168.186.91:7001 192.168.186.91:7002 192.168.186.91:7003 192.168.186.91:7004 192.168.186.91:7005 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Creating </span><span class=\"crayon-v\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Performing </span><span class=\"crayon-e\">hash </span><span class=\"crayon-e\">slots </span><span class=\"crayon-e\">allocation </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-4\"><span class=\"crayon-i\">Using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">masters</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-5\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-6\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-7\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-8\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-9\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-10\"><span class=\"crayon-e\">Adding </span><span class=\"crayon-i\">replica</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-11\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-12\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-13\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-14\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-15\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-16\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-17\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ff4cf9d8a141d85c478b9af0358c93bca342c236</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-18\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-19\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">43c2e0d7799e84b449803a68d557c3431e9e047e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-21\"><span class=\"crayon-v\">S</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3f174fae106cb6cf7e7f21ed844895ed7c18f793</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-22\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-23\"><span class=\"crayon-i\">Can</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">above </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">accept</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-24\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Nodes </span><span class=\"crayon-e\">configuration </span><span class=\"crayon-v\">updated</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-25\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Assign</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">different </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">epoch </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">each</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-26\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Sending </span><span class=\"crayon-e\">CLUSTER </span><span class=\"crayon-e\">MEET </span><span class=\"crayon-e\">messages </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">join </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">cluster</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-27\"><span class=\"crayon-e\">Waiting </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">cluster </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">join</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-28\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Performing </span><span class=\"crayon-e\">Cluster </span><span class=\"crayon-e\">Check</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">using </span><span class=\"crayon-i\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-29\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-30\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-31\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-32\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5462</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-33\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-34\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5461</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-35\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ff4cf9d8a141d85c478b9af0358c93bca342c236</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-36\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-37\"><span class=\"crayon-e\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-38\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">43c2e0d7799e84b449803a68d557c3431e9e047e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-39\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-40\"><span class=\"crayon-e\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-41\"><span class=\"crayon-v\">M</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3f174fae106cb6cf7e7f21ed844895ed7c18f793</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-42\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">slots</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-43\"><span class=\"crayon-e\">   </span><span class=\"crayon-i\">replicates</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-44\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">All </span><span class=\"crayon-e\">nodes </span><span class=\"crayon-e\">agree </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">slots </span><span class=\"crayon-v\">configuration</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-45\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Check </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open </span><span class=\"crayon-v\">slots</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-46\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Check </span><span class=\"crayon-e\">slots </span><span class=\"crayon-v\">coverage</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d96111703024-47\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">All</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16384</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">slots </span><span class=\"crayon-v\">covered</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d96111703024-48\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0092 seconds] -->\r\n<p> </p>\n<h3>4、验证集群状态</h3>\n<p>登录集群客户端，-c标识以集群方式登录</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d9c423103063\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@itfirst src]# redis-cli -h 192.168.186.91 -c -p 7002</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9c423103063-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d9c423103063-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">itfirst </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># redis-cli -h 192.168.186.91 -c -p 7002</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>查看集群状态</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8398937d9f831430649\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n192.168.186.91:7002&gt; cluster info\r\ncluster_state:ok\r\ncluster_slots_assigned:16384\r\ncluster_slots_ok:16384\r\ncluster_slots_pfail:0\r\ncluster_slots_fail:0\r\ncluster_known_nodes:6\r\ncluster_size:3\r\ncluster_current_epoch:6\r\ncluster_my_epoch:3\r\ncluster_stats_messages_sent:124174\r\ncluster_stats_messages_received:124174\r\n192.168.186.91:7002&gt; cluster nodes\r\n319da27d8668a15d2d2d02afe433247694343459 192.168.186.91:7000 master - 0 1519465974307 1 connected 0-5460\r\n3f174fae106cb6cf7e7f21ed844895ed7c18f793 192.168.186.91:7005 slave 6f336da48c892d8e0c541a864765978ebfbca6d5 0 1519465971278 6 connected\r\n6f336da48c892d8e0c541a864765978ebfbca6d5 192.168.186.91:7002 myself,master - 0 0 3 connected 10923-16383\r\n3da756265e301ac0210760f13e990473f87a3017 192.168.186.91:7001 master - 0 1519465972288 2 connected 5461-10922\r\n43c2e0d7799e84b449803a68d557c3431e9e047e 192.168.186.91:7004 slave 3da756265e301ac0210760f13e990473f87a3017 0 1519465973298 5 connected\r\nff4cf9d8a141d85c478b9af0358c93bca342c236 192.168.186.91:7003 slave 319da27d8668a15d2d2d02afe433247694343459 0 1519465969258 4 connected\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8398937d9f831430649-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8398937d9f831430649-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-1\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cluster </span><span class=\"crayon-e\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-2\"><span class=\"crayon-v\">cluster_state</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">ok</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-3\"><span class=\"crayon-v\">cluster_slots_assigned</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16384</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-4\"><span class=\"crayon-v\">cluster_slots_ok</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16384</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-5\"><span class=\"crayon-v\">cluster_slots_pfail</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-6\"><span class=\"crayon-v\">cluster_slots_fail</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-7\"><span class=\"crayon-v\">cluster_known_nodes</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-8\"><span class=\"crayon-v\">cluster_size</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-9\"><span class=\"crayon-v\">cluster_current_epoch</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-10\"><span class=\"crayon-v\">cluster_my_epoch</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-11\"><span class=\"crayon-v\">cluster_stats_messages_sent</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">124174</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-12\"><span class=\"crayon-v\">cluster_stats_messages_received</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">124174</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-13\"><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cluster </span><span class=\"crayon-i\">nodes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-14\"><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">master</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465974307</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5460</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-15\"><span class=\"crayon-cn\">3f174fae106cb6cf7e7f21ed844895ed7c18f793</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7005</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">slave</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465971278</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-16\"><span class=\"crayon-cn\">6f336da48c892d8e0c541a864765978ebfbca6d5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">myself</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">master</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10923</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16383</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-17\"><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7001</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">master</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465972288</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5461</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10922</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-18\"><span class=\"crayon-cn\">43c2e0d7799e84b449803a68d557c3431e9e047e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7004</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">slave</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3da756265e301ac0210760f13e990473f87a3017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465973298</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">connected</span></div><div class=\"crayon-line\" id=\"crayon-5ab8398937d9f831430649-19\"><span class=\"crayon-i\">ff4cf9d8a141d85c478b9af0358c93bca342c236</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192.168.186.91</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7003</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">slave</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">319da27d8668a15d2d2d02afe433247694343459</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1519465969258</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connected</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8398937d9f831430649-20\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113760\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113760votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113760\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/c766feed221138f7946130756cddfc7e86e388b4.jpg", "fav_nums": 3, "title": "Redis 集群部署及踩过的坑", "comment_nums": 0, "tags": "IT技术,Redis,数据库"}/n{"create_date": "2018/03/08", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2011/11/go-out-of-the-three-errors-of-the-seo.jpg"], "url": "http://blog.jobbole.com/113726/", "url_object_id": "7cb32f69be9fc1f56a8f1a54e4cf6b00", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">Sam哥哥</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><h3>索引表设计</h3>\n<p>在电商项目中，物理库存系统是个极其重要的系统，订单支付后，就会开始来占用物理库存。一般情况下，库存系统都是要分库的，因为主要的操作是写操作，例如占用/释放/取消等写操作。使用分库可以降低数据库写的压力。尽管写操作为主，但是读操作也是有的。</p>\n<p>比如说，库存占用的时候，得先查询是否有库存，而这个查询操作并不都会带上分库因子(用于路由到具体的某个数据库)，而是一些比较宽松的查询条件，这些查询条件对应的数据可能分布在不同的数据库上。这个时候为了查询的方便，会构建一个索引表。这个索引表是<strong>存在另外的单独的一个数据库中</strong>，不会再分库了的。</p>\n<p>索引表的设计也分不同情况，大体可以分三种。<br>\n1、查询字段+数据库主键</p>\n<blockquote><p>把查询字段放到索引表，还需要把对应的数据库主键ID也放置进去。当查询请求到来时，根据查询条件找出对应的数据主键，再根据数据主键路由到对应的存有完整业务数据的数据分库上。这种方案呢。索引表占用空间小，可以支撑很久。但是要找出业务数据，还是需要路由到分库上。另外，如果要把索引表的数据存储到ES搜索引擎上的话，这种方式就不行了。因为索引表中没有外部系统要的业务数据。所以当时的库存系统没有使用这种索引表设计方案。</p></blockquote>\n<p>2、查询字段+数据库主键+需要展示的业务字段</p>\n<blockquote><p>这种方案呢。当请求到来的时候，直接查询索引表即可。无需根据主键路由到分库了。同时如果要结合ES的话。可以直接把索引表的数据弄到ES上即可。后续直接让ES暴露查询接口即可。目前我在唯品会参与的物理库存项目中，是使用这种方式的。但是这个方案也有个缺点。就是索引表的体积比较大，后续数据量一大的话，也是个问题。能不能优化一下呢？</p></blockquote>\n<p>3、索引表拆分</p>\n<blockquote><p>上面说到的第二种方案，索引表的膨胀可能很快，可以考虑将索引表拆分。比如说：索引表只是保存查询条件和主键，而需要展示给外部系统的数据，另外存储在单独的表上。比如叫index_detail表。这个表拥有索引表的主键。这样的话，当查询请求到来的时候，先从索引表查询到主键，再根据主键从index_detail表中查询出数据。当然这样做的话。ES的数据来源就变成多张表了，不过这是可以接受的。</p></blockquote>\n<h3>如何把业务数据写入到索引表</h3>\n<h4 id=\"使用mq\">使用MQ</h4>\n<p>一般来说，构建索引数据是使用单独一个应用来做的。比如叫data-index域。这个域会从消息队列中读取消息，用于构建索引数据。当业务数据发生变化后，生产者发送MQ消息到队列上。<br>\n这里的消息设计也分两种情况。一种是消息只是带有数据主键和操作类型(ADD/Update/DELETE),消费者拿到主键后再去DB获取完整的数据并插入到索引表中。另一种方案呢，是消息包含了大部分需要的字段，消费者拿到消息后直接把数据插入到索引表中。这两种消息设计，我在实际项目中都有用过。</p>\n<h4 id=\"直接操作db\">直接操作DB</h4>\n<p>这种方案呢就比较粗暴，直接配置一个索引表库的数据源，当业务数据发生变化时，使用Mybatis或者JDBC把数据更新到索引表中。一般不建议这么做，一来构建索引数据的逻辑跟数据的CRUD操作融合在一起了。二来，操作其他数据库的数据，要么通过接口的方式，要么由单独的域来做。建议还是使用MQ的方式来构建索引数据。</p>\n<h3>如何把索引表数据弄到ES上</h3>\n<h4 id=\"监听数据库表的数据变化\">监听数据库表的数据变化</h4>\n<p>像在唯品会这边，自研了一个叫VDP的组件，使用storm job去监听索引表数据的变化，一旦有变化，就把数据同步到队列中，ES直接从队列中获取数据，并存储到ES上。<br>\n这种方案的好处是，我们无需写任何代码，数据自动可以同步到ES上。</p>\n<h4 id=\"使用mq-1\">使用MQ</h4>\n<p>如果公司内部没有开发VDP这样的组件，可以通过发送MQ消息的方式来将索引表的数据同步数据到ES上。</p>\n<h4 id=\"让es暴露cud接口\">让ES暴露CUD接口</h4>\n<p>另外一种方案是，让ES暴露CUD接口，用于同步索引表数据。但是这样就跟ES耦合在一块了。不太推荐这么做。</p>\n<h3>进一步的思考</h3>\n<p>1、ES不支持Group By这样的操作，所以在构建索引表的时候，可以事先计算好Group By的一些统计数据，并存储到索引表中；<br>\n2、一些后台应用中，如果数据库表的数量已经很大，好几个亿了，并且查询的SQL还非常变态，用数据库已经无法支持了，那么可以使用ES，查询速度快，也支持一些统计操作；<br>\n3、使用ES输出数据时，也有个坑。经常会拿到脏数据的。例如当数据发送变化后，构建索引数据并把索引数据同步到ES上是需要时间的，但是我们后台通常有将数据下架的操作，下架的操作操作完后，再次点击查询按钮，可能还是看到脏数据，因为数据同步到ES上没那么快。现在我还没想到很好的办法来解决这个问题。欢迎网友提些建议。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/54f7206fd1f1907bec78ddf32f50d66d.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113726\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113726votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113726\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">Sam哥哥</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/3660a090181b2b6ae3bd8c07d393aa36.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            互联网技术爱好者，目前就职于广州唯品会担任JAVA高级开发。个人的csdn技术博客如下：http://blog.csdn.net/linsongbin1本人伯乐在线的文章，都出自这个csdn博客        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/sam-2/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/8cd9b25acfe438d20acd37accc39f6be8b8924dc.jpg", "fav_nums": 1, "title": "索引表和 ES 的一点点思考", "comment_nums": 0, "tags": "IT技术,搜索,数据库"}/n{"create_date": "2018/03/22", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/db3f0f9a2c81173f5758eed4074b7543.jpg"], "url": "http://blog.jobbole.com/113778/", "url_object_id": "7a3fd4e360713292fb09393642fffc46", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.gamelook.com.cn/2018/03/323982\">GameLook</a>   </div><p>GameLook报道/有人说，游戏行业的竞争越来越激烈，游戏数量的增加使得曝光率问题日益严重，但在Jeff Vogel看来，真正热爱游戏研发的人，是不会抱怨这些问题的，因为大多数人做开发者都是从1-5年的时间看待自己的游戏研发职业生涯，而真正想要把游戏当作职业的人，往往是考虑40年或者更长的周期。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/db3f0f9a2c81173f5758eed4074b7543.jpg\" alt=\"\" width=\"564\" height=\"293\"></p>\n<p>在24年的独立游戏研发生涯中，Spiderweb Software创始人Jeff Vogel学到了很多东西。在3月20日举行的GDC独立游戏峰会上，他分享了一些自己的心得，有些观点让人十分意外。</p>\n<p><strong>游戏是朝阳产业，创新不是唯一出路</strong></p>\n<p>Vogel强调，“游戏行业还是个朝阳产业，没有人无所不知，我们还有很多东西都需要弄明白，比如，如何设计这些游戏，如何创造、测试以及销售这些产品，如何为游戏做营销，如何给1亿美元预算的项目增加开箱子玩法而又不影响发布之后的口碑？”他提到自己的第一个游戏项目时候说，“这个项目并没有耗时太久，我当时有了一个想法，也就是小时候就喜欢的那些游戏，所以我要做的就是把小时候喜欢的游戏都回顾一遍，然后从每个游戏里汲取最好的创意。按照我的方法，我希望把它们变成让我觉得满意的游戏”。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3ea9cfb97b6ce8d6c4919b5e34eb106f.jpg\" alt=\"\" width=\"698\" height=\"566\"></p>\n<p style=\"text-align: center\">Jeff Vogel的第一款游戏截图</p>\n<p>独立游戏非常适合做创新，但创新并不是唯一的出路。你必须知道，我们游戏行业的每个人都是站在巨人的肩膀上，所有的玩法都是在原有的玩法之上演变而来，我只了解自己喜欢的，然后复制这个想法，这就是我的创意过程，他鼓励其他开发者们用类似的方式，按照自己的个人需求去寻找创意，有人把游戏创意说的很玄，比如追求自己的灵感，这样的建议，但我的建议是千万不要这样做，这是一个非常现实的建议，我来说说原因。</p>\n<p>大多数人思考自己在游戏行业生涯的时候，往往是从1-5年的角度考虑问题，对于一些刚开始做游戏研发的人们来说，追寻自己的灵感似乎是非常合理的事情。但是，如果你把自己从事独立游戏研发行业的期限延长到40年或者更久的时间考虑，或许会有所帮助。</p>\n<p>这是一个特别长的时间，如果你在一个行业工作这么久，就会达到最高的工作效率，因为你需要维持生存，需要一个对应的生活方式，一个长久的想法，一个可持续的过程，保持自己不至于破产，因为，如果你因为一些想法而失去了立足之本，在接下来的40年里，它都会让你不断吃亏。</p>\n<p><strong>独立游戏要注重体验，远离消极玩家</strong></p>\n<p>当然，Vogel的创意也并不只是抄袭其他游戏的玩法，他对自己游戏的要求也是相对较高的，比如研发续作的时候，前作25%最差的部分需要被替换，提高整体游戏质量。他非常喜欢重复使用资源、代码和引擎，并认为所有人都不应该因此感到羞辱，比如有一个狼的icon，他在15款不同的游戏里使用过，“人们一直拿这个梗开我的玩笑，但我还是没有因此失业”。</p>\n<p>虽然Spiderweb的游戏有一定的用户群，而且口碑还不错，但这些游戏对于更大的用户群缺乏吸引力，有很大一部分原因是画质无法和3A游戏媲美，但Vogel说，“我非常反感所有人吐槽我的画面质量不够好，我也是投入了资金，专门招聘了美术师的，有些美术资源也是从比较大的渠道获得的，然而还是有人经常说，我的游戏画面很差，我以后再也不会浪费精力去专门提高美术质量了”。</p>\n<p>对于独立游戏开发者而言，这种批评的声音也是经常遇到的，人性有一部分是刻薄的，会对某些事物提出不合理的需求，而且在Steam这样的分销平台没有出现之前，Vogel做电话销售的时候就遇到过类似的问题。而到了互联网时代，这种问题就更加严重，“通常最愤怒的人不是完全匿名的，他们可能是五年前你的游戏最忠实的粉丝，然后你对游戏做出了改变，而且改掉的恰好是他们最喜欢的东西，他们就不再是你的粉丝，你要知道，有时候爱与恨之间的界限很小”。</p>\n<p>作为一个想要长期在游戏行业生存的开发者，Vogel表示，远离各种形式的骚扰是很重要的，作为一个成年人，虽然你很少会被人轻易激怒，但仍有很多事情会让你抓狂，所以Vogel基本上不会看自己的游戏在Steam平台的评论，也不访问论坛，如果被人喷，他还会暂时不登陆Twitter，等待事情平息了之后再登录，如果与一些玩家的关系闹僵，他会毫不犹豫的放弃这部分用户。Vogel说，“不要怕得罪用户，他们说客户总是对的，但实际上并非如此，用户一直是错的。但差别在于，你永远吵不赢他们。有时候你不得不对一部分玩家说，‘我的游戏不适合你，所以我不能增加你要的功能、不能做这样的资料片、不能满足你的要求’，对于你无法让他们满意的用户，退款是最好的方法”。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/b87866fb081fe1d1caf5bc8b5b63273f.jpg\" alt=\"\" width=\"714\" height=\"401\"></p>\n<p style=\"text-align: center\">《Geneforge 3》截图</p>\n<p>对于论坛管理，他说，“如果有人在论坛挑事，直接封掉就是了。但如果有人说，‘这些人又不会影响你的生意，不应该封他们’，那你可以连这些人一起封掉，这些消极的负面声音只会给你的社区带来不利影响，真正支持你的玩家会理解你的做法”。</p>\n<p>和所有的工作室一样，Spiderweb也经历了起伏，Vogel指出，2004年是最艰难的时候，那一年他的两款游戏，《Blades of Avernum》和《Geneforge 3》的销量都不佳。</p>\n<p>有人说，游戏开发者就像是艺术家，遭遇挫折在所难免，但Vogel认为，作为艺术家，你必须成长，“我们更像是玩具制造者，我们卖的是娱乐体验，我们的作品是用来给人们的大脑带来消遣的，我们卖的是惊喜，而自满、平淡无奇和重复会扼杀惊喜。如果你想做续作，很好，但你的续作最好是加入一些新东西，而且是越早越好，因为，如果玩家们开始发现你的需走只是重复，那么就会以拒绝购买的方式让你看到他们的答案”。</p>\n<p>最后，Vogel还提醒同行们不要过度消耗自己的健康，“不要因为熬夜工作而感到自豪，你需要睡眠才能活的长久，最好是挑一把好的椅子，因为有一天如果你的脊椎不行了，就会追悔莫及”。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113778\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113778votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113778\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/e987a29d5f8519c5dcfb6963d8ba061ebf03b879.jpg", "fav_nums": 1, "title": "从业 24 年独立开发者：大多数同行都只看 5 年以内", "comment_nums": 0, "tags": "职场,游戏"}/n{"create_date": "2018/03/23", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "url": "http://blog.jobbole.com/113780/", "url_object_id": "9f16c4dc5a6cd2f4b07fef3690f49f8b", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://linuxtechlab.com/du-df-commands-examples/\">shusain</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9457-1.html\">Linux中国/geekpi</a>   </div><p>在本文中，我将讨论 <code>du</code> 和 <code>df</code> 命令。<code>du</code> 和 <code>df</code> 命令都是 Linux 系统的重要工具，来显示 Linux 文件系统的磁盘使用情况。这里我们将通过一些例子来分享这两个命令的用法。</p>\n<ul>\n<li><strong>（推荐阅读：<a href=\"http://linuxtechlab.com/files-transfer-scp-rsync-commands/\">使用 scp 和 rsync 命令传输文件</a>）</strong></li>\n<li><strong>（另请阅读：<a href=\"http://linuxtechlab.com/linux-cloning-disks-using-dd-cat-commands/\">使用 dd 和 cat 命令为 Linux 系统克隆磁盘</a>）</strong></li>\n</ul>\n<h3 id=\"toc_1\">du 命令</h3>\n<p><code>du</code>（disk usage 的简称）是用于查找文件和目录的磁盘使用情况的命令。<code>du</code> 命令在与各种选项一起使用时能以多种格式提供结果。</p>\n<p>下面是一些例子：</p>\n<h4 id=\"toc_2\">1、 得到一个目录下所有子目录的磁盘使用概况</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82b28c9fb1954471363\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82b28c9fb1954471363-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82b28c9fb1954471363-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82b28c9fb1954471363-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82b28c9fb1954471363-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a7080196ba5d69aefcecf7bbf44c9556.jpg\" alt=\"du command\"></p>\n<p>该命令的输出将显示 <code>/home</code> 中的所有文件和目录以及显示块大小。</p>\n<h4 id=\"toc_3\">2、 以人类可读格式也就是 kb、mb 等显示文件/目录大小</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82b28c9fba670133888\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du -h /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82b28c9fba670133888-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82b28c9fba670133888-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82b28c9fba670133888-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82b28c9fba670133888-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/1b9dd42d7efa627e663eeb719c31051b.jpg\" alt=\"du command\"></p>\n<h4 id=\"toc_4\">3、 目录的总磁盘大小</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82b28c9fbe080613329\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du -s /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82b28c9fbe080613329-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82b28c9fbe080613329-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82b28c9fbe080613329-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82b28c9fbe080613329-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3d49dd172fc018cabd4747f4db263811.jpg\" alt=\"du command\"></p>\n<p>它是 <code>/home</code> 目录的总大小</p>\n<h3 id=\"toc_5\">df 命令</h3>\n<p>df（disk filesystem 的简称）用于显示 Linux 系统的磁盘利用率。（LCTT 译注：<code>df</code> 可能应该是 disk free 的简称。）</p>\n<p>下面是一些例子。</p>\n<h4 id=\"toc_6\">1、 显示设备名称、总块数、总磁盘空间、已用磁盘空间、可用磁盘空间和文件系统上的挂载点。</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82b28c9fc2694094691\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82b28c9fc2694094691-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82b28c9fc2694094691-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82b28c9fc2694094691-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">df</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82b28c9fc2694094691-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ab5724c46d3e98a63c869827c65cd227.jpg\" alt=\"df command\"></p>\n<h4 id=\"toc_7\">2、 人类可读格式的信息</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82b28c9fc5624001567\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df -h\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82b28c9fc5624001567-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82b28c9fc5624001567-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82b28c9fc5624001567-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82b28c9fc5624001567-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5e54bd24a629aad15d72114b57687e18.jpg\" alt=\"df command\"></p>\n<p>上面的命令以人类可读格式显示信息。</p>\n<h4 id=\"toc_8\">3、 显示特定分区的信息</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82b28c9fc9568900104\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df -hT /etc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82b28c9fc9568900104-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82b28c9fc9568900104-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82b28c9fc9568900104-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">hT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82b28c9fc9568900104-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5b29e87fdba47b650c6958d569d553c2.jpg\" alt=\"df command\"></p>\n<p><code>-hT</code> 加上目标目录将以可读格式显示 <code>/etc</code> 的信息。</p>\n<p>虽然 <code>du</code> 和 <code>df</code> 命令有更多选项，但是这些例子可以让你初步了解。如果在这里找不到你要找的东西，那么你可以参考有关命令的 man 页面。</p>\n<p>另外，<a href=\"http://linuxtechlab.com/tips-tricks/\"><strong>在这</strong></a>阅读我的其他帖子，在那里我分享了一些其他重要和经常使用的 Linux 命令。</p>\n<p>如往常一样，欢迎你留下评论和疑问，因此在下面留下你的评论和疑问，我会回复你。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113780\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113780votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113780\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg", "fav_nums": 2, "title": "du 及 df 命令的使用（附带示例）", "comment_nums": 0, "tags": "IT技术,Linux"}/n{"create_date": "2018/03/06", "praise_nums": "2", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/47a58f731472797655f14eeebe80e7d7.png"], "url": "http://blog.jobbole.com/113716/", "url_object_id": "a6f0ef6debff996ff3defb5399281308", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.solidot.org/story?sid=55694\">Solidot</a>   </div><p>最早流行的浏览器是 NCSA Mosaic，它称自己为 NCSA_Mosaic/2.0 (Windows 3.1)；后来一个新浏览器出现了，它的名字叫 Mozilla，是 Mosaic Killer 的缩写，Mosaic 并不觉得这好笑，因此该浏览器改名为 Netscape，它称自己为 Mozilla/1.0 (Win3.1)。</p>\n<p>Netscape 支持框架（frame），而 Mosaic 不支持，因此用户代理嗅探（User Agent sniffing）出现了，网站在检测到 Mozilla 后就发送框架，如果不是就不发送。后来微软开发了 IE，希望它成为 Netscape Killer，IE 也支持框架，但由于它不是 Mozilla，网站没有向它发送框架。</p>\n<p>微软没有耐心等待网站修改而是声称它兼容于 Mozilla，因此冒充 Netscape 称自己为 Mozilla/1.22 (compatible; MSIE 2.0; Windows 95)。第一次浏览器战争以 Netscape 的失利结束，但 Netscape 以 Mozilla 的名字获得了新生。</p>\n<p>Mozilla 构建了 Gecko，称自己为 Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.1) Gecko/20020826。Gecko 是一个渲染引擎，Mozilla 在此基础上开发了 Firefox，它称自己为 Mozilla/5.0 (Windows; U; Windows NT 5.1; sv-SE; rv:1.7.5) Gecko/20041108 Firefox/1.0。因为 Gecko 好于 IE，因此用户代理嗅探又出现了，网站在检测到 Gecko 后会提供更好的页面代码。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/47a58f731472797655f14eeebe80e7d7.png\" alt=\"YL}%@8@6764CYM (9J]%W[LU.png\"></p>\n<p>Linux 上的浏览器 Konqueror 使用的渲染引擎是 KHTM，它只能冒充 Gecko 称自己为 Mozilla/5.0 (compatible; Konqueror/3.2; FreeBSD) (KHTML, like Gecko)。Opera 则提供了选项，让用户想冒充哪个浏览器就冒充哪个浏览器。苹果后来创建了 KHTML 的一个分支 WebKit，称自己为 Mozilla/5.0 (Macintosh; U; PPC Mac OS X; de-de) AppleWebKit/85.7 (KHTML, like Gecko) Safari/85.5。这就是为什么浏览器的用户代理字符串以 Mozilla 开头。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113716\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113716votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113716\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/8f56708c8277db3452adbaf82ed7ad944f9b4ada.jpg", "fav_nums": 1, "title": "为什么浏览器的用户代理字符串以 Mozilla 开头", "comment_nums": 0, "tags": "IT技术,浏览器"}/n{"create_date": "2018/03/09", "praise_nums": "2", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/f1a3d556b79a7fae23ad3ecc6f972164.jpg"], "url": "http://blog.jobbole.com/113728/", "url_object_id": "aa94da9060b646e6772ebf4ad4c5ffe7", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/xiandafu/blog/1630989\">闲大赋</a>   </div><div>\n<p>我是Beetl和BeetlSQL开源的作者，这俩类技术实现难度较大，前者是属于语言实现类开源，后者则是全功能ORM实现。但是这俩个开源使用门槛又低，能遇到各种各样的小白用户。我帮助小白解决了非常多技术问题，但也遭遇过小白给予的困扰。我总结了一下9种小白对开源作者造成的有意无意的伤害，并且按照严重程度分为3个级别</p>\n<h1>一级伤害，普通伤害</h1>\n<h2>聊天式提问</h2>\n<p>这种行为的小白从来没有察觉到提问是一门学科，没有研究如何提问，也没有观摩过别人的提问为何能得到专家的仔细回答。他总觉得，专家就在身边，专家有足够的时间帮助自己。他通常提问方式是</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ec18ab16448846279\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;你好，在吗？\r\n小白&gt;（10分钟后）大神，有空吗？我有一个问题想问问\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab16448846279-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ec18ab16448846279-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab16448846279-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab16448846279-1\">小白<span class=\"crayon-o\">&gt;</span>你好，在吗？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ec18ab16448846279-2\">小白<span class=\"crayon-o\">&gt;</span>（<span class=\"crayon-cn\">10</span>分钟后）大神，有空吗？我有一个问题想问问</div><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab16448846279-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这类小白并不知道，开源作者都很忙，如果他空闲了恰好看到你的提问，但你没有科学提问，他几乎不会跟你去互动接下来你希望的事情。这种无意义的叨扰开源作者，挺让人心烦的。</p>\n<h2>从不阅读官方文档</h2>\n<p>这种行为小白是最为常见的小白，遇到问题都是以Baidu为工具来解决。小白需要清楚几点关于搜索引擎不能做到的地方</p>\n<ul>\n<li>对新技术，小微技术的查询滞后</li>\n<li>对流行技术，有会让人陷入信息汪洋大海中</li>\n</ul>\n<p>靠搜索引擎来解决问题的人，都会技术积累不牢固，较好的办法是以官网手册为中心，结合官网论坛，或者oschina这样专门的技术社区，结合源代码和搜索引擎来找到解决办法。对于小白来说，大部分问题都能从官网文档中找到答案。但小白却没有时间去研究官官网文档。以我经验，越是厉害的人越对官网文档重视，越要花时间去通读官网手册，官网的其他技术资料。 越是小白呢，因为忙就不详细了解官网文档，结果知识不牢固，会导致后面越来越忙（因为会一直解决跟本不是问题的问题），陷入恶心循环</p>\n<p>我在我的SpringBoot-Plus开源中，安装说明有14行，有5行且标准了重点，都提到要用JDK8和打开Parameter参数，并详细说明了如果系统启动时报报错，应该就是paramter参数没有打开（我同时也链接了如何打开JDK8 paramter参数的文章),结果还是有10几位小白告诉我系统起不来，并附上了我在安装说明里提到过的相同错误。</p>\n<p>这类小白老是问一下显而易见的问题，对开源作者和其他初级用户造成了困惑</p>\n<h2>要这要那，不经过思考和探索</h2>\n<p>这类小白对开源作者造成了常规性的伤害最多。有时候我都怀疑他们并不是不会，而是懒，以为开源作者就是他身边的老师，或者身边的同事 ，比如他们经常提一些明显能自己解决的问题，比如</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ec18ab1f842977917\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;BeetlSQL如何翻页（实际上官网文档有专门一章讲翻页）\r\n小白&gt;Beetl的Maven坐标是什么（同样官网文档肯定有哇）\r\n小白&gt;SpringBoot-Plus 数据库安装脚本有吗（如果没有，还能叫开源吗，就在doc目录下）\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab1f842977917-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ec18ab1f842977917-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab1f842977917-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ec18ab1f842977917-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab1f842977917-1\">小白<span class=\"crayon-o\">&gt;</span><span class=\"crayon-i\">BeetlSQL</span>如何翻页（实际上官网文档有专门一章讲翻页）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ec18ab1f842977917-2\">小白<span class=\"crayon-o\">&gt;</span><span class=\"crayon-i\">Beetl</span>的<span class=\"crayon-i\">Maven</span>坐标是什么（同样官网文档肯定有哇）</div><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab1f842977917-3\">小白<span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">SpringBoot</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Plus</span><span class=\"crayon-h\"> </span>数据库安装脚本有吗（如果没有，还能叫开源吗，就在<span class=\"crayon-i\">doc</span>目录下）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ec18ab1f842977917-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这类小白的问题，如果你真有空回答，还并不好回答，这类小白的问题通常都需要大篇幅的解答其疑问，因为问的实在太基础了</p>\n<h1>二级伤害，常规伤害</h1>\n<h2>情绪宣泄类型小白</h2>\n<p>这类小白有一定技术能力，但靠自己没有解决问题，因此在和开源作者交流过程中过于注重自己的情感体验了，比如</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ec18ab26755719107\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;这个问题我花了周末俩天都没解决，难道Beetl真的很不好用吗？（作为开源作者的我，真想一棍子敲打上去，你是不是来解决问题的？）\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab26755719107-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ec18ab26755719107-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab26755719107-1\">小白<span class=\"crayon-o\">&gt;</span>这个问题我花了周末俩天都没解决，难道<span class=\"crayon-i\">Beetl</span>真的很不好用吗？（作为开源作者的我，真想一棍子敲打上去，你是不是来解决问题的？）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ec18ab26755719107-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>还比如经常有小白辛苦工作到晚上11点，然后qq群提问</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ec18ab2a288268283\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;大家好，问个问题,很着急解决......\r\n\r\n小白&gt;(半小时后)，这个群太冷漠了，都没人愿意帮助我\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab2a288268283-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ec18ab2a288268283-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab2a288268283-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ec18ab2a288268283-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab2a288268283-1\">小白<span class=\"crayon-o\">&gt;</span>大家好，问个问题<span class=\"crayon-sy\">,</span>很着急解决<span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ec18ab2a288268283-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab2a288268283-3\">小白<span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span>半小时后<span class=\"crayon-sy\">)</span>，这个群太冷漠了，都没人愿意帮助我</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ec18ab2a288268283-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>其实大家不愿帮助，可能是因为都睡觉了，或者没有精力再深夜去帮你解决问题，但你宣泄了个人情感，估计第二天也不会得到社区任何帮助</p>\n<h2>选择性的展示问题线索</h2>\n<p>这类小白是最让人开源作者头疼的，因为他们在寻求帮助的时候，不知道自己需要向开源作者提供什么样的信息。甚至有时候故意只将自己写正确的部分展示出来，来取得开源作者的认同。但这无法解决问题</p>\n<p>最常见的是只贴出自己的代码，但并没有贴出错误提示。其实错误提示更能帮助开源作者解决问题，甚至不需要贴出你的代码都行。 有些人贴出了错误提示，比如异常栈，但并没有完整的贴出异常栈，有些人贴出了代码，但并没有把IDE的代码行也跟图粘贴出来，这导致无法交流</p>\n<p>比如这个贴图，很难给开源作者提供详细的线索，真正的线索应该在下面未贴出的异常栈里</p>\n<p><img title=\"在这里输入图片标题\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/44fecd417e8fb41407739e36f8842fd8.png\" alt=\"输入图片说明\"></p>\n<p>这个贴图则没有包含代码行数，会出现交流困难 <img title=\"在这里输入图片标题\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/fbf597c38a270d90e2370b006ee08304.png\" alt=\"输入图片说明\"></p>\n<p>较好的方式是这个图</p>\n<p><img title=\"在这里输入图片标题\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/05a9aac62b2942fcdade9d3f841d4549.png\" alt=\"输入图片说明\"></p>\n<p>这类小白会非常浪费开源作者的时间，所以我认为是二级伤害。</p>\n<p>我经常说一句话，你若仔细提问，我便详细回答。通常，对于社区提问附带多张图片的小白，非常受我欢迎</p>\n<h2>向开源作者提出错误的问题</h2>\n<p>有些小白经过思考和探索后，提出了错误的问题。比如</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ec18ab2f644211428\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n小白&gt;为什么XXX开源不兼容Java7(实际上根本不是版本的事情）\r\n小白&gt;为什么BeetlSQL不支持SQLServer(实际上是数据库配置不正确)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab2f644211428-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ec18ab2f644211428-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab2f644211428-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab2f644211428-1\">小白<span class=\"crayon-o\">&gt;</span>为什么<span class=\"crayon-i\">XXX</span>开源不兼容<span class=\"crayon-e\">Java7</span><span class=\"crayon-sy\">(</span>实际上根本不是版本的事情）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ec18ab2f644211428-2\">小白<span class=\"crayon-o\">&gt;</span>为什么<span class=\"crayon-i\">BeetlSQL</span>不支持<span class=\"crayon-e\">SQLServer</span><span class=\"crayon-sy\">(</span>实际上是数据库配置不正确<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab2f644211428-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>。这类提问能错误引导问题解答者。正确的姿势应该是完整的说出自己的期望和自己的过程以及最后的现象。然后可以提出自己认为的解答方向来辅助开源作者帮你解决问题</p>\n<h2>隐藏自己的背景信息</h2>\n<p>开源作者回答的思路很多，背景信息对开源作者回答问题有很大帮助。比如，你是个新手，那么SpringBoot-Plus没有启动，可能是你没有安装Maven或者JDK，如果你是个SpringBoot有经验者，曾经用SpringBoot在好几个项目里，那么启动失败可能真的意味这有环境不兼容，甚至是开源Bug</p>\n<p>小白提问的时候花几句介绍一下自己是非常有必要的，比如</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81ec18ab35710266664\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n大有前途的小白&gt;我是SpringBoot-Plus使用新手，我有3年java经验，也使用过Spring，自己也实现过AOP，现在有一个SpringBoot的自定义AOP如何实现的问题....\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81ec18ab35710266664-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81ec18ab35710266664-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81ec18ab35710266664-1\">大有前途的小白<span class=\"crayon-o\">&gt;</span>我是<span class=\"crayon-v\">SpringBoot</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Plus</span>使用新手，我有<span class=\"crayon-cn\">3</span>年<span class=\"crayon-i\">java</span>经验，也使用过<span class=\"crayon-i\">Spring</span>，自己也实现过<span class=\"crayon-i\">AOP</span>，现在有一个<span class=\"crayon-i\">SpringBoot</span>的自定义<span class=\"crayon-i\">AOP</span>如何实现的问题<span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81ec18ab35710266664-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这样的提问，比小白一上来就问如何实现AOP好很多，前者能帮助开源作者知道解答的范围从而精确解答，节省了开源作者的时间，也节省了小白时间</p>\n<h1>三级伤害，伤透了心</h1>\n<h2>对于开源作者招待不周行为进行攻击，造谣</h2>\n<p>开源作者都是出于兴趣在业余时间完成开源，也是抽空帮助解答问题，因此如果开源作者不回答问题，或者简洁回答，这都是开源作者的常态行为。但有些小白却认为受到了冒犯从而转为攻击开源作者。</p>\n<p>我就遭受过俩个人类似的攻击，他们嫌我怠慢他们，或者是言语上让他们难堪，就转而在社区攻击我，比如，用小号再次潜入群里，故意激怒我踢走他，然后他在oschina上发帖子说《beetl作者闲大赋为什么如此自负和目中无人》，并截图为证。这个帖子在oschina首页因为热门而存在了一个月时间</p>\n<p>还有人因为我的怠慢而在社区收集我的各种黑证据，比如有一次看到并发里的内存模型，我就在社区提问（其实当时我已经了解了），意图是想让大家讨论一下技术，结果又有人马上把这个截图发到社区，然后说《闲大赋连并发都不懂》</p>\n<p><img title=\"在这里输入图片标题\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/85ed9e2d4e339bcdd6c6eb005bd0dbeb.png\" alt=\"输入图片说明\"></p>\n<h1>三级++伤害</h1>\n<h2>攻击网站，黑掉开源作者的开源社区</h2>\n<p>这个也许是特列，但我碰上了，这位小白是某大互联网公司的技术人员，在社区里不可一世，甚至开始教育其他人的品德。作为一个年轻人，非常猖狂。我后来驱逐他出社区后，没想到的是，网站立刻不能访问，一直遭受暴力破解，而且他还通过小号在社区直播破坏过程。第二天，ibeetl.com 真的不能访问，整个社区被黑，数据被清空，积累了3年的技术问答全不不复存在。</p>\n<p>后来在社区其他人员帮助写，用SpringBoot+Beetl+BeetlSQL重写了一个java论坛，甚至开源了这个项目，因祸得福吧。远离了恶人，结交了真朋友</p>\n<h1>总结</h1>\n<p>作为开源作者，提供了自己的想法和实践出来的作品，难得可贵，如果有好的小白，那么开源产品会更加完美。如果遭遇到上面我列举出来的各种小白，那就是开源作者的不幸，我觉得这个一直是常态，遇上几个特别优秀的小白，又会碰上几个对开源作者造成各种级别伤害的小白。希望小白们看了这个博客，能减少自己对开源作者造成的困扰和伤害，同时提高自己的技术水平</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113728\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113728votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113728\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/70c7b887c37d9154dc2b5636ed919464c716d375.jpg", "fav_nums": 2, "title": "开源作者遭受小白的 9 种伤害", "comment_nums": 2, "tags": "业界, 2 评论 ,开源"}/n{"create_date": "2018/03/07", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/c96c574ca76e6b552476e508f1247902.png"], "url": "http://blog.jobbole.com/113719/", "url_object_id": "0ec536e6cc340e779e8be8c764ab39c0", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.maketecheasier.com/hidden-files-linux-home-directory/\">Alexander Fox</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9409-1.html\">Linux中国/MjSeven</a>   </div><p>在 Linux 系统中，你可能会在主目录中存储了大量文件和文件夹。但在这些文件之外，你知道你的主目录还附带了很多隐藏的文件和文件夹吗？如果你在主目录中运行 <code>ls -a</code>，你会发现一堆带有点前缀的隐藏文件和目录。这些隐藏的文件到底做了什么？</p>\n<h3 id=\"toc_1\">在主目录中隐藏的文件是干什么用的?</h3>\n<p><img class=\"aligncenter\" title=\"hidden-files-liunux-2\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/c96c574ca76e6b552476e508f1247902.png\" alt=\"hidden-files-liunux-2\"></p>\n<p>通常，主目录中的隐藏文件和目录包含该用户程序访问的设置或数据。它们不打算让用户编辑，只需要应用程序进行编辑。这就是为什么它们被隐藏在用户的正常视图之外。</p>\n<p>通常，删除和修改自己主目录中的文件不会损坏操作系统。然而，依赖这些隐藏文件的应用程序可能不那么灵活。从主目录中删除隐藏文件时，通常会丢失与其关联的应用程序的设置。</p>\n<p>依赖该隐藏文件的程序通常会重新创建它。 但是，你将从“开箱即用”设置开始，如全新用户一般。如果你在使用应用程序时遇到问题，那实际上可能是一个巨大的帮助。它可以让你删除可能造成麻烦的自定义设置。但如果你不这样做，这意味着你需要把所有的东西都设置成原来的样子。</p>\n<h3 id=\"toc_2\">主目录中某些隐藏文件的特定用途是什么？</h3>\n<p><img class=\"aligncenter\" title=\"hidden-files-linux-3\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e5c7ad21014cb9f242377c5c8c36e38f.png\" alt=\"hidden-files-linux-3\"></p>\n<p>每个人在他们的主目录中都会有不同的隐藏文件。每个人都有一些。但是，无论应用程序如何，这些文件都有类似的用途。</p>\n<h4 id=\"toc_3\">系统设置</h4>\n<p>系统设置包括桌面环境和 shell 的配置。</p>\n<ul>\n<li>shell 和命令行程序的<strong>配置文件</strong>：根据你使用的特定 shell 和类似命令的应用程序，特定的文件名称会变化。你会看到 <code>.bashrc</code>、<code>.vimrc</code> 和 <code>.zshrc</code>。这些文件包含你已经更改的有关 shell 的操作环境的任何设置，或者对 <code>vim</code> 等命令行实用工具的设置进行的调整。删除这些文件将使关联的应用程序返回到其默认状态。考虑到许多 Linux 用户多年来建立了一系列微妙的调整和设置，删除这个文件可能是一个非常头疼的问题。</li>\n<li><strong>用户配置文件</strong>：像上面的配置文件一样，这些文件（通常是 <code>.profile</code> 或 <code>.bash_profile</code>）保存 shell 的用户设置。该文件通常包含你的 <code>PATH</code> 环境变量。它还包含你设置的<a href=\"https://www.maketecheasier.com/making-the-linux-command-line-a-little-friendlier/#aliases\">别名</a>。用户也可以在 <code>.bashrc</code> 或其他位置放置别名。<code>PATH</code> 环境变量控制着 shell 寻找可执行命令的位置。通过添加或修改 <code>PATH</code>，可以更改 shell 的命令查找位置。别名更改了原有命令的名称。例如：一个别名可能将 <code>ls -l</code> 设置为 <code>ll</code>。这为经常使用的命令提供基于文本的快捷方式。如果删除 <code>.profile</code> 文件，通常可以在 <code>/etc/skel</code> 目录中找到默认版本。</li>\n<li><strong>桌面环境设置</strong>：这里保存你的桌面环境的任何定制。其中包括桌面背景、屏幕保护程序、快捷键、菜单栏和任务栏图标以及用户针对其桌面环境设置的其他任何内容。当你删除这个文件时，用户的环境会在下一次登录时恢复到新的用户环境。</li>\n</ul>\n<h4 id=\"toc_4\">应用配置文件</h4>\n<p>你会在 Ubuntu 的 <code>.config</code> 文件夹中找到它们。 这些是针对特定应用程序的设置。 它们将包含喜好列表和设置等内容。</p>\n<ul>\n<li><strong>应用程序的配置文件</strong>：这包括应用程序首选项菜单中的设置、工作区配置等。 你在这里找到的具体取决于应用程序。</li>\n<li><strong>Web 浏览器数据</strong>：这可能包括书签和浏览历史记录等内容。这些文件大部分是缓存。这是 Web 浏览器临时存储下载文件（如图片）的地方。删除这些内容可能会降低你首次访问某些媒体网站的速度。</li>\n<li><strong>缓存</strong>：如果用户应用程序缓存仅与该用户相关的数据（如 <a href=\"https://www.maketecheasier.com/clear-spotify-cache/\">Spotify 应用程序存储播放列表的缓存</a>），则主目录是存储该目录的默认地点。 这些缓存可能包含大量数据或仅包含几行代码：这取决于应用程序需要什么。 如果你删除这些文件，则应用程序会根据需要重新创建它们。</li>\n<li><strong>日志</strong>：一些用户应用程序也可能在这里存储日志。根据开发人员设置应用程序的方式，你可能会发现存储在你的主目录中的日志文件。然而，这不是一个常见的选择。</li>\n</ul>\n<h3 id=\"toc_5\">结论</h3>\n<p>在大多数情况下，你的 Linux 主目录中的隐藏文件用于存储用户设置。 这包括命令行程序以及基于 GUI 的应用程序的设置。删除它们将删除用户设置。 通常情况下，它不会导致程序被破坏。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113719\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113719votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113719\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/25fd6361e58d68d4d0e0fe883f9e496afcab090b.jpg", "fav_nums": 1, "title": "Linux 主目录中的隐藏文件是干什么用的？", "comment_nums": 0, "tags": "IT技术,Linux"}/n{"create_date": "2018/03/12", "praise_nums": "2", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/ff247977ac3e5237654ad324e8c880ed.jpg"], "url": "http://blog.jobbole.com/113740/", "url_object_id": "23b91f36b0e3c52751b33dea744a641b", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/2010222395\">MentosZ</a> 翻译，<a href=\"http://www.jobbole.com/members/paradise_FD\">郑芸</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://towardsdatascience.com/the-10-deep-learning-methods-ai-practitioners-need-to-apply-885259f402c1\">James Le</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>过去十年里，人们对机器学习的兴趣经历了爆炸式的整长。我们几乎每天都可以在计算机程序、行业会议和媒体上看到机器学习的身影。很多关于机器学习的讨论都混淆了“机器学习能做什么”和“人类希望机器学习能做什么”。从根本上讲，机器学习是运用算法从原始数据中提取信息，并用某种类型的模型进行表示，然后使用该模型对一些尚未用模型表示的其他数据来进行推断。</p>\n<p>神经网络就是机器学习各类模型中的其中一类，并且已经存在了至少50年。神经网络的基本单位是节点，它的想法大致来源于哺乳动物大脑中的生物神经元。生物大脑中的神经元节点之间的链接是随着时间推移不断演化的，而神经网络中的神经元节点链接也借鉴了这一点，会不断演化（通过“训练”的方式）。</p>\n<p>神经网络中很多重要框架的建立和改进都完成于二十世纪八十年代中期和九十年代初期。然而，要想获得较好结果需要大量的时间和数据，由于当时计算机的能力有限，神经网络的发展受到了一定的阻碍，人们的关注度也随之下降。二十一世纪初期，计算机的运算能力呈指数级增长，业界也见证了计算机技术发展的“寒武纪爆炸”——这在之前都是无法想象的。深度学习以一个竞争者的姿态出现，在计算能力爆炸式增长的十年里脱颖而出，并且赢得了许多重要的机器学习竞赛。其热度在2017年仍然不减。如今，在机器学习的出现的地方我们都能看到深度学习的身影。</p>\n<p>为了跟上时代的潮流，我参加了 Udacity 的“深度学习”课程。这是一个很好的入门课程，包括深度学习的动机和在 TensorFlow 中针对复杂的和/或大规模数据集进行学习的智能系统的设计。 对于课程作业，我使用和开发了用于图像识别的卷积神经网络，带有嵌入的自然语言处理以及运用递归神经网络/长期短期记忆的基于字符的文本生成程序。所有 Jupyter Notebook 的代码都在我的 <a href=\"https://github.com/khanhnamle1994/deep-learning\">GitHub</a>。</p>\n<p>下图是课程作业的一个结果，词向量的 t-SNE 投影，通过相似性进行聚类。<a href=\"https://cdn-images-1.medium.com/max/1600/1*5gUqFLOyQrB4kgjAicn0og.png\"><br>\n</a></p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpa4ymntinj20m80legrb.jpg\" width=\"690\" height=\"664\"></p>\n<p>最近，我开始阅读关于深度学习的学术论文。根据我的个人研究，以下文章对这个领域的发展产生了巨大的影响：</p>\n<ul>\n<li>NYU 1998 年的文章<a href=\"http://yann.lecun.com/exdb/publis/pdf/lecun-01a.pdf\">《基于梯度学习的文档识别》（Gradient-Based Learning Applied to Document Recognition）</a> 介绍了卷积神经网络在机器学习中的应用。</li>\n<li>Toronto 2009年的文章<a href=\"http://proceedings.mlr.press/v5/salakhutdinov09a/salakhutdinov09a.pdf\">《深度波兹曼机器》（Deep Boltzmann Machines）</a> 针对波兹曼机提出了一种新的学习算法，其中包含许多隐藏层。</li>\n<li>Stanford 和 Google 2012年联合发表的文章<a href=\"http://icml.cc/2012/papers/73.pdf\">《使用大规模非监督学习构建高层特征》（Building High-Level Features Using Large-Scale Unsupervised Learning）</a> 解决了仅利用未标记的数据构建高级、特定类的特征检测器的问题。</li>\n<li>Berkeley 2013年的文章<a href=\"http://proceedings.mlr.press/v32/donahue14.pdf\">《用于一般视觉识别的深层卷积激活特征》（DeCAF——A Deep Convolutional Activation Feature for Generic Visual Recognition）</a> 发布了名为 DeCAF 的算法，这是深度卷积激活特征的一个开源实现，使用相关的网络参数，视觉研究人员能够利用一系列视觉概念学习范例进行深入实验。</li>\n<li>DeepMind 2016年的文章<a href=\"https://www.cs.toronto.edu/~vmnih/docs/dqn.pdf\">《用深度强化学习玩Atari》（Playing Atari with Deep Reinforcement Learning）</a> 提出了第一个可以成功地通过强化学习从高维感官输入中直接学习控制策略的深度学习模型。</li>\n</ul>\n<p>通过研究和学习，我学到了大量关于深度学习的相关知识。在这里，我想分享人工智能工程师 10 个用于解决机器学习问题的强大的深度学习方法。但是，我们首先需要定义什么是深度学习。</p>\n<p>如何定义深度学习是很多人面临的一个挑战，因为它的形式在过去的十年中已经慢慢地发生了改变。下图直观地展示了人工智能，机器学习和深度学习之间的关系。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpa4ynluzaj20m80mjgmr.jpg\" width=\"690\" height=\"699\"></p>\n<p>人工智能领域广泛，存在时间较长。深度学习是机器学习领域的一个子集，而机器学习是人工智能领域的一个子集。一般将深度学习网络与“典型”前馈多层网络从如下方面进行区分：</p>\n<ul>\n<li>深度学习网络具有比前馈网络更多的神经元</li>\n<li>深度学习网络连接层之间的方式更复杂</li>\n<li>深度学习网络需要有像“寒武纪大爆发”式的计算能力进行训练</li>\n<li>深度学习网络能够自动提取特征</li>\n</ul>\n<p>上文提到的“更多的神经元”是指近年来神经元的数量不断增加，就可以用更复杂的模型来表示。层也从多层网络中每一层完全连接，发展到卷积神经网络中神经元片段的局部连接，以及与递归神经网络中的同一神经元的循环连接（与前一层的连接除外）。</p>\n<p>因此，深度学习可以被定义为以下四个基本网络框架中具有大量参数和层数的神经网络：</p>\n<ul>\n<li>无监督预训练网络</li>\n<li>卷积神经网络</li>\n<li>循环神经网络</li>\n<li>递归神经网络</li>\n</ul>\n<p>在这篇文章中，我主要讨论三个框架：</p>\n<ol>\n<li><strong>卷积神经网络（</strong><strong>Convolutional Neural Network</strong><strong>）</strong>基本上就是用共享权重在空间中进行扩展的标准神经网络。卷积神经网络主要是通过内部卷积来识别图片，内部卷积可以看到图像上识别对象的边缘。</li>\n<li><strong>循环神经网络（</strong><strong>Recurrent Neural Network</strong><strong>）</strong>基本上就是在时间上进行扩展的标准神经网络，它提取进入下一时间步的边沿，而不是在同一时间进入下一层。循环神经网络主要是为了识别序列，例如语音信号或者文本。其内部的循环意味着网络中存在短期记忆。</li>\n<li><strong>递归神经网络（</strong><strong>Recursive Neural Network</strong><strong>）</strong>更类似于分层网络，其中输入序列没有真正的时间面，但是必须以树状方式分层处理。以下10种方法均可应用于这些框架。</li>\n</ol>\n<h2>1、反向传播</h2>\n<p>反向传播是一种计算函数偏导数（或梯度）的简单方法，它的形式是函数组合（如神经网络）。在使用基于梯度的方法求解最优化问题（梯度下降只是其中之一）时，需要在每次迭代中计算函数梯度。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpa4yox71ej20go0csju0.jpg\" width=\"600\" height=\"460\"></p>\n<p>对于一个神经网络，其目标函数是组合形式。那么应该如何计算梯度呢？有2种常规方法：（i）<strong>微分解析法</strong>。函数形式已知的情况下，只需要用链式法则（基础微积分）计算导数。（ii）<strong>有限差分法近似微分</strong>。这种方法运算量很大，因为函数评估的数量级是 O(N)，其中 N 是参数的个数。与微分解析法相比，这种方法运算量更大，但是在调试时，通常会使用有限差分验证反向传播的效果。</p>\n<h2>2、随机梯度下降</h2>\n<p>梯度下降的一个直观理解就是想象一条源自山顶的河流。这条河流会沿着山势的方向流向山麓的最低点，而这也正是梯度下降法的目标。</p>\n<p>我们所期望的最理想的情况就是河流在到达最终目的地（最低点）之前不会停下。在机器学习中，这等价于我们已经找到了从初始点（山顶）开始行走的全局最小值（或最优值）。然而，可能由于地形原因，河流的路径中会出现很多坑洼，而这会使得河流停滞不前。在机器学习术语中，这种坑洼称为局部最优解，而这不是我们想要的结果。有很多方法可以解决局部最优问题（这里不再讨论）。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpa4yq0fr5j20ld0fvq5h.jpg\" width=\"690\" height=\"512\"></p>\n<p>因此，由于地形（即函数性质）的限制，梯度下降算法很容易卡在局部最小值。但是，如果能够找到一个特殊的山地形状（比如碗状，术语称作凸函数），那么算法总是能够找到最优点。在进行最优化时，遇到这些特殊的地形（凸函数）自然是最好的。另外，山顶初始位置（即函数的初始值）不同，最终到达山底的路径也完全不同。同样，不同的流速（即梯度下降算法的学习速率或步长）也会导致到达目的地的方式有差异。是否会陷入或避开一个坑洼（局部最小值），都会受到这两个因素的影响。</p>\n<h2>3、学习率衰减</h2>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpa4yqxkkhj20go09d3zd.jpg\" width=\"600\" height=\"337\"></p>\n<p>调整随机梯度下降优化算法的学习速率可以提升性能并减少训练时间。这被称作学习率退火或自适应学习率。训练中最简单也最常用的学习率自适应方法就是逐渐降低学习率。在训练初期使用较大的学习率，可以对学习率进行大幅调整；在训练后期，降低学习率，以一个较小的速率更新权重。这种方法在早期可以快速学习获得较好的权重，并在后期对权重进行微调。</p>\n<p>两个流行而简单的学习率衰减方法如下：</p>\n<ul>\n<li>线性地逐步降低学习率</li>\n<li>在特定时点大幅降低学习率</li>\n</ul>\n<h2>4、Dropout</h2>\n<p>拥有大量参数的深度神经网络是非常强大的机器学习系统。然而，在这样的网络中,过拟合是一个很严重的问题。而且大型网络的运行速度很慢，这就使得在测试阶段通过结合多个不同的大型神经网络的预测来解决过拟合问题是很困难的。Dropout 方法可以解决这个问题。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpa4yrul7ij20h2094jsu.jpg\" width=\"614\" height=\"328\"></p>\n<p>其主要思想是，在训练过程中随机地从神经网络中删除单元（以及相应的连接），这样可以防止单元间的过度适应。训练过程中，在指数级不同“稀疏度”的网络中剔除样本。在测试阶段，很容易通过使用具有较小权重的单解开网络（single untwined network），将这些稀疏网络的预测结果求平均来进行近似。这能有效地避免过拟合，并且相对于其他正则化方法能得到更大的性能提升。Dropout 技术已经被证明在计算机视觉、语音识别、文本分类和计算生物学等领域的有监督学习任务中能提升神经网络的性能，并在多个基准数据集中达到最优秀的效果。</p>\n<h2>5、最大池</h2>\n<p>最大池是一种基于样本的离散化方法。目标是对输入表征（图像、隐藏层输出矩阵等）进行下采样，降低维度并且允许对子区域中的特征进行假设。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpa4ysgia7j20ea0ba3z0.jpg\" width=\"514\" height=\"406\"></p>\n<p>通过提供表征的抽象形式，这种方法可以在某种程度上解决过拟合问题。同样，它也通过减少学习参数的数目以及提供基本的内部表征转换不变性来减少计算量。最大池是通过将最大过滤器应用于通常不重叠的初始表征子区域来完成的。</p>\n<h2>6、批量标准化</h2>\n<p>当然，包括深度网络在内的神经网络需要仔细调整权重初始值和学习参数。批量标准化能够使这个过程更加简单。</p>\n<p><strong>权重问题：</strong></p>\n<ul>\n<li>无论怎么设置权重初始值，比如随机或按经验选择，初始权重和学习后的权重差别都很大。考虑一小批权重，在最初时，对于所需的特征激活可能会有很多异常值。</li>\n<li>深度神经网络本身就具有病态性，即初始层的微小变化就会导致后一层的巨大变化。</li>\n</ul>\n<p>在反向传播过程中，这些现象会导致梯度的偏移，这就意味着在学习权重以产生所需要的输出之前，梯度必须补偿异常值。而这将导致需要额外的时间才能收敛。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpa4ytiz1qj20m80g0myk.jpg\" width=\"690\" height=\"497\"></p>\n<p>批量标准化将这些梯度从异常值调整为正常值，并在小批量范围内（通过标准化）使其向共同的目标收敛。</p>\n<p><strong>学习率问题：</strong>通常来说，学习率都比较小，这样只有一小部分的梯度用来校正权重，因为异常激活的梯度不应该影响已经学习好的权重。通过批量标准化，这些异常激活的可能性会被降低，就可以使用更大的学习率加速学习过程。</p>\n<h2>7、长短期记忆</h2>\n<p>长短期记忆网络（LSTM）和其他递归神经网络中的神经元有以下三个不同点：</p>\n<ul>\n<li>它可以决定何时让输入进入神经元</li>\n<li>它可以决定何时记住上一个时间步中计算的内容</li>\n<li>它可以决定何时让输出传递到下一个时间戳</li>\n</ul>\n<p>LSTM的强大之处在于它可以只基于当前的输入就决定上述所有。请看下方的图表：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpa4yu8kw1j20m10clwf0.jpg\" width=\"690\" height=\"394\"></p>\n<p>当前时间戳的输入信号 x(t) 决定了上述三点。输入门（input gate）决定了第一点，遗忘门（forget gate）决定了第二点，输出门（output gate）决定了第三点。只依赖输入就可以完成这三项决定。这是受到大脑工作机制的启发，大脑可以基于输入来处理突然的上下文语境切换。</p>\n<h2>8、Skip-gram</h2>\n<p>词嵌入模型的目的是针对每个词学习一个高维密集表征，其中嵌入向量之间的相似性显示了相应词语之间语义或句法的相似性。Skip-gram 是一种学习词嵌入算法的模型。</p>\n<p>skip-gram 模型（包括很多其它词嵌入模型）背后的主要思想是：<em>如果两个词汇项有相似的上下文，则它们是相似的。</em></p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpa4yux250j20go0ci74u.jpg\" width=\"600\" height=\"450\"></p>\n<p>换句话说，假设有一个句子，比如“cats are mammals”，如果用“dogs”替换“cats”，该句子仍然是有意义的。因此在这个例子中，“dogs”和“cats”有相似的上下文（即“are mammals”）。</p>\n<p>基于以上假设，我们可以考虑一个上下文窗口（包含 K 个连续项）。然后跳过其中一个词，试着学习一个可以得到除了跳过的这个词以外所有词项，并且可以预测跳过的词的神经网络。因此，如果两个词在一个大语料库中多次具有相似的上下文，那么这些词的嵌入向量将会是相似的。</p>\n<h2>9、连续词袋模型</h2>\n<p>在自然语言处理中，我们希望将文档中的每一个单词表示为一个数值向量，使得出现在相似上下文中的单词具有相似或相近的向量表示。在连续词袋模型中，我们的目标是利用一个特定单词的上下文，预测该词。</p>\n<p> </p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpa4yvt7j6j20go09d3yv.jpg\"></p>\n<p>首先在一个大的语料库中抽取大量的句子，每看到一个单词，同时抽取它的上下文。然后我们将上下文单词输入到一个神经网络，并预测在这个上下文中心的单词。</p>\n<p>当我们有成千上万个这样的上下文词汇和中心词时，我们就得到了一个神经网络数据集的实例。然后训练这个神经网络，在经过编码的隐藏层的最终输出中，我们得到了特定单词的嵌入式表达。当我们对大量的句子进行训练时也能发现，类似上下文中的单词都可以得到相似的向量。</p>\n<h2>10、迁移学习</h2>\n<p>我们来考虑一下卷积神经网络是如何处理图像的。假设有一张图像，对其应用卷积，并得到像素的组合作为输出。假设这些输出是边缘，再次应用卷积，那么现在的输出将是边缘或线的组合。然后再次应用卷积，此时的输出将是线的组合，以此类推。可以把它想象成是在每一层寻找一个特定的模式。神经网络的最后一层通常会变得非常特别。如果基于 ImageNet 进行训练，那么神经网络的最后一层或许就是在寻找儿童、狗或者飞机之类的完整图像。再往后倒退几层，可能会看到神经网络在寻找眼睛、耳朵、嘴巴或者轮子等组成部分。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpa4ywms3fj20hq09zgm8.jpg\" width=\"638\" height=\"359\"></p>\n<p>深度卷积神经网络中的每一层逐步建立起越来越高层次的特征表征，最后几层通常是专门针对输入数据。另一方面，前面的层则更为通用，主要用来在一大类图片中有找到许多简单的模式。</p>\n<p>迁移学习就是在一个数据集上训练卷积神经网络时，去掉最后一层，在不同的数据集上重新训练模型的最后一层。直观来讲，就是重新训练模型以识别不同的高级特征。因此，训练时间会减少很多，所以在没有足够的数据或者需要太多的资源时，迁移学习是一个很有用的工具。</p>\n<p>本文只是简单地对这些方法进行了概述，若想深入理解，建议继续阅读以下文章：</p>\n<ul>\n<li>Andrew Beam 的 <a href=\"http://beamandrew.github.io/deeplearning/2017/02/23/deep_learning_101_part1.html\">“Deep Learning 101”</a></li>\n<li>Andrey Kurenkov 的 <a href=\"http://www.andreykurenkov.com/writing/a-brief-history-of-neural-nets-and-deep-learning/\">“A Brief History of Neural Nets and Deep Learning”</a></li>\n<li>Adit Deshpande 的  <a href=\"https://adeshpande3.github.io/adeshpande3.github.io/A-Beginner%27s-Guide-To-Understanding-Convolutional-Neural-Networks/\">“A Beginner’s Guide to Understanding Convolutional Neural Networks”</a></li>\n<li>Chris Olah： <a href=\"http://colah.github.io/posts/2015-08-Understanding-LSTMs/\">“Understanding LSTM Networks”</a></li>\n<li>Algobean： <a href=\"https://algobeans.com/2016/03/13/how-do-computers-recognise-handwriting-using-artificial-neural-networks/\">“Artificial Neural Networks”</a></li>\n<li>Andrej Karpathy： <a href=\"http://karpathy.github.io/2015/05/21/rnn-effectiveness/\">“The Unreasonable Effectiveness of Recurrent Neural Networks”</a></li>\n</ul>\n<p>深度学习是非常注重技术实践的。本文对每个新想法都没有太多具体的解释。大多数新想法的提出都会附带实验结果以证明它们的可行性。学习深度学习就像玩乐高，玩好乐高和掌握其他艺术一样具有挑战性，但是入门就相对容易很多的。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113740\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113740votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113740\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395\">MentosZ</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395\">\r\n\t\t\t<img src=\"http://tp4.sinaimg.cn/2010222395/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            统计学小硕，R/Python，数据挖掘，机器学习        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/2010222395\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/2010222395/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2010222395\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：676462459\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：13306016503\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/MentosZ\"><i class=\"fa fa-github\"></i></a> <a title=\"Facebook主页\" target=\"_blank\" href=\"https://www.facebook.com/mengtao.zhao\"><i class=\"fa fa-facebook\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/eadb28355fab57e9672e5c965147ef4caca04ac4.jpg", "fav_nums": 1, "title": "AI 从业者都会用到的 10 个深度学习方法", "comment_nums": 0, "tags": "IT技术,机器学习,深度学习"}/n{"create_date": "2018/03/10", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "url": "http://blog.jobbole.com/113735/", "url_object_id": "b49b820d1a88139adbc0e923d2f824f6", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.brendangregg.com/blog/2015-07-08/choosing-a-linux-tracer.html\">Brendan Gregg</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9424-1.html\">Linux中国/qhwdw</a>   </div><blockquote><p>Linux 跟踪很神奇！</p></blockquote>\n<p>跟踪器tracer是一个高级的性能分析和调试工具，如果你使用过 <code>strace(1)</code> 或者 <code>tcpdump(8)</code>，你不应该被它吓到 … 你使用的就是跟踪器。系统跟踪器能让你看到很多的东西，而不仅是系统调用或者数据包，因为常见的跟踪器都可以跟踪内核或者应用程序的任何东西。</p>\n<p>有大量的 Linux 跟踪器可供你选择。由于它们中的每个都有一个官方的（或者非官方的）的吉祥物，我们有足够多的选择给孩子们展示。</p>\n<p>你喜欢使用哪一个呢？</p>\n<p>我从两类读者的角度来回答这个问题：大多数人和性能/内核工程师。当然，随着时间的推移，这也可能会发生变化，因此，我需要及时去更新本文内容，或许是每年一次，或者更频繁。（LCTT 译注：本文最后更新于 2015 年）</p>\n<h3 id=\"toc_1\">对于大多数人</h3>\n<p>大多数人（开发者、系统管理员、运维人员、网络可靠性工程师（SRE）…）是不需要去学习系统跟踪器的底层细节的。以下是你需要去了解和做的事情：</p>\n<h4 id=\"toc_2\">1. 使用 perf_events 进行 CPU 剖析</h4>\n<p>可以使用 perf_events 进行 CPU 剖析profiling。它可以用一个 <a href=\"http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html\">火焰图</a> 来形象地表示。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e61d4e6d926850993\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit clone --depth 1 https://github.com/brendangregg/FlameGraph\r\nperf record -F 99 -a -g -- sleep 30\r\nperf script | ./FlameGraph/stackcollapse-perf.pl | ./FlameGraph/flamegraph.pl &gt; perf.svg\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e61d4e6d926850993-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e61d4e6d926850993-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e61d4e6d926850993-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e61d4e6d926850993-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e61d4e6d926850993-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">depth</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/brendangregg/FlameGraph</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e61d4e6d926850993-2\"><span class=\"crayon-e\">perf </span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">g</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sleep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e61d4e6d926850993-3\"><span class=\"crayon-e\">perf </span><span class=\"crayon-v\">script</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FlameGraph</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">stackcollapse</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">perf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FlameGraph</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">flamegraph</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">perf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">svg</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e61d4e6d926850993-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a5247adc2d78d2586e73f049d6d2347c.png\" alt=\"\"></p>\n<p>Linux 的 perf_events（即 <code>perf</code>，后者是它的命令）是官方为 Linux 用户准备的跟踪器/分析器。它位于内核源码中，并且维护的非常好（而且现在它的功能还在快速变强）。它一般是通过 linux-tools-common 这个包来添加的。</p>\n<p><code>perf</code> 可以做的事情很多，但是，如果我只能建议你学习其中的一个功能的话，那就是 CPU 剖析。虽然从技术角度来说，这并不是事件“跟踪”，而是采样sampling。最难的部分是获得完整的栈和符号，这部分在我的 <a href=\"http://www.brendangregg.com/blog/2015-02-27/linux-profiling-at-netflix.html\">Linux Profiling at Netflix</a> 中针对 Java 和 Node.js 讨论过。</p>\n<h4 id=\"toc_3\">2. 知道它能干什么</h4>\n<p>正如一位朋友所说的：“你不需要知道 X 光机是如何工作的，但你需要明白的是，如果你吞下了一个硬币，X 光机是你的一个选择！”你需要知道使用跟踪器能够做什么，因此，如果你在业务上确实需要它，你可以以后再去学习它，或者请会使用它的人来做。</p>\n<p>简单地说：几乎任何事情都可以通过跟踪来了解它。内部文件系统、TCP/IP 处理过程、设备驱动、应用程序内部情况。阅读我在 lwn.net 上的 <a href=\"http://lwn.net/Articles/608497/\">ftrace</a> 的文章，也可以去浏览 <a href=\"http://www.brendangregg.com/perf.html\">perf_events 页面</a>，那里有一些跟踪（和剖析）能力的示例。</p>\n<h4 id=\"toc_4\">3. 需要一个前端工具</h4>\n<p>如果你要购买一个性能分析工具（有许多公司销售这类产品），并要求支持 Linux 跟踪。想要一个直观的“点击”界面去探查内核的内部，以及包含一个在不同堆栈位置的延迟热力图。就像我在 <a href=\"http://www.brendangregg.com/blog/2015-06-23/netflix-instance-analysis-requirements.html\">Monitorama 演讲</a> 中描述的那样。</p>\n<p>我创建并开源了我自己的一些前端工具，虽然它是基于 CLI 的（不是图形界面的）。这样可以使其它人使用跟踪器更快更容易。比如，我的 <a href=\"http://www.brendangregg.com/blog/2015-03-17/linux-performance-analysis-perf-tools.html\">perf-tools</a>，跟踪新进程是这样的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab81e61d4e76442302802\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ./execsnoop\r\nTracing exec()s. Ctrl-C to end.\r\n PID PPID ARGS\r\n 22898 22004 man ls\r\n 22905 22898 preconv -e UTF-8\r\n 22908 22898 pager -s\r\n 22907 22898 nroff -mandoc -rLL=164n -rLT=164n -Tutf8\r\n[...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab81e61d4e76442302802-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e61d4e76442302802-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e61d4e76442302802-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e61d4e76442302802-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e61d4e76442302802-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e61d4e76442302802-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e61d4e76442302802-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab81e61d4e76442302802-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab81e61d4e76442302802-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab81e61d4e76442302802-1\"><span class=\"crayon-p\"># ./execsnoop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e61d4e76442302802-2\"><span class=\"crayon-e\">Tracing </span><span class=\"crayon-e\">exec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ctrl</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e61d4e76442302802-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">PPID </span><span class=\"crayon-i\">ARGS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e61d4e76442302802-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22898</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22004</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-i\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e61d4e76442302802-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22905</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22898</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">preconv</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">UTF</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e61d4e76442302802-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22908</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22898</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pager</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e61d4e76442302802-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22907</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22898</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nroff</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mandoc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rLL</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">164n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rLT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">164n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Tutf8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab81e61d4e76442302802-8\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ab81e61d4e76442302802-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>在 Netflix 公司，我正在开发 <a href=\"http://techblog.netflix.com/2015/04/introducing-vector-netflixs-on-host.html\">Vector</a>，它是一个实例分析工具，实际上它也是一个 Linux 跟踪器的前端。</p>\n<h3 id=\"toc_5\">对于性能或者内核工程师</h3>\n<p>一般来说，我们的工作都非常难，因为大多数人或许要求我们去搞清楚如何去跟踪某个事件，以及因此需要选择使用哪个跟踪器。为完全理解一个跟踪器，你通常需要花至少一百多个小时去使用它。理解所有的 Linux 跟踪器并能在它们之间做出正确的选择是件很难的事情。（我或许是唯一接近完成这件事的人）</p>\n<p>在这里我建议选择如下，要么：</p>\n<p>A）选择一个全能的跟踪器，并以它为标准。这需要在一个测试环境中花大量的时间来搞清楚它的细微差别和安全性。我现在的建议是 SystemTap 的最新版本（例如，从 <a href=\"https://sourceware.org/git/?p=systemtap.git;a=blob_plain;f=README;hb=HEAD\">源代码</a> 构建）。我知道有的公司选择的是 LTTng ，尽管它并不是很强大（但是它很安全），但他们也用的很好。如果在 <code>sysdig</code> 中添加了跟踪点或者是 kprobes，它也是另外的一个候选者。</p>\n<p>B）按我的 <a href=\"http://www.slideshare.net/brendangregg/velocity-2015-linux-perf-tools\">Velocity 教程中</a> 的流程图。这意味着尽可能使用 ftrace 或者 perf_events，eBPF 已经集成到内核中了，然后用其它的跟踪器，如 SystemTap/LTTng 作为对 eBPF 的补充。我目前在 Netflix 的工作中就是这么做的。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e8c50ccc72d9f49c3f75c3d34f139c65.png\" alt=\"\"></p>\n<p>以下是我对各个跟踪器的评价：</p>\n<h4 id=\"toc_6\">1. ftrace</h4>\n<p>我爱 <a href=\"http://lwn.net/Articles/370423/\">ftrace</a>，它是内核黑客最好的朋友。它被构建进内核中，它能够利用跟踪点、kprobes、以及 uprobes，以提供一些功能：使用可选的过滤器和参数进行事件跟踪；事件计数和计时，内核概览；函数流步进function-flow walking。关于它的示例可以查看内核源代码树中的 <a href=\"https://www.kernel.org/doc/Documentation/trace/ftrace.txt\">ftrace.txt</a>。它通过 <code>/sys</code> 来管理，是面向单一的 root 用户的（虽然你可以使用缓冲实例以让其支持多用户），它的界面有时很繁琐，但是它比较容易调校hackable，并且有个前端：ftrace 的主要创建者 Steven Rostedt 设计了一个 trace-cmd，而且我也创建了 perf-tools 集合。我最诟病的就是它不是可编程的programmable，因此，举个例子说，你不能保存和获取时间戳、计算延迟，以及将其保存为直方图。你需要转储事件到用户级以便于进行后期处理，这需要花费一些成本。它也许可以通过 eBPF 实现可编程。</p>\n<h4 id=\"toc_7\">2. perf_events</h4>\n<p><a href=\"https://perf.wiki.kernel.org/index.php/Main_Page\">perf_events</a> 是 Linux 用户的主要跟踪工具，它的源代码位于 Linux 内核中，一般是通过 linux-tools-common 包来添加的。它又称为 <code>perf</code>，后者指的是它的前端，它相当高效（动态缓存），一般用于跟踪并转储到一个文件中（perf.data），然后可以在之后进行后期处理。它可以做大部分 ftrace 能做的事情。它不能进行函数流步进，并且不太容易调校（而它的安全/错误检查做的更好一些）。但它可以做剖析（采样）、CPU 性能计数、用户级的栈转换、以及使用本地变量利用调试信息debuginfo进行行级跟踪line tracing。它也支持多个并发用户。与 ftrace 一样，它也不是内核可编程的，除非 eBPF 支持（补丁已经在计划中）。如果只学习一个跟踪器，我建议大家去学习 perf，它可以解决大量的问题，并且它也相当安全。</p>\n<h4 id=\"toc_8\">3. eBPF</h4>\n<p>扩展的伯克利包过滤器extended Berkeley Packet Filter（eBPF）是一个内核内in-kernel的虚拟机，可以在事件上运行程序，它非常高效（JIT）。它可能最终为 ftrace 和 perf_events 提供内核内编程in-kernel programming，并可以去增强其它跟踪器。它现在是由 Alexei Starovoitov 开发的，还没有实现完全的整合，但是对于一些令人印象深刻的工具，有些内核版本（比如，4.1）已经支持了：比如，块设备 I/O 的延迟热力图latency heat map。更多参考资料，请查阅 Alexei 的 <a href=\"http://www.phoronix.com/scan.php?page=news_item&amp;px=BPF-Understanding-Kernel-VM\">BPF 演示</a>，和它的 <a href=\"https://github.com/torvalds/linux/tree/master/samples/bpf\">eBPF 示例</a>。</p>\n<h4 id=\"toc_9\">4. SystemTap</h4>\n<p><a href=\"https://sourceware.org/systemtap/wiki\">SystemTap</a> 是一个非常强大的跟踪器。它可以做任何事情：剖析、跟踪点、kprobes、uprobes（它就来自 SystemTap）、USDT、内核内编程等等。它将程序编译成内核模块并加载它们 —— 这是一种很难保证安全的方法。它开发是在内核代码树之外进行的，并且在过去出现过很多问题（内核崩溃或冻结）。许多并不是 SystemTap 的过错 —— 它通常是首次对内核使用某些跟踪功能，并率先遇到 bug。最新版本的 SystemTap 是非常好的（你需要从它的源代码编译），但是，许多人仍然没有从早期版本的问题阴影中走出来。如果你想去使用它，花一些时间去测试环境，然后，在 irc.freenode.net 的 #systemtap 频道与开发者进行讨论。（Netflix 有一个容错架构，我们使用了 SystemTap，但是我们或许比起你来说，更少担心它的安全性）我最诟病的事情是，它似乎假设你有办法得到内核调试信息，而我并没有这些信息。没有它我实际上可以做很多事情，但是缺少相关的文档和示例（我现在自己开始帮着做这些了）。</p>\n<h4 id=\"toc_10\">5. LTTng</h4>\n<p><a href=\"http://lttng.org/\">LTTng</a> 对事件收集进行了优化，性能要好于其它的跟踪器，也支持许多的事件类型，包括 USDT。它的开发是在内核代码树之外进行的。它的核心部分非常简单：通过一个很小的固定指令集写入事件到跟踪缓冲区。这样让它既安全又快速。缺点是做内核内编程不太容易。我觉得那不是个大问题，由于它优化的很好，可以充分的扩展，尽管需要后期处理。它也探索了一种不同的分析技术。很多的“黑匣子”记录了所有感兴趣的事件，以便可以在 GUI 中以后分析它。我担心该记录会错失之前没有预料的事件，我真的需要花一些时间去看看它在实践中是如何工作的。这个跟踪器上我花的时间最少（没有特别的原因）。</p>\n<h4 id=\"toc_11\">6. ktap</h4>\n<p><a href=\"http://ktap.org/\">ktap</a> 是一个很有前途的跟踪器，它在内核中使用了一个 lua 虚拟机，不需要调试信息和在嵌入时设备上可以工作的很好。这使得它进入了人们的视野，在某个时候似乎要成为 Linux 上最好的跟踪器。然而，由于 eBPF 开始集成到了内核，而 ktap 的集成工作被推迟了，直到它能够使用 eBPF 而不是它自己的虚拟机。由于 eBPF 在几个月过去之后仍然在集成过程中，ktap 的开发者已经等待了很长的时间。我希望在今年的晚些时间它能够重启开发。</p>\n<h4 id=\"toc_12\">7. dtrace4linux</h4>\n<p><a href=\"https://github.com/dtrace4linux/linux\">dtrace4linux</a> 主要由一个人（Paul Fox）利用业务时间将 Sun DTrace 移植到 Linux 中的。它令人印象深刻，一些供应器provider可以工作，还不是很完美，它最多应该算是实验性的工具（不安全）。我认为对于许可证的担心，使人们对它保持谨慎：它可能永远也进入不了 Linux 内核，因为 Sun 是基于 CDDL 许可证发布的 DTrace；Paul 的方法是将它作为一个插件。我非常希望看到 Linux 上的 DTrace，并且希望这个项目能够完成，我想我加入 Netflix 时将花一些时间来帮它完成。但是，我一直在使用内置的跟踪器 ftrace 和 perf_events。</p>\n<h4 id=\"toc_13\">8. OL DTrace</h4>\n<p><a href=\"http://docs.oracle.com/cd/E37670_01/E38608/html/index.html\">Oracle Linux DTrace</a> 是将 DTrace 移植到 Linux （尤其是 Oracle Linux）的重大努力。过去这些年的许多发布版本都一直稳定的进步，开发者甚至谈到了改善 DTrace 测试套件，这显示出这个项目很有前途。许多有用的功能已经完成：系统调用、剖析、sdt、proc、sched、以及 USDT。我一直在等待着 fbt（函数边界跟踪，对内核的动态跟踪），它将成为 Linux 内核上非常强大的功能。它最终能否成功取决于能否吸引足够多的人去使用 Oracle Linux（并为支持付费）。另一个羁绊是它并非完全开源的：内核组件是开源的，但用户级代码我没有看到。</p>\n<h4 id=\"toc_14\">9. sysdig</h4>\n<p><a href=\"http://www.sysdig.org/\">sysdig</a> 是一个很新的跟踪器，它可以使用类似 <code>tcpdump</code> 的语法来处理系统调用syscall事件，并用 lua 做后期处理。它也是令人印象深刻的，并且很高兴能看到在系统跟踪领域的创新。它的局限性是，它的系统调用只能是在当时，并且，它转储所有事件到用户级进行后期处理。你可以使用系统调用来做许多事情，虽然我希望能看到它去支持跟踪点、kprobes、以及 uprobes。我也希望看到它支持 eBPF 以查看内核内概览。sysdig 的开发者现在正在增加对容器的支持。可以关注它的进一步发展。</p>\n<h3 id=\"toc_15\">深入阅读</h3>\n<p>我自己的工作中使用到的跟踪器包括：</p>\n<ul>\n<li><strong>ftrace</strong> ： 我的 <a href=\"http://www.brendangregg.com/blog/2015-03-17/linux-performance-analysis-perf-tools.html\">perf-tools</a> 集合（查看示例目录）；我的 lwn.net 的 <a href=\"http://lwn.net/Articles/608497/\">ftrace 跟踪器的文章</a>； 一个 <a href=\"http://www.brendangregg.com/blog/2015-03-17/linux-performance-analysis-perf-tools.html\">LISA14</a> 演讲；以及帖子： <a href=\"http://www.brendangregg.com/blog/2014-07-13/linux-ftrace-function-counting.html\">函数计数</a>、 <a href=\"http://www.brendangregg.com/blog/2014-07-16/iosnoop-for-linux.html\">iosnoop</a>、 <a href=\"http://www.brendangregg.com/blog/2014-07-25/opensnoop-for-linux.html\">opensnoop</a>、 <a href=\"http://www.brendangregg.com/blog/2014-07-28/execsnoop-for-linux.html\">execsnoop</a>、 <a href=\"http://www.brendangregg.com/blog/2014-09-06/linux-ftrace-tcp-retransmit-tracing.html\">TCP retransmits</a>、 <a href=\"http://www.brendangregg.com/blog/2015-06-28/linux-ftrace-uprobe.html\">uprobes</a> 和 <a href=\"http://www.brendangregg.com/blog/2015-07-03/hacking-linux-usdt-ftrace.html\">USDT</a>。</li>\n<li><strong>perf_events</strong> ： 我的 <a href=\"http://www.brendangregg.com/perf.html\">perf_events 示例</a> 页面；在 SCALE 的一个 <a href=\"http://www.brendangregg.com/blog/2015-02-27/linux-profiling-at-netflix.html\">Linux Profiling at Netflix</a> 演讲；和帖子：<a href=\"http://www.brendangregg.com/blog/2014-06-22/perf-cpu-sample.html\">CPU 采样</a>、<a href=\"http://www.brendangregg.com/blog/2014-06-29/perf-static-tracepoints.html\">静态跟踪点</a>、<a href=\"http://www.brendangregg.com/blog/2014-07-01/perf-heat-maps.html\">热力图</a>、<a href=\"http://www.brendangregg.com/blog/2014-07-03/perf-counting.html\">计数</a>、<a href=\"http://www.brendangregg.com/blog/2014-09-11/perf-kernel-line-tracing.html\">内核行级跟踪</a>、<a href=\"http://www.brendangregg.com/blog/2015-02-26/linux-perf-off-cpu-flame-graph.html\">off-CPU 时间火焰图</a>。</li>\n<li><strong>eBPF</strong> : 帖子 <a href=\"http://www.brendangregg.com/blog/2015-05-15/ebpf-one-small-step.html\">eBPF：一个小的进步</a>，和一些 <a href=\"https://github.com/brendangregg/BPF-tools\">BPF-tools</a> （我需要发布更多）。</li>\n<li><strong>SystemTap</strong> ： 很久以前，我写了一篇 <a href=\"http://dtrace.org/blogs/brendan/2011/10/15/using-systemtap/\">使用 SystemTap</a> 的文章，它有点过时了。最近我发布了一些 <a href=\"https://github.com/brendangregg/systemtap-lwtools\">systemtap-lwtools</a>，展示了在没有内核调试信息的情况下，SystemTap 是如何使用的。</li>\n<li><strong>LTTng</strong> ： 我使用它的时间很短，不足以发布什么文章。</li>\n<li><strong>ktap</strong> ： 我的 <a href=\"http://www.brendangregg.com/ktap.html\">ktap 示例</a> 页面包括一行程序和脚本，虽然它是早期的版本。</li>\n<li><strong>dtrace4linux</strong> ： 在我的 <a href=\"http://www.brendangregg.com/sysperfbook.html\">系统性能</a> 书中包含了一些示例，并且在过去我为了某些事情开发了一些小的修补，比如， <a href=\"https://github.com/dtrace4linux/linux/issues/55\">timestamps</a>。</li>\n<li><strong>OL DTrace</strong> ： 因为它是对 DTrace 的直接移植，我早期 DTrace 的工作大多与之相关（链接太多了，可以去 <a href=\"http://www.brendangregg.com\">我的主页</a> 上搜索）。一旦它更加完美，我可以开发很多专用工具。</li>\n<li><strong>sysdig</strong> ： 我贡献了 <a href=\"https://github.com/brendangregg/sysdig/commit/d0eeac1a32d6749dab24d1dc3fffb2ef0f9d7151\">fileslower</a> 和 <a href=\"https://github.com/brendangregg/sysdig/commit/2f21604dce0b561407accb9dba869aa19c365952\">subsecond offset spectrogram</a> 的 chisel。</li>\n<li><strong>其它</strong> ： 关于 <a href=\"http://www.brendangregg.com/blog/2014-05-11/strace-wow-much-syscall.html\">strace</a>，我写了一些告诫文章。</li>\n</ul>\n<p>不好意思，没有更多的跟踪器了！ … 如果你想知道为什么 Linux 中的跟踪器不止一个，或者关于 DTrace 的内容，在我的 <a href=\"http://www.brendangregg.com/blog/2015-02-28/from-dtrace-to-linux.html\">从 DTrace 到 Linux</a> 的演讲中有答案，从 <a href=\"http://www.slideshare.net/brendangregg/from-dtrace-to-linux/28\">第 28 张幻灯片</a> 开始。</p>\n<p>感谢 <a href=\"http://www.beginningwithi.com/\">Deirdre Straughan</a> 的编辑，以及跟踪小马的创建（General Zoi 是小马的创建者）。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113735\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113735votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113735\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg", "fav_nums": 2, "title": "Linux 跟踪器之选", "comment_nums": 0, "tags": "IT技术,Linux"}/n{"create_date": "2018/03/11", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "url": "http://blog.jobbole.com/113737/", "url_object_id": "44f879688ac007f05bd74cdf86522e39", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.2daygeek.com/rm-command-to-move-files-to-trash-can-rm-alias/\">2daygeek</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9425-1.html\">Linux中国/amwps290</a>   </div><p>人类犯错误是因为我们不是一个可编程设备，所以，在使用 <code>rm</code> 命令时要额外注意，不要在任何时候使用 <code>rm -rf *</code>。当你使用 <code>rm</code> 命令时，它会永久删除文件，不会像文件管理器那样将这些文件移动到 “垃圾箱”。</p>\n<p>有时我们会将不应该删除的文件删除掉，所以当错误地删除了文件时该怎么办？ 你必须看看恢复工具（Linux 中有很多数据恢复工具），但我们不知道是否能将它百分之百恢复，所以要如何解决这个问题？</p>\n<p>我们最近发表了一篇关于 <a href=\"https://www.2daygeek.com/trash-cli-command-line-trashcan-linux-system/\">Trash-Cli</a> 的文章，在评论部分，我们从用户 Eemil Lgz 那里获得了一个关于 <a href=\"https://github.com/lagerspetz/linux-stuff/blob/master/scripts/saferm.sh\">saferm.sh</a> 脚本的更新，它可以帮助我们将文件移动到“垃圾箱”而不是永久删除它们。</p>\n<p>将文件移动到“垃圾桶”是一个好主意，当你无意中运行 <code>rm</code> 命令时，可以拯救你；但是很少有人会说这是一个坏习惯，如果你不注意“垃圾桶”，它可能会在一定的时间内被文件和文件夹堆积起来。在这种情况下，我建议你按照你的意愿去做一个定时任务。</p>\n<p>这适用于服务器和桌面两种环境。 如果脚本检测到 GNOME 、KDE、Unity 或 LXDE 桌面环境（DE），则它将文件或文件夹安全地移动到默认垃圾箱 <code>$HOME/.local/share/Trash/files</code>，否则会在您的主目录中创建垃圾箱文件夹 <code>$HOME/Trash</code>。</p>\n<p><code>saferm.sh</code> 脚本托管在 Github 中，可以从仓库中克隆，也可以创建一个名为 <code>saferm.sh</code> 的文件并复制其上的代码。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8248d93da1260753555\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git clone https://github.com/lagerspetz/linux-stuff\r\n$ sudo mv linux-stuff/scripts/saferm.sh /bin\r\n$ rm -Rf linux-stuff\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93da1260753555-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93da1260753555-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93da1260753555-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93da1260753555-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8248d93da1260753555-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/lagerspetz/linux-stuff</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93da1260753555-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">mv </span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">stuff</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">scripts</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">bin</span></div><div class=\"crayon-line\" id=\"crayon-5ab8248d93da1260753555-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rm</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">Rf </span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">stuff</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93da1260753555-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>在 <code>.bashrc</code> 文件中设置别名，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8248d93dab010283715\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalias rm=saferm.sh\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dab010283715-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93dab010283715-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8248d93dab010283715-1\"><span class=\"crayon-e\">alias </span><span class=\"crayon-v\">rm</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93dab010283715-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>执行下面的命令使其生效，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8248d93db1652370169\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ source ~/.bashrc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93db1652370169-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93db1652370169-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8248d93db1652370169-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">bashrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93db1652370169-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>一切就绪，现在你可以执行 <code>rm</code> 命令，自动将文件移动到”垃圾桶”，而不是永久删除它们。</p>\n<p>测试一下，我们将删除一个名为 <code>magi.txt</code> 的文件，命令行明确的提醒了 <code>Moving magi.txt to $HOME/.local/share/Trash/file</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8248d93db5440249058\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ rm -rf magi.txt\r\nMoving magi.txt to /home/magi/.local/share/Trash/files\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93db5440249058-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93db5440249058-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93db5440249058-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8248d93db5440249058-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rm</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">rf </span><span class=\"crayon-v\">magi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93db5440249058-2\"><span class=\"crayon-e\">Moving </span><span class=\"crayon-v\">magi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">magi</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Trash</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">files</span></div><div class=\"crayon-line\" id=\"crayon-5ab8248d93db5440249058-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>也可以通过 <code>ls</code> 命令或 <code>trash-cli</code> 进行验证。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8248d93de2298400186\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -lh /home/magi/.local/share/Trash/files\r\nPermissions Size User Date Modified Name\r\n.rw-r--r-- 32 magi 11 Oct 16:24 magi.txt    \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93de2298400186-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93de2298400186-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93de2298400186-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93de2298400186-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8248d93de2298400186-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">magi</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Trash</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">files</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93de2298400186-2\"><span class=\"crayon-e\">Permissions </span><span class=\"crayon-e\">Size </span><span class=\"crayon-e\">User </span><span class=\"crayon-e\">Date </span><span class=\"crayon-e\">Modified </span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-5ab8248d93de2298400186-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">magi</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">magi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93de2298400186-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>或者我们可以通过文件管理器界面中查看相同的内容。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a21377f62f1d9e9057d4bd7380a6acf7.png\" alt=\"![][3]\"></p>\n<p>（LCTT 译注：原文此处混淆了部分 trash-cli 的内容，考虑到文章衔接和逻辑，此处略。）</p>\n<p>要了解 <code>saferm.sh</code> 的其他选项，请查看帮助。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8248d93dee287358744\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ saferm.sh -h\r\nThis is saferm.sh 1.16. LXDE and Gnome3 detection.\r\nWill ask to unsafe-delete instead of cross-fs move. Allows unsafe (regular rm) delete (ignores trashinfo).\r\nCreates trash and trashinfo directories if they do not exist. Handles symbolic link deletion.\r\nDoes not complain about different user any more.\r\n\r\nUsage: /path/to/saferm.sh [OPTIONS] [--] files and dirs to safely remove\r\nOPTIONS:\r\n-r      allows recursively removing directories.\r\n-f      Allow deleting special files (devices, ...).\r\n-u      Unsafe mode, bypass trash and delete files permanently.\r\n-v      Verbose, prints more messages. Default in this version.\r\n-q      Quiet mode. Opposite of verbose.\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dee287358744-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93dee287358744-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dee287358744-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93dee287358744-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dee287358744-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93dee287358744-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dee287358744-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93dee287358744-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dee287358744-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93dee287358744-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dee287358744-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93dee287358744-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dee287358744-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8248d93dee287358744-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8248d93dee287358744-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8248d93dee287358744-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93dee287358744-2\"><span class=\"crayon-r\">This</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.16.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LXDE </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Gnome3 </span><span class=\"crayon-v\">detection</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8248d93dee287358744-3\"><span class=\"crayon-e\">Will </span><span class=\"crayon-e\">ask </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unsafe</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">delete </span><span class=\"crayon-e\">instead </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">cross</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">fs </span><span class=\"crayon-v\">move</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Allows </span><span class=\"crayon-e\">unsafe</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">regular </span><span class=\"crayon-v\">rm</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">ignores </span><span class=\"crayon-v\">trashinfo</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93dee287358744-4\"><span class=\"crayon-e\">Creates </span><span class=\"crayon-e\">trash </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">trashinfo </span><span class=\"crayon-e\">directories </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">they </span><span class=\"crayon-st\">do</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">exist</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Handles </span><span class=\"crayon-e\">symbolic </span><span class=\"crayon-e\">link </span><span class=\"crayon-v\">deletion</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8248d93dee287358744-5\"><span class=\"crayon-e\">Does </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complain </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">different </span><span class=\"crayon-e\">user </span><span class=\"crayon-e\">any </span><span class=\"crayon-v\">more</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93dee287358744-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8248d93dee287358744-7\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">saferm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OPTIONS</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">files </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dirs </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">safely </span><span class=\"crayon-e\">remove</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93dee287358744-8\"><span class=\"crayon-v\">OPTIONS</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ab8248d93dee287358744-9\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">allows </span><span class=\"crayon-e\">recursively </span><span class=\"crayon-e\">removing </span><span class=\"crayon-v\">directories</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93dee287358744-10\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Allow </span><span class=\"crayon-e\">deleting </span><span class=\"crayon-e\">special </span><span class=\"crayon-e\">files</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">devices</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8248d93dee287358744-11\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Unsafe </span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bypass </span><span class=\"crayon-e\">trash </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete </span><span class=\"crayon-e\">files </span><span class=\"crayon-v\">permanently</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93dee287358744-12\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">Verbose</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">prints </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">messages</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">Default</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">version</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ab8248d93dee287358744-13\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">q</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Quiet </span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Opposite </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">verbose</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8248d93dee287358744-14\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8248d93dee287358744-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113737\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113737votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113737\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg", "fav_nums": 2, "title": "给 “rm” 命令添加个“垃圾桶”", "comment_nums": 1, "tags": "IT技术, 1 评论 ,Linux"}/n{"create_date": "2018/03/09", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/07/8266f93c2d45d97e0d52e71428ca372e.png"], "url": "http://blog.jobbole.com/113707/", "url_object_id": "8dc9c672255230d0cfa267884f1e9bb5", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">Sam哥哥</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<h3>概述</h3>\n<p>以前参加过一个库存系统，由于其业务复杂性，搞了很多个应用来支撑。这样的话一份库存数据就有可能同时有多个应用来修改库存数据。比如说，有定时任务域xx.cron，和SystemA域和SystemB域这几个JAVA应用，可能同时修改同一份库存数据。如果不做协调的话，就会有脏数据出现。对于跨JAVA进程的线程协调，可以借助外部环境，例如DB或者Redis。下文介绍一下如何使用DB来实现分布式锁。</p>\n<h3>设计</h3>\n<p>本文设计的分布式锁的交互方式如下：<br>\n1、根据业务字段生成<code>transaction_id</code>，并线程安全的创建锁资源<br>\n2、根据<code>transaction_id</code>申请锁<br>\n3、释放锁</p>\n<h3>动态创建锁资源</h3>\n<p>在使用<code>synchronized</code>关键字的时候，必须指定一个锁对象。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524a95572946994\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsynchronized(obj) {\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524a95572946994-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524a95572946994-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524a95572946994-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524a95572946994-1\"><span class=\"crayon-e\">synchronized</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">obj</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524a95572946994-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524a95572946994-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>进程内的线程可以基于obj来实现同步。obj在这里可以理解为一个锁对象。如果线程要进入<code>synchronized</code>代码块里，必须先持有obj对象上的锁。这种锁是JAVA里面的内置锁，创建的过程是线程安全的。那么借助DB，如何保证创建锁的过程是线程安全的呢？可以利用DB中的<code>UNIQUE KEY</code>特性，一旦出现了重复的key，由于<code>UNIQUE KEY</code>的唯一性，会抛出异常的。在JAVA里面，是<code>SQLIntegrityConstraintViolationException</code>异常。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524a9f948599571\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncreate table distributed_lock\r\n(\r\n    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT COMMENT '自增主键',\r\n    transaction_id varchar(128) NOT NULL DEFAULT '' COMMENT '事务id',\r\n    last_update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL COMMENT '最后更新时间',\r\n    create_time TIMESTAMP DEFAULT '0000-00-00 00:00:00' NOT NULL COMMENT '创建时间',\r\n    UNIQUE KEY `idx_transaction_id` (`transaction_id`)\r\n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524a9f948599571-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524a9f948599571-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524a9f948599571-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524a9f948599571-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524a9f948599571-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524a9f948599571-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524a9f948599571-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524a9f948599571-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524a9f948599571-1\"><span class=\"crayon-e\">create </span><span class=\"crayon-e\">table </span><span class=\"crayon-e\">distributed_lock</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524a9f948599571-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524a9f948599571-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">id </span><span class=\"crayon-e\">BIGINT </span><span class=\"crayon-t\">UNSIGNED</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'自增主键'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524a9f948599571-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">transaction_id </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">128</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'事务id'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524a9f948599571-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">last_update_time </span><span class=\"crayon-e\">TIMESTAMP </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CURRENT_TIMESTAMP </span><span class=\"crayon-e\">ON </span><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">CURRENT_TIMESTAMP </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'最后更新时间'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524a9f948599571-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">create_time </span><span class=\"crayon-e\">TIMESTAMP </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0000-00-00 00:00:00'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'创建时间'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524a9f948599571-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">UNIQUE </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">idx_transaction_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">transaction_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524a9f948599571-8\"><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p><code>transaction_id</code>是事务Id，比如说，可以用</p>\n<blockquote><p>仓库 + 条码 + 销售模式</p></blockquote>\n<p>来组装一个<code>transaction_id</code>，表示某仓库某销售模式下的某个条码资源。不同条码，当然就有不同的<code>transaction_id</code>。如果有两个应用，拿着相同的<code>transaction_id</code>来创建锁资源的时候，只能有一个应用创建成功。</p>\n<blockquote><p>一条<code>distributed_lock</code>记录插入成功了，就表示一份锁资源创建成功了。</p></blockquote>\n<h3>DB连接池列表设计</h3>\n<p>在写操作频繁的业务系统中，通常会进行分库，以降低单数据库写入的压力，并提高写操作的吞吐量。如果使用了分库，那么业务数据自然也都分配到各个数据库上了。在这种水平切分的多数据库上使用DB分布式锁，可以自定义一个<code>DataSouce</code>列表。并暴露一个<code>getConnection(String transactionId)</code>方法，按照<code>transactionId</code>找到对应的<code>Connection</code>。</p>\n<p>实现代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524aa4932251719\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage dlock;\r\n\r\nimport com.alibaba.druid.pool.DruidDataSource;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport javax.annotation.PostConstruct;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.sql.Connection;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Properties;\r\n\r\n@Component\r\npublic class DataSourcePool {\r\n    private List dlockDataSources = new ArrayList();\r\n\r\n    @PostConstruct\r\n    private void initDataSourceList() throws IOException {\r\n        Properties properties = new Properties();\r\n        FileInputStream fis = new FileInputStream(\"db.properties\");\r\n        properties.load(fis);\r\n\r\n        Integer lockNum = Integer.valueOf(properties.getProperty(\"DLOCK_NUM\"));\r\n        for (int i = 0; i \"DLOCK_USER_\" + i);\r\n            String password = properties.getProperty(\"DLOCK_PASS_\" + i);\r\n            Integer initSize = Integer.valueOf(properties.getProperty(\"DLOCK_INIT_SIZE_\" + i));\r\n            Integer maxSize = Integer.valueOf(properties.getProperty(\"DLOCK_MAX_SIZE_\" + i));\r\n            String url = properties.getProperty(\"DLOCK_URL_\" + i);\r\n\r\n            DruidDataSource dataSource = createDataSource(user,password,initSize,maxSize,url);\r\n            dlockDataSources.add(dataSource);\r\n        }\r\n    }\r\n\r\n    private DruidDataSource createDataSource(String user, String password, Integer initSize, Integer maxSize, String url) {\r\n        DruidDataSource dataSource = new DruidDataSource();\r\n        dataSource.setDriverClassName(\"com.mysql.jdbc.Driver\");\r\n        dataSource.setUsername(user);\r\n        dataSource.setPassword(password);\r\n        dataSource.setUrl(url);\r\n        dataSource.setInitialSize(initSize);\r\n        dataSource.setMaxActive(maxSize);\r\n\r\n        return dataSource;\r\n    }\r\n\r\n    public Connection getConnection(String transactionId) throws Exception {\r\n        if (dlockDataSources.size() 0) {\r\n            return null;\r\n        }\r\n\r\n        if (transactionId == null || \"\".equals(transactionId)) {\r\n            throw new RuntimeException(\"transactionId是必须的\");\r\n        }\r\n\r\n        int hascode = transactionId.hashCode();\r\n        if (hascode 0) {\r\n            hascode = - hascode;\r\n        }\r\n\r\n        return dlockDataSources.get(hascode % dlockDataSources.size()).getConnection();\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa4932251719-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa4932251719-64\">64</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dlock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">alibaba</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">druid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DruidDataSource</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">springframework</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stereotype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Component</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">javax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">annotation</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PostConstruct</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-7\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">FileInputStream</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-8\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">IOException</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-9\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sql</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Connection</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-10\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-11\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">List</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-12\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Properties</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-14\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Component</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-15\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DataSourcePool</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">List </span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ArrayList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">PostConstruct</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-19\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">initDataSourceList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Properties </span><span class=\"crayon-v\">properties</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Properties</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">FileInputStream </span><span class=\"crayon-v\">fis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FileInputStream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"db.properties\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">load</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fis</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lockNum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_NUM\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"DLOCK_USER_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_PASS_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">initSize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_INIT_SIZE_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maxSize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_MAX_SIZE_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"DLOCK_URL_\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-30\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">DruidDataSource </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">createDataSource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">initSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">maxSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DruidDataSource </span><span class=\"crayon-e\">createDataSource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">initSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maxSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">DruidDataSource </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DruidDataSource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setDriverClassName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"com.mysql.jdbc.Driver\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setUsername</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setPassword</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setUrl</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-42\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setInitialSize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">initSize</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setMaxActive</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">maxSize</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-44\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-45\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataSource</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-50\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-51\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-52\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-53\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-54\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RuntimeException</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"transactionId是必须的\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-55\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-56\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hascode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hashCode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-58\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">hascode</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-59\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">hascode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hascode</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-61\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-62\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hascode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dlockDataSources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa4932251719-63\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa4932251719-64\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0106 seconds] -->\r\n<p>首先编写一个<code>initDataSourceList</code>方法，并利用Spring的<code>PostConstruct</code>注解初始化一个<code>DataSource</code> 列表。相关的DB配置从<code>db.properties</code>读取。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524aa8659356694\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDLOCK_NUM=2\r\n\r\nDLOCK_USER_0=\"user1\"\r\nDLOCK_PASS_0=\"pass1\"\r\nDLOCK_INIT_SIZE_0=2\r\nDLOCK_MAX_SIZE_0=10\r\nDLOCK_URL_0=\"jdbc:mysql://localhost:3306/test1\"\r\n\r\nDLOCK_USER_1=\"user1\"\r\nDLOCK_PASS_1=\"pass1\"\r\nDLOCK_INIT_SIZE_1=2\r\nDLOCK_MAX_SIZE_1=10\r\nDLOCK_URL_1=\"jdbc:mysql://localhost:3306/test2\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa8659356694-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa8659356694-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa8659356694-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa8659356694-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa8659356694-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa8659356694-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa8659356694-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa8659356694-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa8659356694-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa8659356694-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa8659356694-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aa8659356694-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aa8659356694-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524aa8659356694-1\"><span class=\"crayon-v\">DLOCK_NUM</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa8659356694-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa8659356694-3\"><span class=\"crayon-v\">DLOCK_USER_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"user1\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa8659356694-4\"><span class=\"crayon-v\">DLOCK_PASS_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"pass1\"</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa8659356694-5\"><span class=\"crayon-v\">DLOCK_INIT_SIZE_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa8659356694-6\"><span class=\"crayon-v\">DLOCK_MAX_SIZE_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa8659356694-7\"><span class=\"crayon-v\">DLOCK_URL_0</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"jdbc:mysql://localhost:3306/test1\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa8659356694-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa8659356694-9\"><span class=\"crayon-v\">DLOCK_USER_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"user1\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa8659356694-10\"><span class=\"crayon-v\">DLOCK_PASS_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"pass1\"</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa8659356694-11\"><span class=\"crayon-v\">DLOCK_INIT_SIZE_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aa8659356694-12\"><span class=\"crayon-v\">DLOCK_MAX_SIZE_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aa8659356694-13\"><span class=\"crayon-v\">DLOCK_URL_1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"jdbc:mysql://localhost:3306/test2\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><code>DataSource</code>使用阿里的<code>DruidDataSource</code>。</p>\n<p>接着最重要的一个实现<code>getConnection(String transactionId)</code>方法。实现原理很简单，获取<code>transactionId</code>的hashcode，并对<code>DataSource</code>的长度取模即可。</p>\n<p>连接池列表设计好后，就可以实现往<code>distributed_lock</code>表插入数据了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524aac019443168\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage dlock;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.sql.*;\r\n\r\n@Component\r\npublic class DistributedLock {\r\n\r\n    @Autowired\r\n    private DataSourcePool dataSourcePool;\r\n\r\n    /**\r\n     * 根据transactionId创建锁资源\r\n     */\r\n    public String createLock(String transactionId) throws Exception{\r\n        if (transactionId == null) {\r\n            throw new RuntimeException(\"transactionId是必须的\");\r\n        }\r\n        Connection connection = null;\r\n        Statement statement = null;\r\n        try {\r\n            connection = dataSourcePool.getConnection(transactionId);\r\n            connection.setAutoCommit(false);\r\n            statement = connection.createStatement();\r\n            statement.executeUpdate(\"INSERT INTO distributed_lock(transaction_id) VALUES ('\" + transactionId + \"')\");\r\n            connection.commit();\r\n            return transactionId;\r\n        }\r\n        catch (SQLIntegrityConstraintViolationException icv) {\r\n            //说明已经生成过了。\r\n            if (connection != null) {\r\n                connection.rollback();\r\n            }\r\n            return transactionId;\r\n        }\r\n        catch (Exception e) {\r\n            if (connection != null) {\r\n                connection.rollback();\r\n            }\r\n            throw  e;\r\n        }\r\n        finally {\r\n            if (statement != null) {\r\n                statement.close();\r\n            }\r\n\r\n            if (connection != null) {\r\n                connection.close();\r\n            }\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524aac019443168-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524aac019443168-54\">54</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dlock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">springframework</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beans</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">annotation</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Autowired</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">springframework</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stereotype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Component</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sql</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-8\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Component</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-9\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DistributedLock</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Autowired</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-12\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DataSourcePool </span><span class=\"crayon-v\">dataSourcePool</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-15\"><span class=\"crayon-c\">     * 根据transactionId创建锁资源</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-16\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">createLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RuntimeException</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"transactionId是必须的\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Statement </span><span class=\"crayon-v\">statement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataSourcePool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setAutoCommit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">statement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createStatement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">statement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">executeUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"INSERT INTO distributed_lock(transaction_id) VALUES ('\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"')\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">commit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SQLIntegrityConstraintViolationException </span><span class=\"crayon-v\">icv</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">//说明已经生成过了。</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-34\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-36\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-39\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-40\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-41\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-44\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">statement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-46\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">statement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-48\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-49\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-50\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-51\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524aac019443168-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524aac019443168-54\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0064 seconds] -->\r\n<p></p>\n<h3>根据transactionId锁住线程</h3>\n<p>接下来利用DB的<code>select for update</code>特性来锁住线程。当多个线程根据相同的<code>transactionId</code>并发同时操作<code>select for update</code>的时候，只有一个线程能成功，其他线程都<code>block</code>住，直到<code>select for update</code>成功的线程使用<code>commit</code>操作后，<code>block</code>住的所有线程的其中一个线程才能开始干活。我们在上面的<code>DistributedLock</code>类中创建一个<code>lock</code>方法。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524ab1842979033\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n public boolean lock(String transactionId) throws Exception {\r\n        Connection connection = null;\r\n        PreparedStatement preparedStatement = null;\r\n        ResultSet resultSet = null;\r\n        try {\r\n            connection = dataSourcePool.getConnection(transactionId);\r\n            preparedStatement = connection.prepareStatement(\"SELECT * FROM distributed_lock WHERE transaction_id = ? FOR UPDATE \");\r\n            preparedStatement.setString(1,transactionId);\r\n            resultSet = preparedStatement.executeQuery();\r\n            if (!resultSet.next()) {\r\n                connection.rollback();\r\n                return false;\r\n            }\r\n            return true;\r\n        } catch (Exception e) {\r\n            if (connection != null) {\r\n                connection.rollback();\r\n            }\r\n            throw  e;\r\n        }\r\n        finally {\r\n            if (preparedStatement != null) {\r\n                preparedStatement.close();\r\n            }\r\n\r\n            if (resultSet != null) {\r\n                resultSet.close();\r\n            }\r\n\r\n            if (connection != null) {\r\n                connection.close();\r\n            }\r\n        }\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab1842979033-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab1842979033-34\">34</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">PreparedStatement </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">ResultSet </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataSourcePool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">prepareStatement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SELECT * FROM distributed_lock WHERE transaction_id = ? FOR UPDATE \"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">executeQuery</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-17\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-23\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-27\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-30\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-31\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab1842979033-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab1842979033-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0052 seconds] -->\r\n<p></p>\n<h3>实现解锁操作</h3>\n<p>当线程执行完任务后，必须手动的执行解锁操作，之前被锁住的线程才能继续干活。在我们上面的实现中，其实就是获取到当时<code>select for update</code>成功的线程对应的<code>Connection</code>，并实行<code>commit</code>操作即可。</p>\n<p>那么如何获取到呢？我们可以利用<code>ThreadLocal</code>。首先在<code>DistributedLock</code>类中定义</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524ab5216499051\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprivate ThreadLocal threadLocalConn = new ThreadLocal();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab5216499051-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524ab5216499051-1\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ThreadLocal </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ThreadLocal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>每次调用<code>lock</code>方法的时候，把<code>Connection</code>放置到<code>ThreadLocal</code>里面。我们修改<code>lock</code>方法。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524ab8831332299\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n public boolean lock(String transactionId) throws Exception {\r\n        Connection connection = null;\r\n        PreparedStatement preparedStatement = null;\r\n        ResultSet resultSet = null;\r\n        try {\r\n            connection = dataSourcePool.getConnection(transactionId);\r\n            threadLocalConn.set(connection);\r\n            preparedStatement = connection.prepareStatement(\"SELECT * FROM distributed_lock WHERE transaction_id = ? FOR UPDATE \");\r\n            preparedStatement.setString(1,transactionId);\r\n            resultSet = preparedStatement.executeQuery();\r\n            if (!resultSet.next()) {\r\n                connection.rollback();\r\n                threadLocalConn.remove();\r\n                return false;\r\n            }\r\n            return true;\r\n        } catch (Exception e) {\r\n            if (connection != null) {\r\n                connection.rollback();\r\n                threadLocalConn.remove();\r\n            }\r\n            throw  e;\r\n        }\r\n        finally {\r\n            if (preparedStatement != null) {\r\n                preparedStatement.close();\r\n            }\r\n\r\n            if (resultSet != null) {\r\n                resultSet.close();\r\n            }\r\n\r\n            if (connection != null) {\r\n                connection.close();\r\n            }\r\n        }\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524ab8831332299-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524ab8831332299-37\">37</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">PreparedStatement </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">ResultSet </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataSourcePool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">prepareStatement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SELECT * FROM distributed_lock WHERE transaction_id = ? FOR UPDATE \"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">transactionId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">executeQuery</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-19\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-20\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-26\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">preparedStatement</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-28\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-30\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">resultSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-32\"> </div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-34\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524ab8831332299-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524ab8831332299-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0053 seconds] -->\r\n<p>这样子，当获取到<code>Connection</code>后，将其设置到<code>ThreadLocal</code>中，如果<code>lock</code>方法出现异常，则将其从<code>ThreadLocal</code>中移除掉。</p>\n<p>有了这几步后，我们可以来实现解锁操作了。我们在<code>DistributedLock</code>添加一个<code>unlock</code>方法。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab8155524abc707646581\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n public void unlock() throws Exception {\r\n        Connection connection = null;\r\n        try {\r\n            connection = threadLocalConn.get();\r\n            if (!connection.isClosed()) {\r\n                connection.commit();\r\n                connection.close();\r\n                threadLocalConn.remove();\r\n            }\r\n        } catch (Exception e) {\r\n            if (connection != null) {\r\n                connection.rollback();\r\n                connection.close();\r\n            }\r\n            threadLocalConn.remove();\r\n            throw e;\r\n        }\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ab8155524abc707646581-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab8155524abc707646581-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isClosed</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-6\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">commit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rollback</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">connection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">threadLocalConn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab8155524abc707646581-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab8155524abc707646581-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p></p>\n<h3>缺点</h3>\n<p>毕竟是利用DB来实现分布式锁，对DB还是造成一定的压力。当时考虑使用DB做分布式的一个重要原因是，我们的应用是后端应用，平时流量不大的，反而关键的是要保证库存数据的正确性。对于像前端库存系统，比如添加购物车占用库存等操作，最好别使用DB来实现分布式锁了。</p>\n<h3>进一步思考</h3>\n<p>如果想锁住多份数据该怎么实现？比如说，某个库存操作，既要修改物理库存，又要修改虚拟库存，想锁住物理库存的同时，又锁住虚拟库存。其实也不是很难，参考<code>lock</code>方法，写一个<code>multiLock</code>方法，提供多个<code>transactionId</code>的入参，for循环处理就可以了。这个后续有时间再补上。</p>\n</div>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/54f7206fd1f1907bec78ddf32f50d66d.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113707\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113707votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113707\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">Sam哥哥</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/3660a090181b2b6ae3bd8c07d393aa36.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            互联网技术爱好者，目前就职于广州唯品会担任JAVA高级开发。个人的csdn技术博客如下：http://blog.csdn.net/linsongbin1本人伯乐在线的文章，都出自这个csdn博客        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/sam-2/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/Sam%E5%93%A5%E5%93%A5/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/cd53a2302bc0852583e1e611cf280b011948f392.jpg", "fav_nums": 3, "title": "利用 DB 实现分布式锁的思路", "comment_nums": 4, "tags": "IT技术, 4 评论 ,分布式"}/n{"create_date": "2018/03/12", "praise_nums": "2", "front_image_url": ["http://wx3.sinaimg.cn/large/7cc829d3gy1fo80ho6bhuj20fu09twfy.jpg"], "url": "http://blog.jobbole.com/113631/", "url_object_id": "2796ee392f681a8f36e227ce37a3b069", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://9tabs.com/random/2017/12/23/evil-coding-incantations.html\">9tabs</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>自从我看了 Gary Bernhardt 备受推崇的一个视频 <a href=\"https://www.destroyallsoftware.com/talks/wat\">Wat</a>，就惊异于特定编程语言的怪异行为。相较于其他编程语言来说，某些编程语言的行为更出乎意料。例如，有<a href=\"http://amzn.to/2zoCGSn\">一整本书</a>是针对 Java 的边缘案例和古怪情况。同样，差不多只要 200 美元你就可以阅读 <a href=\"https://www.iso.org/standard/68564.html\">C++ 规范说明</a>了。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fo80ho6bhuj20fu09twfy.jpg\"></p>\n<p>下面是我最喜欢的、惊奇的、滑稽的并仍然有效的咒语集合。一般来讲，利用这些古怪的行为被视为<em>坏事</em>，因为代码不应该出乎意料。值得庆幸的是，如果你尝试以下大多数蠢事，有很多代码校检工具（linters）已经准备好嘲笑你了。说了这么多，知识就是力量，那就开始吧。</p>\n<h3>Python 2 中对 True 邪恶的重赋值</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039b5681510718\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; True = False\r\n&gt;&gt;&gt; True\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039b5681510718-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039b5681510718-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039b5681510718-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039b5681510718-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039b5681510718-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039b5681510718-3\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>谢天谢地，这在 Python 3 中会导致 <span style=\"text-decoration: underline;\">SyntaxError</span>，因为<a href=\"https://docs.python.org/3.0/whatsnew/3.0.html\"> True、False 和 None 现在是保留字</a>。它仍远没有 C++ 的那个恶作剧那么邪恶，把 <span style=\"text-decoration: underline;\">#define true false</span> 悄悄写进同事的开发机器的标准头文件中。</p>\n<h3>Java 和 Python 中的诡异行为实例</h3>\n<p>对 Java 新手程序员来说，<span style=\"color: #ff0000;\">==</span> 的语义往往使人困惑。甚至在微不足道的情境下，这个操作符的前后矛盾也会使情况变得复杂，即使性能效益是值得的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039be620427740\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nInteger a = 100;\r\nInteger b = 100;\r\nSystem.out.print(a == b); // prints true\r\n\r\nInteger c = 200;\r\nInteger d = 200;\r\nSystem.out.print(c == d); // prints false</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039be620427740-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039be620427740-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039be620427740-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039be620427740-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039be620427740-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039be620427740-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039be620427740-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039be620427740-1\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039be620427740-2\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039be620427740-3\"><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039be620427740-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ab82a08039be620427740-5\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039be620427740-6\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039be620427740-7\"><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints false</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>JVM 会对区间 [-128, 127] 内的值使用相同的引用。更奇怪的是，Python 中也有同样的行为。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039c2149695773\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = 256\r\n&gt;&gt;&gt; y = 256\r\n&gt;&gt;&gt; x is y\r\nTrue\r\n\r\n&gt;&gt;&gt; x = 257\r\n&gt;&gt;&gt; y = 257\r\n&gt;&gt;&gt; x is y\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c2149695773-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039c2149695773-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c2149695773-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039c2149695773-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c2149695773-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039c2149695773-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c2149695773-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039c2149695773-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c2149695773-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039c2149695773-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039c2149695773-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039c2149695773-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039c2149695773-4\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039c2149695773-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039c2149695773-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">257</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039c2149695773-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">257</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039c2149695773-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039c2149695773-9\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>目前为止，还没有特别出乎意料的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039c6453954730\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = -5\r\n&gt;&gt;&gt; y = -5\r\n&gt;&gt;&gt; x is y\r\nTrue\r\n\r\n&gt;&gt;&gt; x = -6\r\n&gt;&gt;&gt; y = -6\r\n&gt;&gt;&gt; x is y\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c6453954730-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039c6453954730-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c6453954730-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039c6453954730-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c6453954730-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039c6453954730-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c6453954730-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039c6453954730-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039c6453954730-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039c6453954730-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039c6453954730-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039c6453954730-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039c6453954730-4\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039c6453954730-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039c6453954730-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039c6453954730-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039c6453954730-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039c6453954730-9\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>似乎 python 解释器使用相同例子的下限是……-5。区间 [-5, 256] 内的整数有同样的 ID。不知怎地，这变得更奇怪了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039ca139088183\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = -10\r\n&gt;&gt;&gt; y = -10\r\n&gt;&gt;&gt; x is y\r\nFalse\r\n&gt;&gt;&gt; x, y = [-10, -10]\r\n&gt;&gt;&gt; x is y\r\nTrue</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039ca139088183-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039ca139088183-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039ca139088183-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039ca139088183-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039ca139088183-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039ca139088183-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039ca139088183-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039ca139088183-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039ca139088183-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039ca139088183-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039ca139088183-4\"><span class=\"crayon-t\">False</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039ca139088183-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039ca139088183-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039ca139088183-7\"><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>似乎使用解构赋值改变了这里的规则。我不确定为什么是这样。事实上，我在 <a href=\"https://stackoverflow.com/questions/47958141/what-is-the-difference-between-destructured-assignment-and-normal-assignment\" target=\"_blank\">Stack Overflow 上提了一个问题</a>来试着理解它。我的猜测是，一个列表中的重复值指向同一个对象，用以节省内存。</p>\n<h3>C 中颠倒的下标符号</h3>\n<p>颠倒的下标符号，会使所有开发者都头疼。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039cd029477188\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint x[1] = { 0xdeadbeef };\r\n\r\nprintf(\"%xn\", 0[x]); // prints deadbeef</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039cd029477188-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039cd029477188-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039cd029477188-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039cd029477188-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0xdeadbeef</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039cd029477188-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ab82a08039cd029477188-3\"><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%xn\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints deadbeef</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>这行得通的原因是，<span style=\"text-decoration: underline;\">array[index]</span> 确实只是 <span style=\"text-decoration: underline;\">*(array + index)</span> 的语法糖。由于加法的交换性，我们可以交换数组和索引，并得到同样的结果。</p>\n<h3>C 中的“倒数”操作符</h3>\n<p><span style=\"color: #ff0000;\">–&gt;</span> 操作符第一次被看到时，似乎是句法错误。在你意识到它可编译时，它看起来像未被记载的语言特性。幸运的是，两者都不是。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039d1925496494\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor (x = 3; x --&gt; 0;) {\r\n    printf(\"%d \", x); // prints 2 1 0\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039d1925496494-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039d1925496494-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039d1925496494-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039d1925496494-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039d1925496494-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints 2 1 0</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039d1925496494-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><span style=\"color: #ff0000;\">–&gt;</span> “操作符”实际上是两个操作符，在这个背景下解析为<span style=\"text-decoration: underline;\"> (x–) &gt; 0</span>。众所周知，大量使用会导致困惑，这完全是邪恶的。</p>\n<h3>C 中的 <span style=\"text-decoration: underline;\">sizeof</span> 操作符</h3>\n<p><span style=\"text-decoration: underline;\">sizeof</span> 操作符是一个编译时操作符，这给予了它有趣的属性。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039d5656545101\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint x = 0;\r\nsizeof(x += 1);\r\nif (x == 0) {\r\n    printf(\"wtf?\"); // this will be printed\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039d5656545101-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039d5656545101-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039d5656545101-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039d5656545101-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039d5656545101-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039d5656545101-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039d5656545101-2\"><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039d5656545101-3\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039d5656545101-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"wtf?\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// this will be printed</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039d5656545101-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>由于 <span style=\"text-decoration: underline;\">sizeof</span> 操作符的例子是对编译时进行评估的，<span style=\"text-decoration: underline;\">(x += 1) </span>不会运行。另一件趣事是，研究表明 <span style=\"text-decoration: underline;\">printf(“wtf?”)</span> 是最普遍的没有被 push 的代码。</p>\n<h3>Lua、Smalltalk、MATLAB 及其他语言，索引由 1 开始</h3>\n<p><a href=\"https://www.reddit.com/r/ProgrammerHumor/\">/r/programminghumor</a> 一直在用“<a href=\"https://goo.gl/QreBLU\">indexing</a> <a href=\"https://goo.gl/bm8Akz\">starts</a> <a href=\"https://goo.gl/joQ9gt\">at</a> <a href=\"https://goo.gl/MM5BwP\">1</a>”表情包取乐。令人震惊的是，有大量编程语言使用从 1 开始的数组索引。可以在<a href=\"https://goo.gl/kASpE7\">这里</a>找到更全面的清单。</p>\n<h3>Ruby 中的 0 被判为 true</h3>\n<p>… and only Ruby. *</p>\n<p>在 Ruby 中是这样。*</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039d9935700075\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif 0 then print 'thanks, ruby' end # prints thanks, ruby</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039d9935700075-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039d9935700075-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'thanks, ruby'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># prints thanks, ruby</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>* edit: It was pointed out on <a href=\"https://goo.gl/gnm654\">reddit</a> that this is true for Lua, Lisp, and Erlang as well.</p>\n<p>* 修订：Reddit 上有人指出，这在 Lua、Lisp 和 Erlang 中也成立。</p>\n<p>Trigraph, Digraphs, and Tokens in C</p>\n<h3>C 中的 Trigraph、Digraph 和 Token</h3>\n<p>由于历史原因，C 语言中的非字母符号有替代品。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fo80hoo0iij20cz0993zc.jpg\"></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ab82a08039df772545294\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif (true and true) { // same as if (true &amp;&amp; true)\r\n    printf(\"thanks, c\");\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039df772545294-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ab82a08039df772545294-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ab82a08039df772545294-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ab82a08039df772545294-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// same as if (true &amp;&amp; true)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ab82a08039df772545294-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"thanks, c\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ab82a08039df772545294-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>有些外国设备，例如 IBM 3270，在 C/C++ 中不提供某些常用符号，所以提供了 digraph、trigraph 和 token 来避免排斥特定字符集。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113631\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113631votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113631\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/280c8276f25da11c38fa166860dc2754091de28f.jpg", "fav_nums": 4, "title": "邪恶的编程咒语", "comment_nums": 1, "tags": "开发, 1 评论 ,编程语言"}/n{"create_date": "2018/03/08", "praise_nums": "1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/f4b90537c9da89d7b415ea699c9fe008.jpg"], "url": "http://blog.jobbole.com/113722/", "url_object_id": "f7fd5491f869ff395a8d3670134dea28", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.gamelook.com.cn/2018/03/322396\">gamelook</a>   </div><p>对于游戏开发者而言，失去双手对于职业和生活可能是灾难性的打击。</p>\n<div>\n<p>然而，业内却有一小部分人每天都要面临这样的问题，位于奥斯丁的开发者Rusty Moyher就是其中之一。五年前，他被诊断为重复性劳损（RSI），而作为一名写代码的游戏策划，这个病症几乎让他的职业生涯和对游戏的热情遭遇毁灭性打击。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/0f9786b2767ac6277e33aa54660bf447.jpg\" alt=\"\" width=\"675\" height=\"411\"></p>\n<p>图片来自网络，并非开发者本人</p>\n<p>为了便于理解，这里我们复制了一段百度百科的介绍:重复使力伤害（repetitive strain injury，缩写RSI），或称重复性劳损、劳肌损伤、重复性动作的伤害，是指因长时间重复使用某组肌肉造成的损害。吉他、打字、在装配线工作、某些球类运动（棒球、网球、高尔夫球）都可能引致RSI，是常见的职业病，疼痛、肿胀、僵硬和易累等都是RSI的病征。不会在瞬间发生，是经年累月，不知不觉地缠上电脑使用者。如未经治疗，可能会对双手造成无可挽救的损害，一旦严重的伤害，双手将不再灵活。但到了这个时候，往往神经、肌肉和结缔组织，早已受到严重的损伤。</p>\n<p>对于游戏开发者来说这个问题是很严重的，因为鼠标和键盘是最有效的工作和交流方式，但对于患有RSI疾病的人而言，这两个外设几乎形同虚设，所以使用电脑都是很大的问题。</p>\n<p>然而，Rusty决定学习不用手的方式做游戏研发，他几乎用了一年半的时间学习与电脑互动的新方式，通过语音编程、眼部追踪和脚踏板的方式完成了游戏研发。上个月，他创作的新游戏《Dig Dog》正式登录PC、主机和手游平台。</p>\n<h1>患病之后：如何替代键盘鼠标输入</h1>\n<p>本质来说，Moyher是可以使用手的，但RSI意味着连续几个小时使用键盘鼠标已经是不可能的，为了找回对游戏研发的热情，他必须使用新的方式与电脑互动。最开始的时候，他尝试了很多种非传统外设，但却没有一个能够满足需求。</p>\n<p>Moyher说，“我尝试了各种辅助设备，但投入了大量资金之后发现这些并没有什么作用，比如立体键盘、和立体鼠标等等，我买过250美元一个的辊轮鼠标，用起来还可以，但我觉得人类的身体素质各异，所以你很难找到真正适合你用的”。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/db5539029e3bf667ad59b7af9d39ec1e.gif\" alt=\"\" width=\"643\" height=\"359\"></p>\n<p>他的第一次突破是发现了一个可以用语音写代码的视频，这个视频是Travis Rudd在2013年发布的，后者也是一个患有RSI症状的程序员和开发者，视频中展示了Rudd自己研发的声音识别软件Dragon NaturallySpeaking，这样就可以通过语音指令写Python代码。</p>\n<p>与Rudd联系之后，Moyher学习了Natlink与Dragonfly工具，这些可以让用户把定制化的关键短语作为触发器，如果你不太熟悉这个软件，那么我们进行简单的介绍，在默认情况下，它的主要工作就是把一个人的声音转化为文字，如果没有额外的工具和变成，那么使用Dragon写代码是非常消耗时间的工作。</p>\n<p>通过配合Natlink与Dragonfly工具，Moyher可以直接使用语音指令，但这对他来说并没有那么容易适应。“我用了很长时间适应这种工具的使用方法，实际上在项目开始的一年半之前就已经在尝试了，当时我只是在研究这些工具，尝试适合我的方式”。</p>\n<p>据Moyher透露，大多数的时间都用在了把输入方式简单化，这样他在工作的时候就不用担心一个失误导致所有工作都白费，“我看到过有些人使用这种语音写代码的案例，他们会设置中继设备，比如在虚拟机里运行Windows系统和Dragon软件，比如Parallels，而且他们使用这些与操作系统的外界声音进行交流”。</p>\n<p>这让整个过程更加复杂，所以他决定进行简化，“我是直接使用Windows，所以就没有那么多的相关环节，这样错误的几率就会降低，“在简化之后，我用起来更为得心应手”。Moyher遇到的另一个问题就是他不能直接使用Rudd研发的Python指令，因为Moyher使用的集成研发环境（IDE）是Visual Studio和Xcode。他不仅要研发新的语音指令，由于这些环境使用鼠标的频率很高，所以他还要需要新的指令输入方式。</p>\n<h1>不用手如何做游戏研发？</h1>\n<p>虽然Moyher尝试了大量不同的外设，但没有一个真正令他满意，直到体验了Natural Point的SmartNav 4，SmartNav的工作原理就是追踪与Moyher帽子上连接的反射器，由于灵敏度较高，他只需要很小幅度的转头就可以在屏幕上发出指令，然而他也表示，SmartNav 4也并不是100%理想。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/f495b537370340dfba8da04fff31ba71.jpg\" alt=\"\" width=\"646\" height=\"406\"></p>\n<p>“SmartNav 4是我在网上找到的，由于我知道自己的病情，只能尽可能少的用手，多休息，所以它成为了一个很好的鼠标替代工具，至少已经足够好用。但我认为它可以变得更好，软件版本很老，而且也是一个不那么注意细节的USB设备”。</p>\n<p>用了这个设备之后，Moyher对它的要求更高了，“我从其他人那里得到了很多使用眼睛追踪的建议，这些事情实际上我以前就尝试过，所以决定深度挖掘这种方式”。</p>\n<p>当然，找到不用手操作鼠标并不是唯一的问题，他还需要解决鼠标点击输入的问题，当然，这跟眼部追踪或者语音识别比起来就简单很多，“我是用脚点击的，所以这种设备用起来较为便宜，而且使用起来也很方便”。</p>\n<p>游戏研发是辛苦的，但如果你面临Moyher这样的困难，那就更艰难了。《Dig Dog》最初是一个很简单的游戏，只是让一条狗在沙漠中行走，他非常喜欢平台游戏，但加入了挖掘玩法之后，这款游戏的玩法重心就发生了变化，而且项目最初的名字也不是Dig Dog。</p>\n<p>“游戏名字并不是参考了《Dig Dug》，最初我只是想做一款让狗狗在沙漠中行走的游戏，一开始我很想做一款iOS平台游戏，这个游戏就是这么开始的。发现了挖掘玩法之后，游戏的主要玩法就变成了挖掘，曾几何时我给项目取的名字是Dig A Dog A Bone，但最后《Dig Dog》更利于传播”。</p>\n<p>为了写代码，Moyher不仅要重新思考新的代码输入方式，还需要重新设计代码整体布局，在游戏研发过程中，他的输入方式也发生了很多变化。不过，游戏测试仍然需要他使用双手，“的确，这是一款平台游戏，游戏带给玩家的感觉是很重要的，你必须亲自体验和经历手柄操作，所以我有时候也避免不了”。</p>\n<h1>新挑战：不用手玩游戏</h1>\n<p>在编写《Dig Dog》代码的时候，Moyher克服了重重困难，他打算继续追逐游戏研发的梦想，疾病没有扼杀他对于游戏研发的热爱，他不仅继续编程，还坚持玩游戏，这样可以让游戏设计被更多人接受。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ff478803b38378840f749436e1e8ce80.jpg\" alt=\"\" width=\"792\" height=\"449\"></p>\n<p>“这些方法是我在使用SmartNav 4的时候发现的，我最开始只是用鼠标和脚踏板玩游戏，随后我开始尝试其他回合制游戏，并且寻找不用手进行游戏操作的方式”。</p>\n<p>虽然游戏速度是一方面的因素，Moyher表示一款游戏真正的难度在于，玩家需要同时处理很多东西，“我觉得回合制游戏比较适合，比如《RimWorld》用这种方法玩起来就很难，你需要点击太多的东西，鼠标的不精确让你很难操作这么多的单位”。</p>\n<p>之所以提到Moyher的故事，主要是为了说明，只要你对于某些事情有热情，就能找到方法克服重重困难，或许，他在采访最后所说的话可以给业内所有同行共勉：我开始这个项目的时候，就已经有了足够多的工具，所以很确定整个游戏是能够做出来的，我只需要更有耐心就可以完成，但当时我甚至不知道能否做得到，虽然写代码很难，但我认为只要你想学，所有人都能学会。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113722\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113722votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113722\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/6d8769da18e5fbec28cb5a2e5550323fe12e463a.jpg", "fav_nums": 0, "title": "励志！海外开发者讲述用脚做游戏的研发经历", "comment_nums": 0, "tags": "IT技术,开发者"}/n